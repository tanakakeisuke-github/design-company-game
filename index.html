<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ç™ºå±•å›½</title>
<style>
/* â”€â”€ GOOGLE FONTS â”€â”€ */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap');

/* â”€â”€ RESET & ROOT â”€â”€ */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden;background:#f7f7f9;color:#18181b;font-family:'Noto Sans JP',sans-serif;font-size:16px;user-select:none}
button{font-family:inherit;cursor:pointer;border:none;background:none;outline:none;color:inherit}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:#f0f0f2}::-webkit-scrollbar-thumb{background:#d4d4d8;border-radius:4px}

:root{
  /* ã‚µãƒ¼ãƒ•ã‚§ã‚¹ */
  --bg:#f7f7f9;
  --bg1:#ffffff;
  --bg2:#fafafa;
  --bg3:#f4f4f6;
  --bg4:#ebebed;
  /* ãƒœãƒ¼ãƒ€ãƒ¼ */
  --bord:#e4e4e7;
  --bord2:#d1d1d6;
  /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ: ã‚¤ãƒ³ãƒ‡ã‚£ã‚´ */
  --acc:#4f46e5;
  --acc-lt:#ede9fe;
  --acc-md:#7c6ff7;
  /* ã‚»ã‚«ãƒ³ãƒ€ãƒª: ãƒ­ãƒ¼ã‚º */
  --acc2:#e11d48;
  --acc2-lt:#fff1f2;
  /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚«ãƒ©ãƒ¼ */
  --teal:#0d9488;
  --teal-lt:#f0fdf9;
  --gold:#b45309;
  --gold-lt:#fffbeb;
  --warn:#c2410c;
  --warn-lt:#fff7ed;
  --red:#dc2626;
  --red-lt:#fef2f2;
  --ok:#15803d;
  --ok-lt:#f0fdf4;
  --pur:#7e22ce;
  /* ãƒ†ã‚­ã‚¹ãƒˆ */
  --t1:#18181b;
  --t2:#52525b;
  --t3:#a1a1aa;
  --t4:#d4d4d8;
  /* ã‚·ãƒ£ãƒ‰ã‚¦ */
  --sh-s:0 1px 2px rgba(0,0,0,.05);
  --sh-m:0 2px 8px rgba(0,0,0,.06),0 1px 2px rgba(0,0,0,.04);
  --sh-l:0 4px 16px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.04);
}

/* â”€â”€ TITLE â”€â”€ */
#SCR_TITLE{
  position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;
  justify-content:center;gap:18px;
  background:linear-gradient(150deg,#fafaff 0%,#f0efff 50%,#faf5ff 100%);
}
#tcv{image-rendering:pixelated;border:1px solid var(--bord);box-shadow:var(--sh-l);border-radius:12px}
.t-logo{
  font-size:clamp(15px,3vw,22px);color:var(--acc);letter-spacing:1px;
  text-align:center;line-height:1.7;font-weight:700;font-family:'Noto Sans JP',sans-serif;
}
.t-logo span{color:var(--t3);font-size:0.65em;font-weight:400;letter-spacing:2px}
.t-btn{
  background:var(--acc);border:none;color:#fff;padding:11px 42px;font-size:13px;
  letter-spacing:1px;transition:all .18s;border-radius:8px;font-weight:600;
  box-shadow:0 2px 8px rgba(79,70,229,.35);
}
.t-btn:hover{background:#4338ca;box-shadow:0 4px 16px rgba(79,70,229,.45);transform:translateY(-1px)}
.t-btn.sec{
  background:#fff;border:1px solid var(--bord2);color:var(--t2);
  box-shadow:var(--sh-s);font-weight:500;
}
.t-btn.sec:hover{background:var(--bg3);border-color:var(--bord);transform:none;box-shadow:var(--sh-s)}
.t-blink{font-size:13px;color:var(--t4);letter-spacing:4px;animation:blink 1.4s step-end infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
@keyframes glow{0%,100%{opacity:1}50%{opacity:.8}}

/* â”€â”€ LOADING â”€â”€ */
#SCR_LOAD{
  position:fixed;inset:0;background:#fff;display:flex;flex-direction:column;
  align-items:center;justify-content:center;z-index:2000;gap:16px;
}
.ld-bar{width:200px;height:2px;background:var(--bg4);border-radius:2px}
.ld-f{height:100%;background:var(--acc);animation:ldf 1.6s ease forwards;border-radius:2px}
@keyframes ldf{from{width:0}to{width:100%}}

/* â”€â”€ GAME SHELL â”€â”€ */
#GAME{display:none;height:100vh;flex-direction:column}

/* â”€â”€ HUD â”€â”€ */
#hud{
  background:var(--bg1);border-bottom:1px solid var(--bord);
  padding:6px 14px;display:flex;align-items:center;gap:6px;flex-shrink:0;flex-wrap:wrap;
  box-shadow:var(--sh-s);
}
.hud-co{
  font-size:13px;color:var(--acc);font-weight:700;letter-spacing:.3px;
  padding-right:10px;border-right:1px solid var(--bord);white-space:nowrap;
}
.hstats{display:flex;gap:4px;flex-wrap:wrap;flex:1}
.hs{
  display:flex;align-items:center;gap:4px;
  background:var(--bg3);border:1px solid var(--bord);
  padding:3px 8px;font-size:13px;border-radius:6px;
}
.hs-lbl{color:var(--t3);font-size:13px}
.hs-v{color:var(--t1);font-weight:600;min-width:26px}
.hs-v.g{color:var(--gold)}.hs-v.tl{color:var(--teal)}.hs-v.r{color:var(--red)}.hs-v.p{color:var(--acc2)}
.hs-v.blink{animation:blink .8s step-end infinite;color:var(--warn)}
/* æ—¥ä»˜ãƒãƒƒã‚¸ */
.hdate{
  display:flex;align-items:center;gap:5px;
  background:var(--acc-lt);border:1px solid #c7d2fe;
  padding:4px 10px;border-radius:6px;
  font-size:13px;font-weight:600;color:var(--acc);white-space:nowrap;margin-left:auto;
}
.hdate-day{font-size:13px;color:var(--acc-md);font-weight:400}
/* ãƒ•ã‚§ãƒ¼ã‚ºãƒãƒƒã‚¸ */
.hph{
  background:var(--acc);border-radius:6px;padding:4px 10px;
  font-size:13px;color:#fff;letter-spacing:.5px;font-weight:600;white-space:nowrap;
}

/* â”€â”€ NAV â”€â”€ */
#main{display:flex;flex:1;overflow:hidden}
#nav{
  width:52px;background:var(--bg1);border-right:1px solid var(--bord);
  display:flex;flex-direction:column;align-items:center;padding:6px 0;gap:2px;flex-shrink:0;
}
.nb{
  width:42px;height:42px;display:flex;flex-direction:column;align-items:center;
  justify-content:center;gap:2px;border-radius:8px;border:1px solid transparent;
  color:var(--t3);font-size:19px;transition:all .15s;position:relative;
}
.nb span{font-size:13px;color:var(--t4);font-family:'Noto Sans JP',sans-serif;letter-spacing:.3px}
.nb:hover{background:var(--bg3);border-color:var(--bord);color:var(--t2)}
.nb:hover span{color:var(--t3)}
.nb.on{background:var(--acc-lt);border-color:#c7d2fe;color:var(--acc)}
.nb.on span{color:var(--acc)}
.nbadge{
  position:absolute;top:2px;right:2px;background:var(--red);color:#fff;
  font-size:13px;width:12px;height:12px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;font-weight:700;
}
.nsep{width:28px;height:1px;background:var(--bord);margin:3px 0}

/* â”€â”€ CONTENT & OFFICE â”€â”€ */
#content{flex:1;display:flex;flex-direction:column;overflow:hidden}
#owrap{
  height:240px;flex-shrink:0;background:#e8e8ec;
  border-bottom:1px solid var(--bord);position:relative;overflow:hidden;
  min-height:120px;max-height:600px;
}
#owrap-handle{
  position:absolute;bottom:0;left:0;right:0;height:10px;
  cursor:ns-resize;z-index:20;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(to top,rgba(0,0,0,0.12),transparent);
  transition:background .15s;
}
#owrap-handle:hover{background:linear-gradient(to top,rgba(99,102,241,0.35),transparent);}
#owrap-handle::after{
  content:'';width:28px;height:3px;border-radius:2px;
  background:rgba(255,255,255,0.5);
  box-shadow:0 -4px 0 rgba(255,255,255,0.3),0 4px 0 rgba(255,255,255,0.3);
}
#ocv{display:block;}
.olb{
  position:absolute;top:6px;left:8px;font-size:13px;
  color:rgba(79,70,229,.6);letter-spacing:2px;font-weight:600;
  background:rgba(255,255,255,.75);padding:2px 6px;border-radius:4px;backdrop-filter:blur(4px);
}
#oc-zoom-ctrl{
  position:absolute;top:6px;right:8px;
  display:flex;align-items:center;gap:3px;z-index:10;
}
.oc-zoom-btn{
  width:26px;height:26px;border-radius:5px;border:none;
  background:rgba(255,255,255,0.72);backdrop-filter:blur(4px);
  color:#4f46e5;font-size:17px;font-weight:700;
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all .15s;line-height:1;padding:0;
}
.oc-zoom-btn:hover{background:rgba(255,255,255,0.95);transform:scale(1.1);}
.oc-zoom-btn:active{transform:scale(0.92);}
#oc-zoom-val{
  font-size:10px;font-weight:700;color:rgba(79,70,229,0.9);
  background:rgba(255,255,255,0.72);backdrop-filter:blur(4px);
  padding:2px 7px;border-radius:4px;min-width:38px;text-align:center;
  letter-spacing:.5px;
}

/* â”€â”€ PANELS â”€â”€ */
#panels{flex:1;overflow-y:auto;padding:12px 14px;background:var(--bg)}
.panel{display:none}.panel.on{display:block}

/* â”€â”€ SECTION HEADER â”€â”€ */
.sh{
  font-size:13px;color:var(--t3);letter-spacing:2px;text-transform:uppercase;
  border-bottom:1px solid var(--bord);padding-bottom:6px;margin-bottom:10px;
  display:flex;align-items:center;gap:6px;font-weight:600;
}
.sh::before{display:none}
.sh .ct{margin-left:auto;font-size:13px;color:var(--t4);letter-spacing:0}

/* â”€â”€ WARN BARS â”€â”€ */
.wbar{
  background:var(--red-lt);border:1px solid #fca5a5;color:var(--red);
  padding:5px 10px;font-size:13px;margin-bottom:8px;border-radius:6px;
  animation:blink 1.2s step-end infinite;display:none;
}
.ibar{
  background:var(--gold-lt);border:1px solid #fcd34d;color:var(--gold);
  padding:5px 10px;font-size:13px;margin-bottom:8px;border-radius:6px;display:none;
}

/* â”€â”€ TURN ROW â”€â”€ */
.trow{
  display:flex;align-items:center;gap:10px;
  background:var(--bg1);border:1px solid var(--bord);
  padding:10px 14px;margin-bottom:12px;border-radius:10px;
  box-shadow:var(--sh-s);
}
.tinfo{flex:1;font-size:13px;color:var(--t2);line-height:1.7}
.tinfo b{color:var(--t1);font-weight:600}
.tinfo .hint{font-size:13px;color:var(--t3)}
.tinfo .hint kbd{
  background:var(--bg3);border:1px solid var(--bord2);color:var(--t2);
  padding:0px 4px;border-radius:3px;font-size:13px;font-family:inherit;
}
.btn-turn{
  background:var(--acc);color:#fff;padding:9px 22px;font-size:13px;
  letter-spacing:.5px;transition:all .2s;border-radius:8px;font-weight:600;
  box-shadow:0 2px 8px rgba(79,70,229,.4);
  animation:turnpulse 2.5s ease-in-out infinite;
}
@keyframes turnpulse{
  0%,100%{box-shadow:0 2px 8px rgba(79,70,229,.35)}
  50%{box-shadow:0 4px 18px rgba(79,70,229,.55),0 0 0 3px rgba(79,70,229,.1)}
}
.btn-turn:hover{background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 14px rgba(79,70,229,.5)}
.btn-turn:disabled{
  background:var(--bg4);color:var(--t4);box-shadow:none;
  transform:none;cursor:not-allowed;animation:none;
}

/* â”€â”€ DASH STATS GRID â”€â”€ */
.dgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px;margin-bottom:12px}
.dc{
  background:var(--bg1);border:1px solid var(--bord);padding:10px 12px;
  border-radius:8px;box-shadow:var(--sh-s);
}
.dc-l{font-size:13px;color:var(--t3);letter-spacing:1px;text-transform:uppercase;margin-bottom:3px;font-weight:600}
.dc-v{font-size:20px;font-weight:700;margin-bottom:3px;color:var(--t1)}
.dc-b{height:2px;background:var(--bg4);border-radius:2px}.dc-bf{height:100%;border-radius:2px;transition:width .4s}

/* â”€â”€ ACTIVE PROJECT â”€â”€ */
.ap{
  background:var(--bg1);border:1px solid var(--bord);padding:10px 12px;
  margin-bottom:7px;border-radius:8px;box-shadow:var(--sh-s);
  position:relative;overflow:hidden;transition:all .15s;
}
.ap:hover{border-color:var(--bord2);box-shadow:var(--sh-m)}
.ap::before{
  content:'';position:absolute;left:0;top:0;bottom:0;width:3px;
  background:var(--acc);border-radius:3px 0 0 3px;
}
.ap-h{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}
.ap-n{font-size:13px;color:var(--t1);font-weight:600}
.ap-pct{font-size:18px;color:var(--acc);font-weight:700}
.ap-m{display:flex;gap:6px;font-size:13px;color:var(--t3);margin-bottom:6px;flex-wrap:wrap}
.apbar{height:4px;background:var(--bg4);overflow:hidden;border-radius:2px}
.apbf{height:100%;background:linear-gradient(90deg,var(--acc),var(--acc-md));border-radius:2px;transition:width .5s}
.apass{margin-top:7px;display:flex;gap:4px;flex-wrap:wrap;align-items:center}
.apal{font-size:13px;color:var(--t3)}
.ach{
  background:var(--bg3);border:1px solid var(--bord);padding:3px 8px;
  font-size:13px;color:var(--t2);cursor:pointer;transition:all .15s;border-radius:5px;font-weight:500;
}
.ach:hover{border-color:var(--teal);color:var(--teal);background:var(--teal-lt)}
.ach.sel{border-color:var(--teal);color:var(--teal);background:var(--teal-lt)}
.ach.bsy{opacity:.35;cursor:default;pointer-events:none}

/* â”€â”€ PROJECT CARDS â”€â”€ */
.pcgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:10px}
.pc{
  background:var(--bg1);border:1px solid var(--bord);padding:12px;
  border-radius:10px;box-shadow:var(--sh-s);transition:all .18s;
}
.pc:hover{box-shadow:var(--sh-m);border-color:var(--bord2);transform:translateY(-1px)}
.pc-h{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:5px}
.pc-ti{font-size:20px}.pc-ug{font-size:13px;color:var(--red);background:var(--red-lt);border:1px solid #fca5a5;padding:1px 5px;border-radius:4px;font-weight:600}
.pc-nm{font-size:13px;color:var(--t1);font-weight:600;margin-bottom:3px}
.pc-cl{font-size:13px;color:var(--t3);margin-bottom:7px}
.pc-st{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:8px}
.pct{background:var(--bg3);border:1px solid var(--bord);padding:2px 6px;font-size:13px;color:var(--t2);border-radius:4px;font-weight:500}
.pct.pri{background:var(--gold-lt);border-color:#fcd34d;color:var(--gold)}
.pct.dif{background:var(--warn-lt);border-color:#fed7aa;color:var(--warn)}
.pc-f{display:flex;align-items:center;justify-content:space-between;margin-top:6px;padding-top:8px;border-top:1px solid var(--bord)}
.pc-pr{font-size:14px;color:var(--gold);font-weight:700}
.btn-acc{
  background:var(--acc);color:#fff;padding:5px 12px;font-size:13px;
  border-radius:6px;font-weight:600;transition:all .15s;
}
.btn-acc:hover{background:#4338ca}.btn-acc:disabled{background:var(--bg4);color:var(--t4);cursor:not-allowed}

/* â”€â”€ STAFF â”€â”€ */
.scgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:10px}
.sc{
  background:var(--bg1);border:1px solid var(--bord);padding:12px;
  border-radius:10px;box-shadow:var(--sh-s);
}
.sc-h{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}
.sc-i{font-size:22px}.sc-n{font-size:13px;color:var(--t1);font-weight:600;margin-bottom:1px}
.sc-r{font-size:13px;color:var(--t3);letter-spacing:.3px}
.sc-st{font-size:13px;padding:2px 6px;border-radius:10px;font-weight:600}
.sc-st.idle{background:var(--bg3);color:var(--t3)}
.sc-st.working{background:var(--acc-lt);color:var(--acc)}
.sc-bars{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}
.sc-bar{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--t3)}
.sc-bar-bg{flex:1;height:3px;background:var(--bg4);border-radius:2px}
.sc-bar-fg{height:100%;border-radius:2px;transition:width .4s}
.sc-bar-v{width:18px;text-align:right;color:var(--t2);font-weight:600}
.sc-f{display:flex;align-items:center;justify-content:space-between;padding-top:8px;border-top:1px solid var(--bord)}
.btn-fir{
  background:var(--red-lt);border:1px solid #fca5a5;color:var(--red);
  padding:3px 8px;font-size:13px;border-radius:5px;font-weight:500;transition:all .15s;
}
.btn-fir:hover{background:#fee2e2;border-color:var(--red)}

/* â”€â”€ HIRE â”€â”€ */
.hcgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:10px}
.hc{
  background:var(--bg1);border:1px solid var(--bord);padding:12px;
  border-radius:10px;box-shadow:var(--sh-s);transition:all .18s;
}
.hc:hover{box-shadow:var(--sh-m);border-color:var(--bord2)}
.hc-h{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:5px}
.hc-n{font-size:13px;color:var(--t1);font-weight:600}.hc-ro{font-size:13px;color:var(--t3);letter-spacing:.3px}
.hc-sl{font-size:13px;color:var(--gold);text-align:right;font-weight:700}
.hc-sl span{font-size:13px;color:var(--t3);font-weight:400}
.hc-risk{
  font-size:13px;color:var(--warn);
  background:var(--warn-lt);border:1px solid #fed7aa;
  padding:3px 7px;border-radius:4px;margin-bottom:8px;font-style:italic;
}
.hc-f{display:flex;align-items:center;justify-content:space-between;margin-top:8px;padding-top:8px;border-top:1px solid var(--bord)}
.hc-co{font-size:13px;color:var(--t3)}
.btn-hire{
  background:var(--ok);color:#fff;padding:5px 12px;font-size:13px;
  border-radius:6px;font-weight:600;transition:all .15s;
}
.btn-hire:hover{background:#15803d}.btn-hire:disabled{background:var(--bg4);color:var(--t4);cursor:not-allowed}

/* â”€â”€ TECH TREE â”€â”€ */
.tt-sec{margin-bottom:18px}
.tech-row{display:flex;gap:10px;flex-wrap:wrap;padding-left:8px}
.tn{
  background:var(--bg1);border:1.5px solid var(--bord);padding:10px 12px;
  min-width:105px;text-align:center;transition:all .18s;border-radius:10px;box-shadow:var(--sh-s);
}
.tn.un{border-color:var(--teal);background:var(--teal-lt)}
.tn.av{border-color:var(--acc);cursor:pointer;background:var(--acc-lt)}
.tn.av:hover{box-shadow:var(--sh-m);transform:translateY(-2px)}
.tn.lk{opacity:.4;cursor:not-allowed}
.tn-ic{font-size:22px;margin-bottom:3px}
.tn-nm{font-size:13px;color:var(--t1);letter-spacing:.3px;margin-bottom:2px;font-weight:600}
.tn-co{font-size:13px;color:var(--gold);font-weight:600}
.tn-st{font-size:13px;margin-top:2px;font-weight:600}
.tn.un .tn-st{color:var(--teal)}.tn.av .tn-st{color:var(--acc)}.tn.lk .tn-st{color:var(--t4)}
.tn-ef{font-size:13px;color:var(--acc2);margin-top:2px}

/* â”€â”€ PROGRESS â”€â”€ */
.phases{display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap}
.ph{
  flex:1;min-width:95px;background:var(--bg1);border:1px solid var(--bord);
  padding:10px 8px;text-align:center;border-radius:8px;box-shadow:var(--sh-s);
}
.ph.done{border-color:var(--teal);background:var(--teal-lt)}
.ph.cur{border-color:var(--acc);background:var(--acc-lt);animation:phg 2.5s ease infinite}
@keyframes phg{0%,100%{box-shadow:0 0 0 0 rgba(79,70,229,.15)}50%{box-shadow:0 0 0 4px rgba(79,70,229,.15)}}
.ph-n{font-size:22px;margin-bottom:3px}.ph-nm{font-size:13px;color:var(--t2);letter-spacing:.3px;font-weight:600}
.ph-s{font-size:13px;color:var(--t3);margin-top:2px}
.ofgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:8px;margin-bottom:14px}
.ofc{
  background:var(--bg1);border:1px solid var(--bord);padding:10px;
  border-radius:8px;box-shadow:var(--sh-s);transition:all .15s;
}
.ofc.cur{border-color:var(--acc);background:var(--acc-lt)}
.ofc.past{opacity:.5}
.ofc-ic{font-size:24px;margin-bottom:5px}.ofc-n{font-size:13px;color:var(--t1);font-weight:700;margin-bottom:2px}
.ofc-d{font-size:13px;color:var(--t3);line-height:1.6;margin-bottom:6px}
.ofc-f{display:flex;align-items:center;justify-content:space-between}.ofc-p{font-size:13px;color:var(--gold);font-weight:700}
.btn-up{
  background:var(--acc);color:#fff;padding:4px 10px;font-size:13px;
  border-radius:5px;font-weight:600;transition:all .15s;
}
.btn-up:hover{background:#4338ca}.btn-up:disabled{background:var(--bg4);color:var(--t4);cursor:not-allowed}
.statbox{
  background:var(--bg1);border:1px solid var(--bord);padding:12px;
  border-radius:8px;box-shadow:var(--sh-s);
  display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:6px;
}
.si{font-size:13px;color:var(--t2);display:flex;justify-content:space-between;padding:2px 0}
.si b{color:var(--t1);font-weight:600}

/* â”€â”€ LOG â”€â”€ */
.log{
  background:var(--bg1);border:1px solid var(--bord);padding:8px 10px;
  max-height:130px;overflow-y:auto;border-radius:8px;
  font-size:13px;line-height:2;
}
.le{display:flex;gap:5px;border-bottom:1px solid var(--bord);padding:1px 0}
.le:last-child{border-bottom:none}
.le-t{color:var(--t4);flex-shrink:0;font-weight:600}.le-x{color:var(--t2)}
.good .le-t{color:var(--ok)}.bad .le-t{color:var(--red)}.evt .le-t{color:var(--warn)}.sys .le-t{color:var(--acc)}

/* â”€â”€ MODALS â”€â”€ */
.mbg{position:fixed;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:500;padding:16px}
.mbg.open{display:flex}
.mbox{
  background:#fff;border:1px solid var(--bord);max-width:440px;width:100%;
  padding:24px;border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.15);
  animation:mop .2s ease;
}
.mbox.danger{border-top:3px solid var(--red)}.mbox.success{border-top:3px solid var(--ok)}.mbox.warn{border-top:3px solid var(--warn)}
@keyframes mop{from{transform:scale(.94) translateY(10px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}
.mic{font-size:42px;text-align:center;display:block;margin-bottom:10px}
.mtt{font-size:16px;text-align:center;color:var(--t1);letter-spacing:.3px;margin-bottom:8px;line-height:1.4;font-weight:700}
.mbox.danger .mtt{color:var(--red)}.mbox.success .mtt{color:var(--ok)}.mbox.warn .mtt{color:var(--warn)}
.mds{font-size:13px;color:var(--t2);text-align:center;line-height:2;margin-bottom:16px;white-space:pre-line}
.mch-list{display:flex;flex-direction:column;gap:7px}
.mch{
  background:var(--bg3);border:1px solid var(--bord);padding:10px 13px;
  color:var(--t1);font-size:13px;cursor:pointer;transition:all .15s;
  display:flex;justify-content:space-between;align-items:center;gap:6px;
  text-align:left;font-family:inherit;width:100%;border-radius:8px;font-weight:500;
}
.mch:hover{border-color:var(--acc);background:var(--acc-lt);color:var(--acc)}
.mch .ef{font-size:13px;color:var(--t3);flex-shrink:0}.mch:hover .ef{color:var(--acc-md)}
.rev-box{border-top:3px solid var(--gold)}
.rev-st{font-size:24px;text-align:center;letter-spacing:5px;color:var(--gold);margin-bottom:6px}
.rev-cm{font-size:13px;text-align:center;color:var(--t2);font-style:italic;margin-bottom:12px;line-height:1.8}
.rev-ef{font-size:13px;text-align:center;color:var(--t3);margin-bottom:12px;line-height:2}
.btn-ok{
  display:block;width:100%;background:var(--bg3);border:1px solid var(--bord);
  color:var(--t2);padding:9px;font-size:13px;letter-spacing:1px;transition:all .15s;
  cursor:pointer;font-family:inherit;border-radius:8px;font-weight:500;
}
.btn-ok:hover{border-color:var(--gold);color:var(--gold);background:var(--gold-lt)}

/* â”€â”€ ENDING â”€â”€ */
#SCR_END{
  position:fixed;inset:0;background:linear-gradient(150deg,#f0efff 0%,#faf5ff 100%);
  display:none;flex-direction:column;align-items:center;justify-content:center;
  z-index:700;padding:20px;text-align:center;
}
#SCR_END.open{display:flex}
.end-t{font-size:clamp(16px,4vw,28px);letter-spacing:1px;margin-bottom:12px;line-height:1.4;font-weight:700;color:var(--t1)}
.end-s{max-width:440px;font-size:13px;color:var(--t2);line-height:2.2;margin-bottom:18px;white-space:pre-line}
.end-st{
  background:#fff;border:1px solid var(--bord);padding:14px 18px;margin-bottom:20px;
  font-size:13px;color:var(--t3);line-height:2;
  display:grid;grid-template-columns:1fr 1fr;gap:4px 18px;max-width:360px;
  border-radius:12px;box-shadow:var(--sh-m);
}
.end-st b{color:var(--t1);font-weight:700}
.btn-re{
  background:var(--acc);color:#fff;padding:11px 32px;font-size:13px;letter-spacing:.5px;
  transition:all .2s;font-family:inherit;cursor:pointer;border-radius:8px;font-weight:600;
  box-shadow:0 2px 8px rgba(79,70,229,.35);
}
.btn-re:hover{background:#4338ca;box-shadow:0 4px 14px rgba(79,70,229,.5);transform:translateY(-1px)}

/* â”€â”€ TURN PROGRESS (office overlay) â”€â”€ */
#turn-progress{
  position:absolute;bottom:0;left:0;right:0;height:22px;
  background:rgba(255,255,255,.85);backdrop-filter:blur(6px);
  border-top:1px solid rgba(0,0,0,.06);
  display:flex;align-items:center;gap:8px;padding:0 12px;pointer-events:none;
}
#tp-bar{height:4px;background:var(--bg4);flex:1;overflow:hidden;border-radius:2px}
#tp-bar::after{content:'';display:block;height:100%;background:linear-gradient(90deg,var(--acc),var(--acc-md));transition:width .4s ease;width:var(--tp,0%)}
#tp-txt{font-size:13px;color:var(--t3);white-space:nowrap;letter-spacing:.5px;min-width:100px;text-align:right;font-weight:500}

/* AUTOå‰Šé™¤æ¸ˆ */

/* â”€â”€ NOTIF PANEL (åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦) â”€â”€ */
#notif-panel{
  position:fixed;top:60px;right:0;z-index:700;
  width:220px;
  background:var(--bg2);
  border:1px solid var(--bord);
  border-right:none;
  border-radius:8px 0 0 8px;
  box-shadow:-3px 3px 14px rgba(0,0,0,0.15);
  display:flex;flex-direction:column;
  transform:translateX(calc(100% - 28px));
  transition:transform .28s cubic-bezier(.4,0,.2,1);
  pointer-events:auto;
  font-family:inherit;
  overflow:hidden;
  max-height:calc(100vh - 80px);
}
#notif-panel:hover,#notif-panel.open{transform:translateX(0);}
#notif-panel-tab{
  position:absolute;left:0;top:50%;transform:translateY(-50%);
  width:28px;
  writing-mode:vertical-rl;
  font-size:13px;font-weight:700;letter-spacing:1px;
  color:var(--t3);padding:8px 5px;cursor:pointer;
  background:var(--bg2);border-right:1px solid var(--bord2);
  border-radius:8px 0 0 8px;
  user-select:none;
}
#notif-list{
  margin-left:28px;
  overflow-y:auto;
  display:flex;flex-direction:column;gap:1px;
  max-height:calc(100vh - 140px);
  padding:4px 0;
}
#notif-list::-webkit-scrollbar{width:3px;}
#notif-list::-webkit-scrollbar-thumb{background:var(--bord2);}
.nf{
  background:var(--bg1);border-left:3px solid var(--acc);padding:6px 8px;font-size:13px;
  border-radius:0;color:var(--t1);line-height:1.5;
  animation:nfi .2s ease;
}
.nf.out{animation:nfo .25s ease forwards}
.nf.danger{border-left-color:var(--red)}.nf.ok{border-left-color:var(--ok)}.nf.warn{border-left-color:var(--warn)}
@keyframes nfi{from{opacity:0;transform:translateX(8px)}to{opacity:1;transform:translateX(0)}}
@keyframes nfo{to{opacity:0;transform:translateX(6px)}}
#notif-hdr{
  margin-left:28px;
  display:flex;justify-content:space-between;align-items:center;
  padding:5px 8px;border-bottom:1px solid var(--bord2);
  font-size:13px;font-weight:700;color:var(--t2);
}
#notif-badge{
  position:absolute;left:2px;top:8px;
  background:var(--red);color:#fff;border-radius:50%;
  width:12px;height:12px;font-size:13px;font-weight:700;
  display:none;align-items:center;justify-content:center;
  line-height:1;
}
/* æ—§notifséè¡¨ç¤º */
#notifs{display:none!important;}
.empty{font-size:13px;color:var(--t3);padding:16px;text-align:center;line-height:2}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AI MODE  (ç™½ãƒ†ãƒ¼ãƒå¯¾å¿œ)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ AIãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ â”€â”€ */
#btn-ai{
  display:flex;align-items:center;gap:6px;
  background:var(--bg3);border:1px solid var(--bord2);color:var(--t2);
  padding:5px 13px;font-size:13px;border-radius:7px;font-weight:700;
  transition:all .25s;white-space:nowrap;cursor:pointer;
  letter-spacing:.3px;
}
#btn-ai:hover{background:var(--bg4);border-color:var(--bord);}
#btn-ai.on{
  background:linear-gradient(135deg,#4f46e5,#7c3aed);
  border-color:transparent;color:#fff;
  box-shadow:0 2px 10px rgba(79,70,229,.45);
  animation:aipulse 2s ease-in-out infinite;
}
.ai-dot{
  width:6px;height:6px;border-radius:50%;
  background:rgba(255,255,255,.5);flex-shrink:0;
  display:none;
}
#btn-ai.on .ai-dot{
  display:inline-block;background:#fff;
  animation:blink .7s step-end infinite;
}
@keyframes aipulse{
  0%,100%{box-shadow:0 2px 10px rgba(79,70,229,.4)}
  50%{box-shadow:0 4px 20px rgba(79,70,229,.65),0 0 0 3px rgba(79,70,229,.1)}
}

/* â”€â”€ AIæ€è€ƒãƒãƒ–ãƒ«ï¼ˆå·¦ä¸‹ï¼‰ â”€â”€ */
/* #ai-log ã¯å»ƒæ­¢ï¼ˆAIãƒ‘ãƒãƒ«å†…ã«çµ±åˆï¼‰ */
#ai-log{display:none!important;}
/* AIãƒ‘ãƒãƒ«å†…ã®ãƒ©ã‚¤ãƒ–ãƒ•ã‚£ãƒ¼ãƒ‰ */
.ai-bubble{
  background:var(--bg1);
  border-left:3px solid #6366f1;
  color:var(--t1);font-size:13px;
  padding:8px 10px;
  border-bottom:1px solid var(--bord2);
  line-height:1.7;
}
.ai-bubble:first-child{background:rgba(99,102,241,0.04);}
.ai-tag{
  font-size:13px;color:#6366f1;font-weight:800;letter-spacing:1.5px;
  display:flex;align-items:center;gap:4px;margin-bottom:3px;
}
.ai-tag::before{
  content:'';width:5px;height:5px;border-radius:50%;
  background:#6366f1;flex-shrink:0;
}
@keyframes bubbleIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:none}}
@keyframes bubbleOut{to{opacity:0}}

/* â”€â”€ AIç”Ÿæˆãƒ‡ã‚¶ã‚¤ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/* APIã‚­ãƒ¼è¨­å®šãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªä¸Šéƒ¨ï¼‰ */
.api-key-bar{
  padding:8px 12px;background:var(--bg2);
  border-bottom:1px solid var(--bord2);
  display:flex;align-items:center;gap:8px;flex-wrap:wrap;
}
.api-key-bar.has-key{background:rgba(16,185,129,0.06);}
.api-key-input{
  flex:1;min-width:120px;background:var(--bg1);border:1px solid var(--bord2);
  border-radius:4px;color:var(--t1);font-family:monospace;font-size:13px;
  padding:5px 8px;outline:none;transition:border .15s;
}
.api-key-input:focus{border-color:var(--acc);}
.api-key-save-btn{
  font-size:13px;padding:5px 10px;border-radius:4px;
  background:var(--acc);color:#fff;cursor:pointer;border:none;
  font-family:'Noto Sans JP',sans-serif;font-weight:700;transition:all .15s;flex-shrink:0;
}
.api-key-save-btn:hover{background:#5558f0;}
.api-key-status{font-size:13px;color:var(--t4);flex-shrink:0;}
.api-key-status.ok{color:var(--ok);}

/* ä½œå“é›†ã‚«ãƒ¼ãƒ‰ â€” SVGã‚µãƒ ãƒã‚¤ãƒ«æ‹¡å¤§ */
.pf-card{
  display:grid;grid-template-columns:100px 1fr;gap:0;
  border-bottom:1px solid var(--bord2);overflow:hidden;transition:background .15s;
  cursor:pointer;
}
.pf-card:hover{background:var(--bg2)}
.pf-thumb{
  height:100px;display:flex;align-items:center;justify-content:center;
  position:relative;overflow:hidden;transition:all .2s;
}
.pf-thumb svg,.pf-thumb canvas{
  width:100%;height:100%;object-fit:contain;display:block;
}
.pf-thumb-overlay{
  position:absolute;inset:0;background:rgba(0,0,0,0);
  display:flex;align-items:center;justify-content:center;
  transition:background .2s;
}
.pf-card:hover .pf-thumb-overlay{background:rgba(0,0,0,0.45);}
.pf-thumb-zoom{
  font-size:16px;opacity:0;transform:scale(0.7);
  transition:all .15s;pointer-events:none;
}
.pf-card:hover .pf-thumb-zoom{opacity:1;transform:scale(1);}

/* ç”Ÿæˆä¸­ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
.pf-generating{
  position:absolute;inset:0;
  background:rgba(10,10,20,0.8);
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;
}
.pf-gen-dot{
  width:18px;height:18px;border-radius:50%;
  border:2px solid var(--acc);border-top-color:transparent;
  animation:spin .8s linear infinite;
}
.pf-gen-txt{font-size:13px;color:var(--acc);letter-spacing:1px;}
@keyframes spin{to{transform:rotate(360deg)}}

/* SVGãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ« */
#modal-svg-view{
  position:fixed;inset:0;z-index:8000;
  background:rgba(0,0,0,0.88);
  display:none;align-items:center;justify-content:center;
  padding:20px;
}
#modal-svg-view.open{display:flex;}
.svg-view-box{
  background:var(--bg1);border:1px solid var(--bord2);border-radius:10px;
  max-width:600px;width:100%;max-height:90vh;overflow:hidden;
  display:flex;flex-direction:column;
}
.svg-view-header{
  padding:10px 14px;border-bottom:1px solid var(--bord2);
  display:flex;align-items:center;justify-content:space-between;
}
.svg-view-title{font-size:13px;font-weight:700;color:var(--t1);}
.svg-view-close{
  font-size:13px;padding:3px 8px;background:var(--bg3);
  border:1px solid var(--bord2);border-radius:4px;color:var(--t3);
  cursor:pointer;
}
.svg-view-content{
  flex:1;overflow:auto;padding:20px;
  display:flex;align-items:center;justify-content:center;
  background:#fff;/* SVGã¯ç™½èƒŒæ™¯ã§è¦‹ã›ã‚‹ */
  min-height:300px;
}
.svg-view-content svg{max-width:100%;max-height:60vh;}
.svg-view-footer{
  padding:8px 14px;border-top:1px solid var(--bord2);
  display:flex;justify-content:space-between;align-items:center;
  font-size:13px;color:var(--t3);
}
.svg-dl-btn{
  font-size:13px;padding:4px 10px;background:var(--acc);color:#fff;
  border:none;border-radius:4px;cursor:pointer;
  font-family:'Noto Sans JP',sans-serif;
}

/* â”€â”€ ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ¢ãƒ¼ãƒ‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#SCR_ORDER{
  position:fixed;inset:0;z-index:9000;
  background:var(--bg1);
  display:none;flex-direction:column;align-items:center;justify-content:flex-start;
  overflow-y:auto;padding:0 0 40px;
}
#SCR_ORDER.open{display:flex;}

/* ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ ç”»é¢ */
.ord-header{
  width:100%;padding:14px 20px;
  background:var(--bg2);border-bottom:1px solid var(--bord2);
  display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:0;z-index:10;
}
.ord-logo{
  font-size:13px;font-weight:900;letter-spacing:2px;color:var(--acc);
  display:flex;align-items:center;gap:6px;
}
.ord-logo-dot{
  width:6px;height:6px;border-radius:50%;background:var(--acc);
  animation:pulse2 2s ease-in-out infinite;
}
.ord-close-btn{
  font-size:13px;padding:4px 10px;border-radius:4px;
  background:var(--bg3);border:1px solid var(--bord2);color:var(--t3);
  cursor:pointer;transition:all .15s;
}
.ord-close-btn:hover{background:var(--bord2);color:var(--t1);}

.ord-body{width:100%;max-width:480px;padding:20px 20px 0;}

.ord-title{
  font-size:18px;font-weight:900;color:var(--t1);
  letter-spacing:-0.5px;margin-bottom:4px;
}
.ord-sub{font-size:13px;color:var(--t3);margin-bottom:20px;line-height:1.7;}

.ord-form-grid{display:flex;flex-direction:column;gap:12px;}
.ord-group{display:flex;flex-direction:column;gap:5px;}
.ord-label{
  font-size:13px;font-weight:700;letter-spacing:1.5px;
  color:var(--t3);text-transform:uppercase;
  display:flex;align-items:center;gap:4px;
}
.ord-label .req{color:var(--red);}
.ord-input,.ord-select,.ord-textarea{
  background:var(--bg2);border:1px solid var(--bord2);
  border-radius:4px;color:var(--t1);
  font-family:'Noto Sans JP',sans-serif;font-size:13px;
  padding:9px 11px;outline:none;transition:all .15s;width:100%;
  -webkit-appearance:none;
}
.ord-input::placeholder,.ord-textarea::placeholder{color:var(--t4);}
.ord-input:focus,.ord-select:focus,.ord-textarea:focus{
  border-color:var(--acc);
  box-shadow:0 0 0 2px rgba(99,102,241,0.18);
}
.ord-textarea{resize:vertical;min-height:90px;line-height:1.7;}
.ord-select option{background:var(--bg2);color:var(--t1);}

/* æ¡ˆä»¶ã‚¿ã‚¤ãƒ—é¸æŠã‚°ãƒªãƒƒãƒ‰ */
.ord-type-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:5px;
}
.ord-type-btn{
  background:var(--bg2);border:1px solid var(--bord2);
  border-radius:4px;padding:7px 5px;cursor:pointer;
  transition:all .15s;display:flex;flex-direction:column;
  align-items:center;gap:3px;
}
.ord-type-btn:hover{background:var(--bg3);border-color:var(--bord1);}
.ord-type-btn.sel{
  background:rgba(99,102,241,0.12);
  border-color:var(--acc);
  box-shadow:0 0 0 1px var(--acc) inset;
}
.ord-type-ic{font-size:18px;}
.ord-type-nm{font-size:13px;font-weight:700;color:var(--t2);text-align:center;line-height:1.3;}
.ord-type-pr{font-size:13px;color:var(--t4);}

/* äºˆç®—ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ */
.ord-budget-val{
  font-size:18px;font-weight:900;color:var(--gold);
  letter-spacing:-0.5px;margin-bottom:5px;
}
.ord-range{
  -webkit-appearance:none;width:100%;height:3px;
  background:linear-gradient(to right,var(--acc) 0%,var(--acc) var(--pct,25%),var(--bord2) var(--pct,25%),var(--bord2) 100%);
  border-radius:2px;border:none;padding:0;outline:none;cursor:pointer;
  background-color:transparent;
}
.ord-range::-webkit-slider-thumb{
  -webkit-appearance:none;width:16px;height:16px;border-radius:50%;
  background:var(--t1);border:2px solid var(--acc);transition:transform .1s;
}
.ord-range::-webkit-slider-thumb:hover{transform:scale(1.2);}

.ord-submit-btn{
  width:100%;padding:13px;border-radius:6px;
  background:var(--acc);color:#fff;
  font-family:'Noto Sans JP',sans-serif;font-size:14px;font-weight:700;
  border:none;cursor:pointer;transition:all .15s;letter-spacing:.5px;
  margin-top:6px;
}
.ord-submit-btn:hover{background:#5558f0;transform:translateY(-1px);}
.ord-submit-btn:active{transform:none;}
.ord-submit-btn:disabled{opacity:.4;cursor:not-allowed;transform:none;}

/* å—æ³¨ã‚³ãƒ¼ãƒ‰ç™ºè¡Œç”»é¢ */
.ord-code-screen{
  display:flex;flex-direction:column;align-items:center;
  padding:30px 20px;text-align:center;gap:14px;
}
.ord-code-title{font-size:16px;font-weight:900;color:var(--t1);}
.ord-code-sub{font-size:13px;color:var(--t3);line-height:1.8;}
.ord-code-box{
  background:var(--bg3);border:1px solid var(--acc);
  border-radius:6px;padding:12px 16px;
  font-size:13px;color:var(--acc);font-family:monospace;
  word-break:break-all;line-height:1.6;cursor:pointer;
  transition:all .15s;max-width:400px;width:100%;text-align:left;
}
.ord-code-box:hover{background:rgba(99,102,241,0.08);}
.ord-code-hint{font-size:13px;color:var(--t4);}

/* ã‚²ãƒ¼ãƒ å†…å—æ³¨ã‚³ãƒ¼ãƒ‰å…¥åŠ›ï¼ˆDASHãƒ‘ãƒãƒ«ï¼‰ */
.order-link-btn{
  display:flex;align-items:center;gap:6px;
  padding:7px 11px;border-radius:4px;
  background:rgba(99,102,241,0.08);border:1px solid rgba(99,102,241,0.25);
  color:var(--acc);font-size:13px;font-weight:700;cursor:pointer;
  transition:all .15s;width:100%;margin-top:8px;letter-spacing:.3px;
}
.order-link-btn:hover{background:rgba(99,102,241,0.15);}
.order-code-input-row{
  display:flex;gap:6px;margin-top:6px;width:100%;
}
.order-code-input-row input{
  flex:1;background:var(--bg2);border:1px solid var(--bord2);
  border-radius:4px;color:var(--t1);font-family:monospace;font-size:13px;
  padding:7px 10px;outline:none;transition:border .15s;
}
.order-code-input-row input:focus{border-color:var(--acc);}
.order-code-input-row button{
  padding:7px 12px;border-radius:4px;background:var(--acc);
  color:#fff;font-size:13px;font-weight:700;cursor:pointer;
  transition:all .15s;flex-shrink:0;
}
.order-code-input-row button:hover{background:#5558f0;}

/* å—æ³¨ã‚³ãƒ¼ãƒ‰å—ã‘å–ã‚Šç”»é¢ï¼ˆSCR_TITLEå†…ï¼‰ */
.ord-recv-btn{
  font-size:13px;color:var(--t4);background:none;border:none;
  cursor:pointer;margin-top:4px;transition:color .15s;letter-spacing:.5px;
}
.ord-recv-btn:hover{color:var(--acc);}

/* â”€â”€ ä½œå“é›† â”€â”€ */
.pf-btn{font-size:13px;padding:3px 8px;border-radius:12px;border:1px solid var(--bord2);background:var(--bg2);color:var(--t3);cursor:pointer;transition:all .15s}
.pf-btn.on{background:var(--acc);color:#fff;border-color:var(--acc)}
.pf-card{display:grid;grid-template-columns:90px 1fr;gap:0;border-bottom:1px solid var(--bord2);overflow:hidden;transition:background .15s}
.pf-card:hover{background:var(--bg2)}
.pf-thumb{height:90px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.pf-body{padding:10px 12px;display:flex;flex-direction:column;gap:4px}
.pf-nm{font-size:13px;font-weight:700;color:var(--t1);line-height:1.4}
.pf-meta{font-size:13px;color:var(--t3);display:flex;gap:8px;align-items:center}
.pf-stars{color:var(--gold);font-size:13px;letter-spacing:1px}
.pf-tag{font-size:13px;padding:2px 6px;border-radius:10px;background:var(--bg3);color:var(--t3);font-weight:600}
.pf-qual{display:flex;align-items:center;gap:4px;margin-top:2px}
.pf-qual-bar{flex:1;height:4px;background:var(--bg3);border-radius:2px}
.pf-qual-fill{height:100%;border-radius:2px;transition:width .5s}
.pf-comment{font-size:13px;color:var(--t2);font-style:italic;line-height:1.6;border-left:2px solid var(--bord2);padding-left:6px;margin-top:2px}
.pf-year{font-size:13px;color:var(--t4);text-align:right;padding:6px 8px 4px}
.pf-year-label{font-size:13px;color:var(--t3);font-weight:700;letter-spacing:2px;padding:10px 12px 6px;background:var(--bg2);border-bottom:1px solid var(--bord2)}

/* â”€â”€ AIãƒ¢ãƒ¼ãƒ‰ä¸­ã®æ“ä½œãƒ­ãƒƒã‚¯ â”€â”€ */
body.ai-mode .btn-acc,
body.ai-mode .btn-hire,
body.ai-mode .ach,
body.ai-mode .btn-up,
body.ai-mode .btn-fir,
body.ai-mode .tn.av{
  opacity:.25;pointer-events:none;
  position:relative;
}
body.ai-mode .pc:hover,
body.ai-mode .hc:hover{
  transform:none;box-shadow:var(--sh-s);
}

/* â”€â”€ TROWã®AIãƒ¢ãƒ¼ãƒ‰æ¼”å‡º â”€â”€ */
body.ai-mode .trow{
  background:linear-gradient(135deg,rgba(79,70,229,.06),rgba(255,255,255,1));
  border-color:#c7d2fe;border-left-color:#6366f1;
}
body.ai-mode .btn-turn{
  background:linear-gradient(135deg,#4f46e5,#7c3aed);
  animation:turnpulse 2s ease-in-out infinite;
}

/* â”€â”€ AIãƒãƒŠãƒ¼ï¼ˆtrowã®ä¸Šï¼‰ â”€â”€ */
#ai-banner{
  display:none;background:linear-gradient(135deg,#ede9fe,#faf5ff);
  border:1px solid #c4b5fd;border-radius:8px;
  padding:8px 14px;margin-bottom:10px;
  font-size:13px;color:#5b21b6;font-weight:500;line-height:1.6;
}
#ai-banner strong{font-weight:700;color:#4f46e5}
body.ai-mode #ai-banner{display:block;}

/* â”€â”€ ã‚ªãƒ•ã‚£ã‚¹ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆAIç¨¼åƒä¸­ã®è–„ç´«ã‚°ãƒªãƒƒãƒ‰ï¼‰ â”€â”€ */
#ai-overlay{
  position:absolute;inset:0;pointer-events:none;z-index:5;
  background:
    linear-gradient(rgba(99,102,241,.03) 1px,transparent 1px),
    linear-gradient(90deg,rgba(99,102,241,.03) 1px,transparent 1px);
  background-size:20px 20px;
  border-top:2px solid rgba(99,102,241,.25);
  display:none;
}
body.ai-mode #ai-overlay{display:block;}

/* â”€â”€ AIç¨¼åƒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ï¼ˆã‚ªãƒ•ã‚£ã‚¹ä¸Šéƒ¨ï¼‰ â”€â”€ */
#ai-status{
  position:absolute;top:8px;left:50%;transform:translateX(-50%);
  background:rgba(255,255,255,.92);
  border:1px solid #c7d2fe;
  color:#4f46e5;font-size:13px;
  padding:4px 16px;border-radius:20px;
  white-space:nowrap;font-weight:700;letter-spacing:.5px;
  z-index:11;pointer-events:none;display:none;
  backdrop-filter:blur(8px);
  box-shadow:0 2px 10px rgba(99,102,241,.2);
}
body.ai-mode #ai-status{display:block;}
#ai-status .st-dot{
  display:inline-block;width:5px;height:5px;border-radius:50%;
  background:#6366f1;margin-right:5px;vertical-align:middle;
  animation:blink .7s step-end infinite;
}

/* â”€â”€ AIå°‚ç”¨ã‚¿ãƒ–ãƒ‘ãƒãƒ« â”€â”€ */
#pan-ai{font-size:13px;}
.ai-dash-header{
  background:linear-gradient(135deg,#ede9fe,#faf5ff);
  border:1px solid #c4b5fd;border-radius:12px;
  padding:16px 20px;margin-bottom:14px;
  display:flex;align-items:center;gap:16px;
}
.ai-avatar{font-size:38px;flex-shrink:0;filter:drop-shadow(0 2px 4px rgba(99,102,241,.3))}
.ai-dash-title{font-size:16px;font-weight:700;color:#3730a3;margin-bottom:2px}
.ai-dash-sub{font-size:13px;color:#6d28d9;line-height:1.6}
.ai-toggle-big{
  margin-left:auto;background:var(--acc);color:#fff;
  padding:10px 22px;font-size:13px;border-radius:10px;font-weight:700;
  transition:all .2s;box-shadow:0 2px 10px rgba(79,70,229,.4);
  white-space:nowrap;
}
.ai-toggle-big:hover{background:#4338ca;box-shadow:0 4px 16px rgba(79,70,229,.5);transform:translateY(-1px)}
.ai-toggle-big.on{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 2px 10px rgba(220,38,38,.4)}

.ai-kpi-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:8px;margin-bottom:14px}
.ai-kpi{background:#fff;border:1px solid var(--bord);border-radius:8px;padding:10px 12px;box-shadow:var(--sh-s)}
.ai-kpi-l{font-size:13px;color:var(--t3);letter-spacing:1px;text-transform:uppercase;margin-bottom:2px;font-weight:600}
.ai-kpi-v{font-size:18px;font-weight:700;color:var(--acc)}
.ai-kpi-d{font-size:13px;color:var(--t3);margin-top:2px}

/* AIã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚° */
.ai-log-panel{
  background:#fff;border:1px solid var(--bord);border-radius:10px;
  padding:12px;max-height:200px;overflow-y:auto;
}
.ai-log-row{
  display:flex;gap:8px;align-items:flex-start;
  padding:5px 0;border-bottom:1px solid var(--bord);font-size:13px;
}
.ai-log-row:last-child{border-bottom:none}
.ai-log-turn{
  background:var(--acc-lt);color:var(--acc);
  font-size:13px;font-weight:700;padding:1px 5px;border-radius:4px;
  flex-shrink:0;white-space:nowrap;
}
.ai-log-action{color:var(--t1);flex:1;line-height:1.6}
.ai-log-type{
  font-size:13px;font-weight:700;padding:1px 6px;border-radius:10px;
  flex-shrink:0;white-space:nowrap;
}
.ai-log-type.order{background:#dcfce7;color:#15803d}
.ai-log-type.hire{background:#dbeafe;color:#1d4ed8}
.ai-log-type.tech{background:#fef9c3;color:#92400e}
.ai-log-type.risk{background:#fee2e2;color:#dc2626}
.ai-log-type.assign{background:#ede9fe;color:#5b21b6}
.ai-log-type.other{background:var(--bg3);color:var(--t3)}

/* AIãƒ¢ãƒ¼ãƒ‰ä¸­ã®ãƒŠãƒ“ã‚¿ãƒ–ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
body.ai-mode #nb-ai{background:var(--acc-lt);border-color:#c7d2fe;color:var(--acc);}
body.ai-mode #nb-ai span{color:var(--acc)}
</style>
</head>
<body>

<div id="SCR_LOAD">
  <div style="font-size:12px;color:var(--acc);letter-spacing:3px;font-weight:700;font-family:'Noto Sans JP',sans-serif">ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ç™ºå±•å›½</div>
  <div class="ld-bar"><div class="ld-f"></div></div>
  <div style="font-size:10px;color:var(--t3);letter-spacing:3px;animation:blink 1s step-end infinite">LOADING...</div>
</div>

<div id="SCR_TITLE" style="display:none">
  <canvas id="tcv" width="290" height="163"></canvas>
  <div class="t-logo">ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ç™ºå±•å›½<br><span>Design Company Simulator</span></div>
  <div style="font-size:9px;color:var(--t4);letter-spacing:2px">å…¨ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã«æ§ã’ã‚‹  Ver 2.0</div>
  <div style="display:flex;flex-direction:column;gap:8px;align-items:center">
    <button class="t-btn" onclick="G.newGame()">â–¶ NEW GAME</button>
    <button class="t-btn sec" onclick="G.load()">ã€€CONTINUEã€€</button>
    <button class="t-btn sec" onclick="G.howto()">ã€€HOW TO PLAYã€€</button>
  </div>
  <button class="ord-recv-btn" onclick="G.ord.openFromTitle()">ğŸ“¨ å—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’å—ã‘å–ã‚‹</button>
  <div class="t-blink">PRESS TO START</div>
</div>

<div id="GAME">
  <div id="hud">
    <div class="hud-co" id="hco">å€‹äººäº‹å‹™æ‰€</div>
    <div class="hstats">
      <div class="hs" title="è³‡é‡‘">ğŸ’° <span class="hs-lbl">è³‡é‡‘</span><span class="hs-v g" id="hmoney">Â¥38K</span></div>
      <div class="hs" title="è©•åˆ¤">â­ <span class="hs-lbl">è©•åˆ¤</span><span class="hs-v tl" id="hrep">12</span></div>
      <div class="hs" title="ç‚ä¸Š">ğŸ”¥ <span class="hs-lbl">ç‚ä¸Š</span><span class="hs-v r" id="hfire">0</span><span class="hs-lbl">%</span></div>
      <div class="hs" title="SNS">ğŸ“¢ <span class="hs-lbl">SNS</span><span class="hs-v p" id="hsns">84</span></div>
      <div class="hs" title="ç¤¾å“¡">ğŸ‘¥ <span class="hs-lbl">ç¤¾å“¡</span><span class="hs-v" id="hstaff">1</span><span class="hs-lbl">å</span></div>
      <div class="hs" title="ãƒ–ãƒ©ãƒƒã‚¯">ğŸ˜ˆ <span class="hs-lbl">BK</span><span class="hs-v" id="hblack">5</span><span class="hs-lbl">%</span></div>
      <div class="hs" id="hdau-wrap" style="display:none" title="DAU">ğŸ“± <span class="hs-lbl">DAU</span><span class="hs-v" style="color:#00d4aa" id="hdau">--</span></div>
      <div class="hs" id="harr-wrap" style="display:none" title="ARR">ğŸ’¹ <span class="hs-lbl">ARR</span><span class="hs-v" style="color:#6366f1" id="harr">--</span></div>
    </div>
    <div class="hdate" id="hdate">ğŸ“… <span id="hdate-main">2025å¹´4æœˆ</span> <span class="hdate-day" id="hdate-day">ç¬¬1é€±</span></div>
    <div class="hph" id="hph">PHASE 0</div>
    <button id="btn-ai" onclick="G.toggleAI()"><span class="ai-dot" style="display:none"></span>ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰</button>
  </div>
  <div id="main">
    <div id="nav">
      <button class="nb on" id="nb-dash"   onclick="G.tab('dash')">ğŸ <span>HOME</span></button>
      <button class="nb"    id="nb-proj"   onclick="G.tab('proj')">ğŸ“‹<span>æ¡ˆä»¶</span><span class="nbadge" id="bdg-proj">0</span></button>
      <button class="nb"    id="nb-active" onclick="G.tab('active')">âš™ï¸<span>åˆ¶ä½œ</span></button>
      <div class="nsep"></div>
      <button class="nb"    id="nb-staff"  onclick="G.tab('staff')">ğŸ‘¥<span>ç¤¾å“¡</span></button>
      <button class="nb"    id="nb-hire"   onclick="G.tab('hire')">ğŸ“Œ<span>æ¡ç”¨</span></button>
      <div class="nsep"></div>
      <button class="nb"    id="nb-tech"   onclick="G.tab('tech')">ğŸ”¬<span>æŠ€è¡“</span></button>
      <button class="nb"    id="nb-prog"   onclick="G.tab('prog')">ğŸ“ˆ<span>æˆé•·</span></button>
      <div class="nsep"></div>
      <button class="nb" id="nb-ai" onclick="G.tab('ai')">ğŸ¤–<span>AI</span></button>
      <button class="nb" id="nb-murmur" onclick="G.tab('murmur')">ğŸ’¬<span>å‘Ÿã</span><span class="nbadge" id="bdg-murmur" style="display:none">new</span></button>
      <button class="nb" id="nb-portfolio" onclick="G.tab('portfolio')">ğŸ–¼ï¸<span>ä½œå“é›†</span><span class="nbadge" id="bdg-portfolio" style="display:none">0</span></button>
      <div class="nsep" style="margin-top:auto"></div>
      <button class="nb" id="nb-order" onclick="G.ord.open()" title="ã‚ªãƒ¼ãƒ€ãƒ¼å—ä»˜" style="color:var(--acc);position:relative">ğŸ“¨<span>ORDER</span><span style="position:absolute;top:4px;right:4px;width:5px;height:5px;border-radius:50%;background:var(--acc);animation:pulse2 2s ease-in-out infinite"></span></button>
      <button class="nb" onclick="G.save()" title="ã‚»ãƒ¼ãƒ–" style="font-size:15px">ğŸ’¾<span>ä¿å­˜</span></button>
    </div>
    <div id="content">
      <div id="owrap">
  <canvas id="ocv"></canvas>
  <div class="olb" id="olb">COWORKING SPACE</div>
  <div id="oc-zoom-ctrl">
    <button class="oc-zoom-btn" onclick="G.zoomOC(-1)" title="ç¸®å°">ï¼</button>
    <span id="oc-zoom-val">100%</span>
    <button class="oc-zoom-btn" onclick="G.zoomOC(1)" title="æ‹¡å¤§">ï¼‹</button>
  </div>
  <div class="otm" id="otm"></div>
  <div id="ai-overlay"></div>
  <div id="ai-status"><span class="st-dot"></span><span id="ai-status-txt">AI AGENT ç¨¼åƒä¸­</span></div>
  <div id="turn-progress">
    <div id="tp-bar"></div>
    <div id="tp-txt">é€±ã‚’é€²ã‚ã¦ãã ã•ã„</div>
  </div>

  <div id="owrap-handle" title="ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦é«˜ã•èª¿æ•´"></div>
</div>
      <div id="panels">
        <div class="panel on" id="pan-dash">
          <div class="wbar" id="wb-fire">âš  ç‚ä¸Šãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒå±é™ºåŸŸã§ã™ï¼</div>
          <div class="ibar" id="wb-money">ğŸ’° è³‡é‡‘ãŒå°‘ãªããªã£ã¦ã„ã¾ã™ï¼</div>
          <div id="ai-banner">
            <strong>ğŸ¤– AIçµŒå–¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¨¼åƒä¸­</strong> â”€ å—æ³¨ãƒ»æ¡ç”¨ãƒ»ã‚¢ã‚µã‚¤ãƒ³ã‚’å…¨ã¦è‡ªå‹•ã§å‡¦ç†ã—ã¾ã™ã€‚<br>
            ã‚ãªãŸãŒã™ã¹ãã“ã¨ã¯ <strong>é€±ã‚’é€²ã‚ã‚‹ã“ã¨</strong> ã ã‘ã§ã™ã€‚
          </div>
          <div class="trow">
            <div class="tinfo" id="tinfo"></div>
            <button class="btn-turn" id="btn-turn" onclick="G.nextTurn()">â–¶ æ¬¡ã®é€±ã¸</button>
          </div>
          <div class="sh">ä¼šç¤¾ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
          <div class="dgrid" id="dgrid"></div>
          <div class="sh">é€²è¡Œä¸­ã®æ¡ˆä»¶ <span class="ct" id="dash-cnt"></span></div>
          <div id="dash-ap"></div>
          <!-- å—æ³¨ã‚³ãƒ¼ãƒ‰UI -->
          <div id="order-recv-panel" style="margin:8px 0 4px">
            <button class="order-link-btn" onclick="G.ord.toggleRecv()">
              ğŸ”— <span>ã‚ªãƒ¼ãƒ€ãƒ¼ã‚’å—ã‘ä»˜ã‘ã‚‹ / å—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›</span>
            </button>
            <div id="order-recv-form" style="display:none;margin-top:6px">
              <div style="font-size:10px;color:var(--t3);margin-bottom:4px">å—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š</div>
              <div class="order-code-input-row">
                <input type="text" id="order-code-input" placeholder="DCFK-XXXXXXXX-..." autocomplete="off">
                <button onclick="G.ord.receiveCode()">å—ã‘å–ã‚‹</button>
              </div>
              <div style="margin-top:6px;font-size:10px;color:var(--t4)">
                ã¾ãŸã¯
                <button onclick="G.ord.openOrderPage()" style="background:none;border:none;color:var(--acc);font-size:10px;cursor:pointer;padding:0;font-family:inherit;font-weight:700;">
                  ğŸŒ ã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã‚’é–‹ãï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å…±æœ‰ï¼‰
                </button>
              </div>
            </div>
          </div>
          <div class="sh" style="margin-top:9px">ã‚²ãƒ¼ãƒ ãƒ­ã‚°</div>
          <div class="log" id="glog"></div>
        </div>
        <div class="panel" id="pan-proj">
          <div class="sh">å—æ³¨å¯èƒ½ãªæ¡ˆä»¶ <span class="ct" id="proj-hint"></span></div>
          <div class="pcgrid" id="proj-list"></div>
        </div>
        <div class="panel" id="pan-active">
          <div class="sh">åˆ¶ä½œä¸­ã®æ¡ˆä»¶</div>
          <div id="active-list"></div>
        </div>
        <div class="panel" id="pan-staff">
          <div class="sh">ç¤¾å“¡ä¸€è¦§ <span class="ct" id="staff-cnt"></span></div>
          <div id="staff-list"></div>
        </div>
        <div class="panel" id="pan-hire">
          <div class="sh">æ±‚äººå€™è£œ</div>
          <div class="hcgrid" id="hire-list"></div>
        </div>
        <div class="panel" id="pan-tech">
          <div class="sh">æŠ€è¡“ãƒ„ãƒªãƒ¼</div>
          <p style="font-size:9px;color:var(--t3);margin-bottom:10px">æŠ€è¡“ç¿’å¾—ã§å—æ³¨ç¯„å›²ãƒ»å“è³ªãƒ»å˜ä¾¡ãŒå‘ä¸Šã€‚ã‚¯ãƒªãƒƒã‚¯ã§ç¿’å¾—ã€‚</p>
          <div id="tech-tree"></div>
        </div>
        <div class="panel" id="pan-ai">
          <div class="ai-dash-header">
            <div class="ai-avatar">ğŸ¤–</div>
            <div>
              <div class="ai-dash-title" id="ai-dash-title">AIçµŒå–¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</div>
              <div class="ai-dash-sub" id="ai-dash-sub">
                å—æ³¨ãƒ»ã‚¢ã‚µã‚¤ãƒ³ãƒ»æ¡ç”¨ãƒ»æŠ€è¡“ç¿’å¾—ãƒ»ã‚ªãƒ•ã‚£ã‚¹ç§»è»¢ã‚’<br>
                å…¨è‡ªå‹•ã§æœ€é©åˆ¤æ–­ã—ã¾ã™ã€‚ã‚ãªãŸã¯åƒãã ã‘ã€‚
              </div>
            </div>
            <button class="ai-toggle-big" id="ai-toggle-big" onclick="G.toggleAI()">ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ ON</button>
          </div>
          <div class="sh">AIçµŒå–¶æŒ‡æ¨™</div>
          <div class="ai-kpi-grid" id="ai-kpi-grid"></div>
          <div class="sh" id="ai-live-sh" style="display:none">AI ãƒ©ã‚¤ãƒ–åˆ¤æ–­ <span style="font-size:8px;color:var(--ok);letter-spacing:1px">â— LIVE</span></div>
          <div id="ai-live-feed" style="display:none;flex-direction:column;overflow-y:auto;max-height:180px;border:1px solid var(--bord2);border-radius:6px;margin-bottom:10px"></div>
          <div class="sh">AIæ±ºå®šãƒ­ã‚° <span class="ct" id="ai-log-cnt"></span></div>
          <div class="ai-log-panel" id="ai-action-log">
            <div class="empty">AIãƒ¢ãƒ¼ãƒ‰ã‚’ONã«ã™ã‚‹ã¨ã“ã“ã«çµŒå–¶åˆ¤æ–­ãŒè¨˜éŒ²ã•ã‚Œã¾ã™</div>
          </div>
        </div>
        <div class="panel" id="pan-prog">
          <div class="sh">ãƒ•ã‚§ãƒ¼ã‚ºé€²è¡Œ</div>
          <div class="phases" id="phases"></div>
          <div class="sh">ã‚ªãƒ•ã‚£ã‚¹</div>
          <div class="ofgrid" id="of-cards"></div>
          <div class="sh">çµ±è¨ˆ</div>
          <div class="statbox" id="statbox"></div>
        </div>
        <div class="panel" id="pan-portfolio">
          <div class="sh">ä½œå“é›† <span class="ct" id="portfolio-cnt"></span></div>
          <!-- APIã‚­ãƒ¼è¨­å®š -->
          <div class="api-key-bar" id="api-key-bar">
            <span style="font-size:7px;color:var(--t3);flex-shrink:0">ğŸ¤– AIç”Ÿæˆ:</span>
            <input class="api-key-input" id="api-key-input" type="password"
              placeholder="Anthropic APIã‚­ãƒ¼ã‚’å…¥åŠ›ï¼ˆsk-ant-...ï¼‰" autocomplete="off">
            <button class="api-key-save-btn" onclick="G.aiDesign.saveKey()">ä¿å­˜</button>
            <span class="api-key-status" id="api-key-status">æœªè¨­å®š</span>
          </div>
          <div style="font-size:7.5px;color:var(--t3);padding:4px 12px 10px;line-height:1.8">å®Œäº†ã—ãŸæ¡ˆä»¶ã®æˆæœç‰©ã€‚APIã‚­ãƒ¼è¨­å®šã§ãƒªã‚¢ãƒ«SVGãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚</div>
          <div style="padding:0 4px 4px;display:flex;gap:4px;flex-wrap:wrap" id="portfolio-filters">
            <button onclick="G.portfolioFilter='all';G.renderPortfolio();" class="pf-btn on" id="pf-all">ã™ã¹ã¦</button>
            <button onclick="G.portfolioFilter='print';G.renderPortfolio();" class="pf-btn" id="pf-print">ğŸ–¨ å°åˆ·</button>
            <button onclick="G.portfolioFilter='app';G.renderPortfolio();" class="pf-btn" id="pf-app">ğŸ“± ã‚¢ãƒ—ãƒª</button>
            <button onclick="G.portfolioFilter='web';G.renderPortfolio();" class="pf-btn" id="pf-web">ğŸŒ Web</button>
            <button onclick="G.portfolioFilter='brand';G.renderPortfolio();" class="pf-btn" id="pf-brand">ğŸ’ ãƒ–ãƒ©ãƒ³ãƒ‰</button>
            <button onclick="G.portfolioFilter='saas';G.renderPortfolio();" class="pf-btn" id="pf-saas">ğŸš€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ</button>
            <button onclick="G.portfolioFilter='mj';G.renderPortfolio();" class="pf-btn" id="pf-mj">ğŸ¨ MJå¯¾å¿œ</button>
          </div>
          <div style="padding:0 4px 8px">
            <a href="order.html" target="_blank" style="font-size:9px;color:var(--acc);text-decoration:none;display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border:1px solid rgba(99,102,241,0.3);border-radius:100px">ğŸ”— å¤–éƒ¨ã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã‚’é–‹ã</a>
          </div>
          <div id="portfolio-list" style="display:flex;flex-direction:column;gap:1px;overflow-y:auto;max-height:calc(100vh - 200px)"></div>
        </div>
        <div class="panel" id="pan-murmur">
          <div class="sh">ç¤¾å“¡ã®å‘Ÿã <span class="ct" id="murmur-cnt"></span></div>
          <div style="font-size:7.5px;color:var(--t3);padding:4px 12px 8px;line-height:1.8">
            ç¤¾å“¡ãŸã¡ã®ãƒªã‚¢ãƒ«ãªæœ¬éŸ³ã€‚ã‚­ãƒ£ãƒ³ãƒã‚¹ãƒ“ãƒ¥ãƒ¼ã«æ™‚ã€…è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
          </div>
          <div id="murmur-log" style="display:flex;flex-direction:column;gap:1px;overflow-y:auto;max-height:calc(100vh - 180px)">
            <div class="empty">ã¾ã èª°ã‚‚å‘Ÿã„ã¦ã„ã¾ã›ã‚“</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="mbg" id="modal-ev"><div class="mbox" id="mbox-ev"><span class="mic" id="mev-ic"></span><div class="mtt" id="mev-tt"></div><div class="mds" id="mev-ds"></div><div class="mch-list" id="mev-ch"></div></div></div>
<div class="mbg" id="modal-mod"><div class="mbox danger"><div style="font-size:9px;color:var(--red);letter-spacing:2px;text-align:center;margin-bottom:5px">ä¿®æ­£ä¾é ¼ <span id="mod-cnt">ç¬¬1å›</span></div><div class="mic" id="mod-face">ğŸ˜¤</div><div class="mtt" style="color:var(--red);font-size:13px" id="mod-pn"></div><div class="mds" id="mod-tx"></div><div class="mch-list" id="mod-ch"></div></div></div>
<div class="mbg" id="modal-rev"><div class="mbox rev-box"><div class="mtt" style="color:var(--gold)">ğŸ“¬ ç´å“å®Œäº†ï¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè©•ä¾¡</div><div class="rev-st" id="rev-st"></div><div class="rev-cm" id="rev-cm"></div><div class="rev-ef" id="rev-ef"></div><button class="btn-ok" id="btn-ok-rev">ã€€OKã€€</button></div></div>
<div id="SCR_END"><div class="end-t" id="end-t"></div><div class="end-s" id="end-s"></div><div class="end-st" id="end-st"></div><button class="btn-re" onclick="G.restart()">â–¶ ã‚‚ã†ä¸€å‘¨ã‚„ã‚‹</button></div>

<!-- â•â•â• SVGãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ â•â•â• -->
<div id="modal-svg-view" onclick="if(event.target===this)G.aiDesign.closeViewer()">
  <div class="svg-view-box">
    <div class="svg-view-header">
      <span class="svg-view-title" id="svg-view-title">ä½œå“ã‚’è¡¨ç¤º</span>
      <button class="svg-view-close" onclick="G.aiDesign.closeViewer()">âœ• é–‰ã˜ã‚‹</button>
    </div>
    <div class="svg-view-content" id="svg-view-content">
      <!-- SVGãŒã“ã“ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
    </div>
    <div class="svg-view-footer">
      <span id="svg-view-meta"></span>
      <button class="svg-dl-btn" onclick="G.aiDesign.downloadSVG()">â¬‡ SVGã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
    </div>
  </div>
</div>

<!-- â•â•â• ã‚ªãƒ¼ãƒ€ãƒ¼å—ä»˜ç”»é¢ â•â•â• -->
<div id="SCR_ORDER">
  <div class="ord-header">
    <div class="ord-logo">
      <div class="ord-logo-dot"></div>
      <span id="ord-company-name">ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾</span> â”€ ORDER
    </div>
    <button class="ord-close-btn" onclick="G.closeOrder()">âœ• é–‰ã˜ã‚‹</button>
  </div>

  <!-- ãƒ•ã‚©ãƒ¼ãƒ ç”»é¢ -->
  <div class="ord-body" id="ord-form-area">
    <div style="margin-bottom:16px">
      <div class="ord-title" id="ord-form-title">ğŸ“‹ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ã‚ªãƒ¼ãƒ€ãƒ¼ã™ã‚‹</div>
      <div class="ord-sub" id="ord-form-sub">ã“ã®ãƒ•ã‚©ãƒ¼ãƒ ã«è¨˜å…¥ã—ã¦é€ä¿¡ã™ã‚‹ã¨ã€ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ã«æ¡ˆä»¶ã¨ã—ã¦å±Šãã¾ã™ã€‚</div>
    </div>
    <div class="ord-form-grid">

      <div class="ord-group">
        <div class="ord-label">ãŠåå‰ <span class="req">*</span></div>
        <input class="ord-input" id="ord-name" type="text" placeholder="å±±ç”° å¤ªéƒ" autocomplete="off">
      </div>

      <div class="ord-group">
        <div class="ord-label">ä¼šç¤¾å / å±‹å·</div>
        <input class="ord-input" id="ord-company" type="text" placeholder="æ ªå¼ä¼šç¤¾ã€‡ã€‡ï¼ˆä»»æ„ï¼‰">
      </div>

      <div class="ord-group">
        <div class="ord-label">ä¾é ¼å†…å®¹ <span class="req">*</span></div>
        <div class="ord-type-grid" id="ord-type-grid"></div>
      </div>

      <div class="ord-group">
        <div class="ord-label">äºˆç®—ï¼ˆç›®å®‰ï¼‰</div>
        <div class="ord-budget-val" id="ord-budget-val">Â¥300,000</div>
        <input class="ord-range" id="ord-budget" type="range" min="0" max="20" value="5" step="1"
          oninput="G.ord.updateBudget(this.value)">
        <div style="display:flex;justify-content:space-between;margin-top:3px">
          <span style="font-size:9px;color:var(--t4)">Â¥30Kã€œ</span>
          <span style="font-size:9px;color:var(--t4)">ã€œÂ¥500M+</span>
        </div>
      </div>

      <div class="ord-group">
        <div class="ord-label">å¸Œæœ›ç´æœŸ</div>
        <select class="ord-select" id="ord-deadline">
          <option value="7">æ€¥ãï¼ˆ1é€±é–“ä»¥å†…ï¼‰</option>
          <option value="14" selected>2ã€œ3é€±é–“</option>
          <option value="28">1ãƒ¶æœˆç¨‹åº¦</option>
          <option value="21">ç›¸è«‡ã—ã¦æ±ºã‚ãŸã„</option>
        </select>
      </div>

      <div class="ord-group">
        <div class="ord-label">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´° <span class="req">*</span></div>
        <textarea class="ord-textarea" id="ord-desc"
          placeholder="ã©ã‚“ãªãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ&#10;ç”¨é€”ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»å‚è€ƒã‚¤ãƒ¡ãƒ¼ã‚¸ãªã©ã€ã§ãã‚‹ã ã‘å…·ä½“çš„ã«æ•™ãˆã¦ãã ã•ã„ã€‚"></textarea>
      </div>

      <button class="ord-submit-btn" id="ord-submit" onclick="G.ord.submit()">
        ğŸ“¤ ã‚ªãƒ¼ãƒ€ãƒ¼ã‚’é€ä¿¡ã™ã‚‹
      </button>

    </div>
  </div>

  <!-- å—æ³¨ã‚³ãƒ¼ãƒ‰ç™ºè¡Œç”»é¢ -->
  <div class="ord-body ord-code-screen" id="ord-code-area" style="display:none">
    <div style="font-size:34px">ğŸ“¨</div>
    <div class="ord-code-title">ã‚ªãƒ¼ãƒ€ãƒ¼ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸï¼</div>
    <div class="ord-code-sub">
      ä»¥ä¸‹ã®ã€Œå—æ³¨ã‚³ãƒ¼ãƒ‰ã€ã‚’ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«é€ã£ã¦ãã ã•ã„ã€‚<br>
      ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã‚²ãƒ¼ãƒ å†…ã§å…¥åŠ›ã™ã‚‹ã¨ã€ã‚ãªãŸã®æ¡ˆä»¶ãŒå±Šãã¾ã™ã€‚
    </div>
    <div class="ord-code-box" id="ord-code-output" onclick="G.ord.copyCode()" title="ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼">
      ï¼ˆã‚³ãƒ¼ãƒ‰ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰
    </div>
    <div class="ord-code-hint">ğŸ‘† ã‚¿ãƒƒãƒ—ã§ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</div>
    <div style="font-size:11px;color:var(--t4);line-height:1.9;margin-top:8px;max-width:300px;text-align:center">
      ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯<br>
      HOMEã‚¿ãƒ– â†’ã€Œå—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã€ã‹ã‚‰å…¥åŠ›ã—ã¾ã™
    </div>
  </div>
</div>
<div id="ai-log"></div>
<div id="notif-panel">
  <div id="notif-tab" onclick="document.getElementById('notif-panel').classList.toggle('open')">ğŸ“¢ é€šçŸ¥</div>
  <div id="notif-badge">0</div>
  <div id="notif-hdr">
    <span>ğŸ“¢ é€šçŸ¥ãƒ­ã‚°</span>
    <button onclick="document.getElementById('notif-list').innerHTML=''" style="background:none;border:none;font-size:9px;color:var(--t3);cursor:pointer">ã‚¯ãƒªã‚¢</button>
  </div>
  <div id="notif-list"></div>
</div>
<div id="notifs" style="display:none"></div>

<script>
'use strict';

// roundRect polyfill
if(!CanvasRenderingContext2D.prototype.roundRect){
  CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){
    r=Math.min(r||0,w/2,h/2);
    this.beginPath();this.moveTo(x+r,y);
    this.lineTo(x+w-r,y);this.quadraticCurveTo(x+w,y,x+w,y+r);
    this.lineTo(x+w,y+h-r);this.quadraticCurveTo(x+w,y+h,x+w-r,y+h);
    this.lineTo(x+r,y+h);this.quadraticCurveTo(x,y+h,x,y+h-r);
    this.lineTo(x,y+r);this.quadraticCurveTo(x,y,x+r,y);
    this.closePath();
  };
}

// â”€â”€â”€ AUDIO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var ac=null;
function initAC(){try{ac=new(window.AudioContext||window.webkitAudioContext)();}catch(e){}}
function beep(freq,type,dur,vol,delay){
  if(!ac)return;
  try{var o=ac.createOscillator(),g=ac.createGain();o.connect(g);g.connect(ac.destination);
    o.type=type||'sine';o.frequency.value=freq;var t=ac.currentTime+(delay||0);
    g.gain.setValueAtTime(vol||0.1,t);g.gain.exponentialRampToValueAtTime(0.001,t+dur);
    o.start(t);o.stop(t+dur);}catch(e){}}
var SFX={
  coin:function(){beep(880,'sine',.1,.1);beep(1320,'sine',.15,.08,.08);},
  good:function(){[440,550,660].forEach(function(f,i){beep(f,'square',.1,.05,i*.06);});},
  bad:function(){beep(200,'sawtooth',.3,.1);},
  ev:function(){beep(660,'sine',.05,.1);beep(440,'sine',.15,.08,.06);},
  lvup:function(){[440,550,660,880].forEach(function(f,i){beep(f,'sine',.2,.1,i*.08);});},
  click:function(){beep(600,'square',.04,.04);},
  alert:function(){beep(330,'sawtooth',.1,.08);beep(220,'sawtooth',.15,.08,.1);},
  fanfare:function(){[523,659,784,1047].forEach(function(f,i){beep(f,'sine',.4,.1,i*.1);});}
};

// â”€â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fY(n){var a=Math.abs(n),s=n<0?'-':'';if(a>=10000000)return s+(a/10000000).toFixed(1)+'åƒä¸‡å††';if(a>=1000000)return s+Math.round(a/10000)+'ä¸‡å††';if(a>=10000)return s+(a/10000).toFixed(1)+'ä¸‡å††';return s+a.toLocaleString()+'å††';}
function fM(n){return Math.abs(n)>=10000?Math.round(n/1000)+'K':n.toLocaleString();}
function ri(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function pick(a){return a[Math.floor(Math.random()*a.length)];}
function clamp(v,lo,hi){return Math.max(lo,Math.min(hi,v));}
function shuffle(a){var b=a.slice();for(var i=b.length-1;i>0;i--){var j=ri(0,i);var t=b[i];b[i]=b[j];b[j]=t;}return b;}
function esc(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
function q(id){return document.getElementById(id);}

// â”€â”€â”€ NOTIFY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var _notifCount=0;
function notify(msg,type,dur){
  var list=q('notif-list');
  var el=document.createElement('div');el.className='nf '+(type||'');
  var now=new Date();var ts=now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
  el.innerHTML='<span style="color:var(--t4);font-size:6.5px">'+ts+'</span> '+msg;
  list.insertBefore(el,list.firstChild);
  // ãƒ‘ãƒãƒ«è‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé‡è¦é€šçŸ¥ã®ã¿ï¼‰
  var panel=q('notif-panel');
  if(type==='danger'){panel.classList.add('open');setTimeout(function(){panel.classList.remove('open');},4000);}
  // ãƒãƒƒã‚¸
  _notifCount++;var bdg=q('notif-badge');if(bdg){bdg.textContent=_notifCount>9?'9+':_notifCount;bdg.style.display=_notifCount>0?'flex':'none';}
  // å¤ã„ã‚‚ã®ã‚’å‰Šé™¤ï¼ˆ30ä»¶è¶…ãˆãŸã‚‰ï¼‰
  while(list.children.length>30){list.removeChild(list.lastChild);}
  // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆï¼ˆãŸã ã—æ¶ˆãˆãšãƒªã‚¹ãƒˆã«æ®‹ã‚‹ï¼‰
  setTimeout(function(){el.style.opacity='0.6';},dur||4000);
}
// ãƒ‘ãƒãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰ãƒãƒƒã‚¸ã‚’ãƒªã‚»ãƒƒãƒˆ
document.addEventListener('DOMContentLoaded',function(){
  var p=q('notif-panel');if(p)p.addEventListener('click',function(){_notifCount=0;var b=q('notif-badge');if(b)b.style.display='none';});

  // â”€â”€ owrapãƒªã‚µã‚¤ã‚º â”€â”€
  var handle=q('owrap-handle');
  if(handle){
    var wrap=q('owrap');
    var dragging=false,startY=0,startH=0;

    // localStorageã‹ã‚‰é«˜ã•å¾©å…ƒ
    var savedH=parseInt(localStorage.getItem('dcfk_owrap_h')||'0');
    if(savedH>=120&&savedH<=600&&wrap)wrap.style.height=savedH+'px';

    var onStart=function(e){
      dragging=true;
      startY=e.touches?e.touches[0].clientY:e.clientY;
      startH=wrap?wrap.offsetHeight:240;
      document.body.style.userSelect='none';
      e.preventDefault();
    };
    var onMove=function(e){
      if(!dragging||!wrap)return;
      var y=e.touches?e.touches[0].clientY:e.clientY;
      var newH=Math.min(600,Math.max(120,startH+(y-startY)));
      wrap.style.height=newH+'px';
      // canvasã‚µã‚¤ã‚ºã‚‚åŒæœŸ
      G.resizeOC();
      e.preventDefault();
    };
    var onEnd=function(){
      if(!dragging)return;
      dragging=false;
      document.body.style.userSelect='';
      if(wrap)localStorage.setItem('dcfk_owrap_h',wrap.offsetHeight);
    };
    handle.addEventListener('mousedown',onStart);
    handle.addEventListener('touchstart',onStart,{passive:false});
    document.addEventListener('mousemove',onMove);
    document.addEventListener('touchmove',onMove,{passive:false});
    document.addEventListener('mouseup',onEnd);
    document.addEventListener('touchend',onEnd);
  }

  // ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã‚ºãƒ¼ãƒ 
  var owrapEl=q('owrap');
  if(owrapEl){
    owrapEl.addEventListener('wheel',function(e){
      e.preventDefault();
      G.zoomOC(e.deltaY<0?1:-1);
    },{passive:false});
  }

  // ?order ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§ç›´æ¥ã‚ªãƒ¼ãƒ€ãƒ¼ç”»é¢ã‚’é–‹ã
  // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®å…±æœ‰URL: index.html?order
  var urlParams=new URLSearchParams(window.location.search);
  if(urlParams.has('order')){
    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å®Œäº†å¾Œã«ã‚ªãƒ¼ãƒ€ãƒ¼ç”»é¢ã‚’é–‹ã
    var openOrd=function(){
      if(q('SCR_ORDER')){
        // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã‚’éè¡¨ç¤ºã«ã—ã¦
        var scr=q('SCR_TITLE');if(scr)scr.style.display='none';
        G.ord.open();
      }else{setTimeout(openOrd,200);}
    };
    setTimeout(openOrd,1200);
  }
});

// â”€â”€â”€ STATIC DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var PTYPES=[
  // â”€â”€ Phase 0: å€‹äººäº‹å‹™æ‰€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'logo',    lb:'ãƒ­ã‚´',           ic:'ğŸ”¤',css:'logo', base:80000,   days:3, ph:0,sk:['design'],
   deliv:{files:['ã‚·ãƒ³ãƒœãƒ«ãƒãƒ¼ã‚¯ AI/SVG','ãƒ­ã‚´æ¨ªçµ„ã¿ PDF','ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ','ä½¿ç”¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ PDF'],format:'AI/SVG/PDF',revs:2}},
  {id:'meishi',  lb:'ååˆº',           ic:'ğŸ’³',css:'logo', base:30000,   days:2, ph:0,sk:['design'],
   deliv:{files:['ååˆºãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆè¡¨ï¼‰','ååˆºãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆè£ï¼‰','å°åˆ·å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ PDF'],format:'PDF/AI',revs:1}},
  {id:'banner',  lb:'ãƒãƒŠãƒ¼',         ic:'ğŸ–¼ï¸',css:'lp',   base:50000,   days:2, ph:0,sk:['design'],
   deliv:{files:['ãƒãƒŠãƒ¼ PNGï¼ˆå„ã‚µã‚¤ã‚ºï¼‰','ã‚¢ãƒ‹ãƒ¡GIFç‰ˆ','Webpæœ€é©åŒ–ç‰ˆ'],format:'PNG/GIF/Webp',revs:2}},
  {id:'flyer',   lb:'ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼',     ic:'ğŸ“„',css:'logo', base:45000,   days:3, ph:0,sk:['design'],
   deliv:{files:['ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆè¡¨ï¼‰','ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆè£ï¼‰','å°åˆ·å…¥ç¨¿ PDFï¼ˆãƒˆãƒ³ãƒœä»˜ï¼‰'],format:'AI/PDF',revs:2}},
  {id:'icon',    lb:'ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆ', ic:'ğŸ¯',css:'logo', base:60000,   days:3, ph:0,sk:['design'],
   deliv:{files:['ã‚¢ã‚¤ã‚³ãƒ³ SVGä¸€å¼','PNGï¼ˆ16/32/64/128/512pxï¼‰','Figmaãƒ•ã‚¡ã‚¤ãƒ«'],format:'SVG/PNG/Figma',revs:2}},
  {id:'sns',     lb:'SNSãƒ‡ã‚¶ã‚¤ãƒ³',    ic:'ğŸ“²',css:'lp',   base:70000,   days:3, ph:0,sk:['design'],
   deliv:{files:['ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ','ã‚«ãƒãƒ¼ç”»åƒ å„SNSå¯¾å¿œ','æŠ•ç¨¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆÃ—5','ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆÃ—3'],format:'PNG/PSD',revs:2}},
  {id:'lp',      lb:'LP',            ic:'ğŸ–¥ï¸',css:'lp',   base:200000,  days:5, ph:0,sk:['design','ui'],
   deliv:{files:['ãƒ‡ã‚¶ã‚¤ãƒ³ã‚«ãƒ³ãƒ— Figma','HTML/CSS ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°','SPå¯¾å¿œãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–','OGPç”»åƒ'],format:'Figma/HTML',revs:3}},
  // â”€â”€ Phase 1: ãƒ‡ã‚¶ã‚¤ãƒ³äº‹å‹™æ‰€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'poster',  lb:'ãƒã‚¹ã‚¿ãƒ¼',       ic:'ğŸ­',css:'logo', base:120000,  days:4, ph:1,sk:['design'],
   deliv:{files:['B2ãƒã‚¹ã‚¿ãƒ¼ ãƒ‡ãƒ¼ã‚¿','A3ç‰ˆ ãƒ‡ãƒ¼ã‚¿','å°åˆ·å…¥ç¨¿ PDF','ãƒ‡ã‚¸ã‚¿ãƒ«é…ä¿¡ç”¨ JPG'],format:'AI/PDF/JPG',revs:2}},
  {id:'catalog', lb:'ã‚«ã‚¿ãƒ­ã‚°ãƒ»å†Šå­', ic:'ğŸ“–',css:'lp',   base:350000,  days:8, ph:1,sk:['design','comm'],
   deliv:{files:['å†Šå­ãƒ‡ã‚¶ã‚¤ãƒ³å…¨ãƒšãƒ¼ã‚¸','å°åˆ·å…¥ç¨¿ PDFï¼ˆé¢ä»˜ã‘ï¼‰','é›»å­æ›¸ç±ç”¨ PDF','è¡¨ç´™ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆÃ—3'],format:'InDesign/PDF',revs:3}},
  {id:'package', lb:'ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸',     ic:'ğŸ“¦',css:'brand',base:380000,  days:9, ph:1,sk:['design','comm'],
   deliv:{files:['ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å±•é–‹å›³ ãƒ‡ãƒ¼ã‚¿','3Dãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”»åƒ','ãƒ©ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿','å°åˆ·å…¥ç¨¿ PDF'],format:'AI/PDF/PNG',revs:3}},
  {id:'photo',   lb:'ãƒ•ã‚©ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³',ic:'ğŸ“¸',css:'lp',base:280000,days:5, ph:1,sk:['design','comm'],
   deliv:{files:['æ’®å½±ãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è³‡æ–™','ã‚»ãƒ¬ã‚¯ãƒˆå†™çœŸ 30æšï¼ˆãƒ¬ã‚¿ãƒƒãƒæ¸ˆï¼‰','ãƒãƒŠãƒ¼ç”¨åˆ‡ã‚ŠæŠœãç´ æ','SNSç”¨æ­£æ–¹å½¢ã‚¯ãƒ­ãƒƒãƒ—'],format:'JPG/PNG',revs:2}},
  {id:'app',     lb:'ã‚¢ãƒ—ãƒªUI',       ic:'ğŸ“±',css:'app',  base:800000,  days:10,ph:1,sk:['ui','logic'],
   deliv:{files:['å…¨ç”»é¢ãƒ‡ã‚¶ã‚¤ãƒ³ Figma','ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª','ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ä»˜ï¼‰','ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ CSV'],format:'Figma/Zeplin',revs:4}},
  {id:'motion',  lb:'ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³',     ic:'ğŸ¬',css:'ai',   base:300000,  days:7, ph:1,sk:['design','ui'],
   deliv:{files:['ãƒ­ã‚´ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ MP4','GIFç‰ˆ','After Effectsã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«','å„SNSå°ºãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³'],format:'MP4/GIF/AEP',revs:2}},
  // â”€â”€ Phase 2: ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'web',     lb:'Webã‚µãƒ¼ãƒ“ã‚¹',    ic:'ğŸŒ',css:'web',  base:1500000, days:14,ph:2,sk:['ui','logic','design'],
   deliv:{files:['UIãƒ‡ã‚¶ã‚¤ãƒ³å…¨ç”»é¢ Figma','ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ','ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆHTML/CSS/JSï¼‰','CMSçµ„ã¿è¾¼ã¿å¯¾å¿œ'],format:'Figma/HTML/CSS',revs:5}},
  {id:'brand',   lb:'ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°', ic:'ğŸ’',css:'brand',base:3000000, days:18,ph:2,sk:['design','comm'],
   deliv:{files:['ãƒ­ã‚´ã‚·ã‚¹ãƒ†ãƒ ä¸€å¼','ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆãƒ»ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£å®šç¾©','ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ PDFï¼ˆ80Pï¼‰','å…¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±•é–‹'],format:'PDF/AI/Figma',revs:5}},
  {id:'preso',   lb:'ãƒ—ãƒ¬ã‚¼ãƒ³è³‡æ–™',   ic:'ğŸ“Š',css:'web',  base:250000,  days:5, ph:2,sk:['design','comm'],
   deliv:{files:['PPTXãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ','Keynoteç‰ˆ','PDFå‡ºåŠ›ç‰ˆ','å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®è£œè¶³ã‚³ãƒ¡ãƒ³ãƒˆ'],format:'PPTX/KEY/PDF',revs:3}},
  {id:'signage', lb:'ã‚µã‚¤ãƒ³ãƒ»ç’°å¢ƒ',   ic:'ğŸ¢',css:'brand',base:600000,  days:10,ph:2,sk:['design','comm'],
   deliv:{files:['ã‚µã‚¤ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ä¸€è¦§ PDF','æ–½å·¥ä»•æ§˜æ›¸','3Dãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”»åƒ','è£½ä½œç”¨å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿'],format:'AI/PDF/PNG',revs:3}},
  {id:'ux_research',lb:'UXãƒªã‚µãƒ¼ãƒ',  ic:'ğŸ”¬',css:'app',  base:800000,  days:12,ph:2,sk:['logic','comm'],
   deliv:{files:['ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜éŒ²','ãƒšãƒ«ã‚½ãƒŠå®šç¾©æ›¸','ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒƒãƒ—','æ”¹å–„ææ¡ˆãƒ¬ãƒãƒ¼ãƒˆ'],format:'PDF/Figma/Miro',revs:3}},
  // â”€â”€ Phase 3: ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'design_system',lb:'ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ',ic:'ğŸ§©',css:'web',base:4000000,days:28,ph:3,sk:['ui','logic','design'],
   deliv:{files:['ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆ200+ï¼‰','ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³å®šç¾©','Storybookå®Ÿè£…','ä½¿ç”¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³']  ,format:'Figma/Storybook/npm',revs:6}},
  {id:'ai',      lb:'AIãƒ—ãƒ­ãƒ€ã‚¯ãƒˆUX', ic:'ğŸ¤–',css:'ai',   base:5000000, days:22,ph:3,sk:['logic','ui','design'],
   deliv:{files:['ä¼šè©±UIè¨­è¨ˆï¼ˆãƒãƒ£ãƒƒãƒˆãƒ»ãƒ•ã‚©ãƒ¼ãƒ ï¼‰','AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ«ãƒ¼ãƒ—è¨­è¨ˆ','ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°UI','ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ'],format:'Figma/Prototype',revs:5}},
  {id:'ar_xr',   lb:'AR/XRä½“é¨“',     ic:'ğŸ¥½',css:'ai',   base:6000000, days:25,ph:3,sk:['logic','ui'],
   deliv:{files:['ç©ºé–“UIãƒ‡ã‚¶ã‚¤ãƒ³ Figma','ARä½“é¨“ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ','ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼è¨­è¨ˆã‚¬ã‚¤ãƒ‰','ãƒ‡ãƒ¢å‹•ç”» MP4'],format:'Figma/MP4',revs:4}},
  {id:'ir',      lb:'IRãƒ»å¹´æ¬¡å ±å‘Šæ›¸', ic:'ğŸ“ˆ',css:'brand',base:2000000, days:15,ph:3,sk:['design','comm'],
   deliv:{files:['å¹´æ¬¡å ±å‘Šæ›¸ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆå°åˆ·ç‰ˆï¼‰','ãƒ‡ã‚¸ã‚¿ãƒ«ç‰ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–PDF','ã‚«ãƒãƒ¼ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆÃ—3','è‹±èªç‰ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ'],format:'InDesign/PDF',revs:4}},
  // â”€â”€ Phase 4: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'saas',    lb:'è‡ªç¤¾SaaSé–‹ç™º',   ic:'âš¡',css:'saas', base:20000000,days:35,ph:4,sk:['logic','ui','design'],prod:true,
   deliv:{files:['ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆUIå…¨ç”»é¢','APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆ','ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚µã‚¤ãƒˆ','ãƒ˜ãƒ«ãƒ—ã‚»ãƒ³ã‚¿ãƒ¼UX'],format:'Figma/HTML/React',revs:8}},
  {id:'growth',  lb:'ã‚°ãƒ­ãƒ¼ã‚¹æ–½ç­–',   ic:'ğŸ“ˆ',css:'saas', base:8000000, days:20,ph:4,sk:['logic','comm'],prod:true,
   deliv:{files:['A/Bãƒ†ã‚¹ãƒˆè¨­è¨ˆæ›¸','ãƒ•ã‚¡ãƒãƒ«åˆ†æãƒ¬ãƒãƒ¼ãƒˆ','æ”¹å–„æ–½ç­–ä¸€è¦§','å®Ÿè£…ä»•æ§˜æ›¸'],format:'PDF/Figma',revs:5}},
  {id:'cx',      lb:'CXè¨­è¨ˆ',        ic:'ğŸ¯',css:'web',  base:5000000, days:18,ph:4,sk:['logic','comm','ui'],
   deliv:{files:['CXãƒãƒƒãƒ—ï¼ˆå…¨ã‚¿ãƒƒãƒãƒã‚¤ãƒ³ãƒˆï¼‰','ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆUI','ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼','NPSæ”¹å–„ææ¡ˆ'],format:'Figma/PDF/Miro',revs:5}},
  // â”€â”€ Phase 5: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¼æ¥­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'platform',lb:'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ',ic:'ğŸŒ',css:'plat',base:80000000,days:60,ph:5,sk:['logic','ui','comm'],prod:true,
   deliv:{files:['ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UXå…¨ä½“','APIé–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆUI','ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ‡ã‚¶ã‚¤ãƒ³','ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰'],format:'Figma/React/Storybook',revs:10}},
  {id:'global_rebrand',lb:'ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒªãƒ–ãƒ©ãƒ³ãƒ‰',ic:'ğŸŒ',css:'brand',base:50000000,days:45,ph:5,sk:['design','comm'],
   deliv:{files:['ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ–ãƒ©ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ','å¤šè¨€èªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆ12è¨€èªï¼‰','åœ°åŸŸåˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰','ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒã‚­ãƒƒãƒˆ'],format:'PDF/AI/Figma/Notion',revs:8}},
  // â”€â”€ Phase 6: ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'ma',      lb:'M&Aãƒ»è²·å',     ic:'ğŸ¤',css:'plat', base:500000000,days:90,ph:5,sk:['logic','comm'],prod:true,
   deliv:{files:['ãƒ‡ãƒ¥ãƒ¼ãƒ‡ãƒªã‚¸ã‚§ãƒ³ã‚¹å ±å‘Šæ›¸','ãƒ–ãƒ©ãƒ³ãƒ‰çµ±åˆè¨ˆç”»','ç§»è¡Œãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—','PMIè¨­è¨ˆæ›¸'],format:'PDF/PPT',revs:6}},
  {id:'os_design',lb:'OS/ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UI',ic:'ğŸ’»',css:'plat',base:2000000000,days:180,ph:6,sk:['logic','ui','design'],prod:true,
   deliv:{files:['OS UIå…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ500+ï¼‰','HIGï¼ˆãƒ’ãƒ¥ãƒ¼ãƒãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼‰','ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£åŸºæº–','é–‹ç™ºè€…å‘ã‘UIKit'],format:'Figma/SwiftUI/Compose',revs:15}},
  // â”€â”€ NEW Phase 0: å°è¦æ¨¡è¿½åŠ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'tshirt',  lb:'Tã‚·ãƒ£ãƒ„ãƒ‡ã‚¶ã‚¤ãƒ³',   ic:'ğŸ‘•',css:'logo', base:25000,  days:2, ph:0,sk:['design'],
   deliv:{files:['ãƒ—ãƒªãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ AI','ç€ç”¨ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ— PNGÃ—3','ã‚«ãƒ©ãƒ¼ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³'],format:'AI/PNG',revs:2},
   mj:'flat lay tshirt design mockup, minimal streetwear graphic, white background, studio photography'},
  {id:'stamp',   lb:'ã‚¹ã‚¿ãƒ³ãƒ—ãƒ»ã‚·ãƒ¼ãƒ«',  ic:'ğŸ”–',css:'logo', base:35000,  days:2, ph:0,sk:['design'],
   deliv:{files:['ã‚¹ã‚¿ãƒ³ãƒ—ãƒ‡ãƒ¼ã‚¿ SVG/AI','å°åˆ·å…¥ç¨¿PDFï¼ˆå°ç´™è¾¼ã¿ï¼‰','å®Ÿç‰©ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”»åƒ'],format:'SVG/PDF',revs:2},
   mj:'cute sticker sheet design, flat illustration style, pastel colors, white background'},
  {id:'thumbnail',lb:'å‹•ç”»ã‚µãƒ ãƒã‚¤ãƒ«',   ic:'ğŸ¥',css:'lp',   base:15000,  days:1, ph:0,sk:['design'],
   deliv:{files:['ã‚µãƒ ãƒã‚¤ãƒ«1280Ã—720 PNGÃ—3æ¡ˆ','Photoshop PSDãƒ‡ãƒ¼ã‚¿','YouTubeæœ€é©åŒ–ãƒã‚§ãƒƒã‚¯æ¸ˆ'],format:'PNG/PSD',revs:2},
   mj:'youtube thumbnail design, bold typography, vibrant colors, high contrast, click-worthy'},
  {id:'menu',    lb:'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ä¾¡æ ¼è¡¨',  ic:'ğŸ½ï¸',css:'lp',   base:80000,  days:3, ph:0,sk:['design'],
   deliv:{files:['ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ï¼ˆA3ä¸¡é¢ï¼‰','ãƒ‡ã‚¸ã‚¿ãƒ«è¡¨ç¤ºç”¨PNG','è‹±èªç‰ˆï¼ˆè¨ªæ—¥å¯¾å¿œï¼‰','QRã‚³ãƒ¼ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”¨HTML'],format:'AI/PDF/HTML',revs:3},
   mj:'elegant restaurant menu design, typography, minimal japanese aesthetic, white paper texture'},
  {id:'nengajo', lb:'å¹´è³€çŠ¶ãƒ» DM',      ic:'ğŸŒ',css:'logo', base:50000,  days:3, ph:0,sk:['design'],
   deliv:{files:['ãƒã‚¬ã‚­ãƒ‡ãƒ¼ã‚¿ï¼ˆè¡¨ãƒ»è£ï¼‰','ãƒ‡ã‚¸ã‚¿ãƒ«é…ä¿¡ç”¨PNG','å°åˆ·å…¥ç¨¿PDFï¼ˆCMYKï¼‰'],format:'AI/PDF/PNG',revs:2},
   mj:'japanese new year card design, traditional modern fusion, elegant typography, red and gold'},
  // â”€â”€ NEW Phase 1: ä¸­è¦æ¨¡è¿½åŠ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'game_ui', lb:'ã‚²ãƒ¼ãƒ UI',         ic:'ğŸ®',css:'app',  base:1200000, days:14,ph:1,sk:['ui','design','logic'],
   deliv:{files:['HUDãƒ‡ã‚¶ã‚¤ãƒ³ Figma','ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ å…¨ç”»é¢','ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ä¸€å¼ï¼ˆ100å€‹ä»¥ä¸Šï¼‰','ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«UI','Unity/Unrealç”¨ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã‚·ãƒ¼ãƒˆ'],format:'Figma/PNG/SpritSheet',revs:4},
   mj:'game UI design, dark fantasy RPG interface, glowing elements, medieval style HUD, slot and inventory screens'},
  {id:'ebook',   lb:'é›»å­æ›¸ç±ãƒ»PDFè³‡æ–™',ic:'ğŸ“š',css:'lp',   base:180000,  days:6, ph:1,sk:['design','comm'],
   deliv:{files:['è¡¨ç´™ãƒ‡ã‚¶ã‚¤ãƒ³','æœ¬æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå…¨ãƒšãƒ¼ã‚¸ï¼‰','PDFæœ€é©åŒ–ï¼ˆãƒªãƒ•ãƒ­ãƒ¼å¯¾å¿œï¼‰','ã‚µãƒ ãƒã‚¤ãƒ«ãƒ»ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒ'],format:'InDesign/PDF/Figma',revs:3},
   mj:'ebook cover design, modern business book, clean typography, gradient background, professional'},
  {id:'map',     lb:'åœ°å›³ãƒ»ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯',ic:'ğŸ—ºï¸',css:'web',base:220000,days:7, ph:1,sk:['design','comm'],
   deliv:{files:['ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒ—ã‚¤ãƒ©ã‚¹ãƒˆ PNG/SVG','è¦³å…‰ãƒãƒƒãƒ— A2ã‚µã‚¤ã‚º','ãƒ‡ã‚¸ã‚¿ãƒ«åŸ‹ã‚è¾¼ã¿ç”¨SVG','ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œç‰ˆ'],format:'SVG/PNG/PDF',revs:3},
   mj:'illustrated treasure map design, vintage cartography style, hand-drawn aesthetic, warm sepia tones'},
  {id:'mascot',  lb:'ãƒã‚¹ã‚³ãƒƒãƒˆãƒ»ã‚­ãƒ£ãƒ©',ic:'ğŸ»',css:'logo', base:350000,  days:10,ph:1,sk:['design'],
   deliv:{files:['ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆæ­£é¢ãƒ»æ¨ªãƒ»å¾Œã‚ï¼‰','è¡¨æƒ…ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³Ã—8','ã‚°ãƒƒã‚ºå±•é–‹æ¡ˆï¼ˆTã‚·ãƒ£ãƒ„/ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ï¼‰','ä½¿ç”¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³'],format:'AI/PNG/Figma',revs:4},
   mj:'cute mascot character design, chibi style, friendly expression, flat vector illustration, white background, multiple poses'},
  {id:'infographic',lb:'ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯',ic:'ğŸ“Š',css:'web',base:280000,days:6, ph:1,sk:['design','comm'],
   deliv:{files:['ç¸¦å‹ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯PNGï¼ˆ4Kï¼‰','æ¨ªå‹ãƒãƒŠãƒ¼ç‰ˆ','SNSåˆ†å‰²ç‰ˆï¼ˆ9åˆ†å‰²ï¼‰','ã‚½ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ Figma'],format:'PNG/Figma',revs:3},
   mj:'data visualization infographic, modern design, colorful charts and graphs, clean typography, white background'},
  // â”€â”€ NEW Phase 2: ä¸­ã€œå¤§è¦æ¨¡è¿½åŠ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'fashion', lb:'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«',ic:'ğŸ‘—',css:'brand',base:600000,days:10,ph:2,sk:['design','comm'],
   deliv:{files:['ãƒ«ãƒƒã‚¯ãƒ–ãƒƒã‚¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆå…¨24Pï¼‰','ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«Ã—6ç‚¹','SNSå±•é–‹ä¸€å¼','å•†å“ã‚¿ã‚°ãƒ»ãƒ©ãƒ™ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³'],format:'InDesign/AI/PDF',revs:3},
   mj:'high fashion editorial photography direction, minimalist luxury brand campaign, clean white studio, bold typography overlay'},
  {id:'food',    lb:'é£²é£Ÿåº—ãƒ–ãƒ©ãƒ³ãƒ‰',    ic:'ğŸœ',css:'brand',base:450000,  days:8, ph:2,sk:['design','comm'],
   deliv:{files:['ãƒ­ã‚´ãƒ»ã‚·ãƒ³ãƒœãƒ«','ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ–ãƒƒã‚¯ï¼ˆå…¨ãƒšãƒ¼ã‚¸ï¼‰','é£Ÿå™¨ãƒ»ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ã¸ã®å±•é–‹','åº—é ­ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆ'],format:'AI/PDF/Figma',revs:3},
   mj:'japanese restaurant brand identity, warm minimalist aesthetic, hand-lettered logo, earth tones, authentic atmosphere'},
  {id:'realestate',lb:'ä¸å‹•ç”£ãƒ»å»ºç¯‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«',ic:'ğŸ—ï¸',css:'brand',base:550000,days:9, ph:2,sk:['design','comm'],
   deliv:{files:['ç‰©ä»¶ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆï¼ˆ12Pï¼‰','é–“å–ã‚Šå›³ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯åŒ–','ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ ä»€å™¨ãƒ‡ã‚¶ã‚¤ãƒ³','åºƒå‘ŠãƒãƒŠãƒ¼ä¸€å¼ï¼ˆ5ç¨®ï¼‰'],format:'InDesign/AI/PDF',revs:3},
   mj:'luxury real estate brochure design, architectural visualization, clean minimalist layout, premium paper texture'},
  {id:'event',   lb:'ã‚¤ãƒ™ãƒ³ãƒˆãƒ»å±•ç¤ºä¼š',  ic:'ğŸª',css:'lp',   base:380000,  days:7, ph:2,sk:['design','comm'],
   deliv:{files:['ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¼ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','å‘ŠçŸ¥ãƒãƒŠãƒ¼ä¸€å¼ï¼ˆ20ã‚µã‚¤ã‚ºï¼‰','ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†Šå­','ä¼šå ´ã‚µã‚¤ãƒ³è¨ˆç”»'],format:'AI/PDF/PNG',revs:3},
   mj:'festival event poster design, vibrant illustration, bold typography, concert venue atmosphere, dynamic composition'},
  {id:'nft',     lb:'NFTãƒ»Web3ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«',ic:'â›“ï¸',css:'ai',  base:800000,  days:10,ph:2,sk:['design','logic'],
   deliv:{files:['NFTã‚¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ PNGï¼ˆ10ç‚¹ï¼‰','ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒŠãƒ¼','ãƒŸãƒ³ãƒˆãƒšãƒ¼ã‚¸UIãƒ‡ã‚¶ã‚¤ãƒ³','ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»•æ§˜æ›¸'],format:'PNG/Figma/JSON',revs:3},
   mj:'NFT digital art collection, generative art aesthetic, vibrant cyberpunk colors, abstract geometric patterns, blockchain visual'},
  // â”€â”€ NEW Phase 3: å¤§è¦æ¨¡è¿½åŠ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'medical_app',lb:'åŒ»ç™‚ã‚¢ãƒ—ãƒª',     ic:'ğŸ¥',css:'app',  base:6000000, days:28,ph:3,sk:['ui','logic','design'],
   deliv:{files:['æ‚£è€…å‘ã‘ã‚¢ãƒ—ãƒªUIï¼ˆå…¨ç”»é¢ï¼‰','åŒ»å¸«å‘ã‘ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','WCAG 2.1 AAAæº–æ‹ ç¢ºèª','é›»å­ã‚«ãƒ«ãƒ†é€£æºIFä»•æ§˜'],format:'Figma/Zeplin',revs:6},
   mj:'medical app UI design, clean clinical interface, healthcare blue and white, accessible design, patient dashboard'},
  {id:'edtech',  lb:'EdTechãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ',  ic:'ğŸ“š',css:'app',  base:5000000, days:25,ph:3,sk:['ui','logic','comm'],
   deliv:{files:['å­¦ç¿’ç”»é¢ å…¨ãƒ•ãƒ­ãƒ¼ Figma','å‹•ç”»ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼UI','é€²æ—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','ä¿è­·è€…å‘ã‘ãƒ¬ãƒãƒ¼ãƒˆUI','å­ä¾›å‘ã‘ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³'],format:'Figma/Prototype',revs:5},
   mj:'educational app UI for children, gamified learning interface, bright colorful design, friendly characters, progress tracking'},
  {id:'fintech', lb:'Fintechã‚µãƒ¼ãƒ“ã‚¹UI',ic:'ğŸ’°',css:'app',  base:8000000, days:30,ph:3,sk:['ui','logic'],
   deliv:{files:['å£åº§ç®¡ç†ç”»é¢','æŠ•è³‡ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªUI','é€é‡‘ãƒ•ãƒ­ãƒ¼ï¼ˆå…¨ã‚¹ãƒ†ãƒƒãƒ—ï¼‰','æœ¬äººç¢ºèªï¼ˆKYCï¼‰ãƒ•ãƒ­ãƒ¼','ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šUI'],format:'Figma/Zeplin',revs:6},
   mj:'fintech mobile app UI, modern banking interface, dark theme, data visualization, trust and security visual design'},
  {id:'agri',    lb:'è¾²æ¥­ãƒ»åœ°æ–¹å‰µç”ŸDX',  ic:'ğŸŒ¾',css:'web',  base:3500000, days:20,ph:3,sk:['ui','comm','design'],
   deliv:{files:['è¾²å®¶å‘ã‘ã‚¢ãƒ—ãƒªUI','åç©«ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','åœ°åŸŸãƒ–ãƒ©ãƒ³ãƒ‰ã‚µã‚¤ãƒˆ','ç”£ç›´ECãƒ‡ã‚¶ã‚¤ãƒ³','å¤šè¨€èªå¯¾å¿œï¼ˆè‹±ä¸­ï¼‰'],format:'Figma/HTML',revs:4},
   mj:'agricultural tech UI, rural japan branding, natural earthy tones, farmland drone imagery, digital transformation'},
  {id:'sport',   lb:'ã‚¹ãƒãƒ¼ãƒ„ãƒ»ãƒãƒ¼ãƒ ãƒ–ãƒ©ãƒ³ãƒ‰',ic:'âš½',css:'brand',base:2500000,days:16,ph:3,sk:['design','comm'],
   deliv:{files:['ãƒãƒ¼ãƒ ãƒ­ã‚´ãƒ»ã‚¨ãƒ³ãƒ–ãƒ¬ãƒ ','ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆ','ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ã‚µã‚¤ãƒ³è¨ˆç”»','ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã‚­ãƒƒãƒˆ'],format:'AI/PDF/Figma',revs:4},
   mj:'professional sports team branding, bold athletic logo design, dynamic motion, jersey mockup, arena signage'},
  {id:'anime',   lb:'ã‚¢ãƒ‹ãƒ¡ãƒ»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«',ic:'ğŸŒ',css:'brand',base:4000000,days:22,ph:3,sk:['design','comm'],
   deliv:{files:['ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ»ã‚­ãƒ¼ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šé›†','å‘ŠçŸ¥ãƒã‚¹ã‚¿ãƒ¼Ã—3','ã‚°ãƒƒã‚ºå±•é–‹ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆ10å“ç›®ï¼‰','å…¬å¼ã‚µã‚¤ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³'],format:'PSD/AI/Figma',revs:5},
   mj:'anime key visual illustration, dramatic composition, vibrant japanese animation style, detailed character design'},
  // â”€â”€ NEW Phase 4-5: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ‹¡å¼µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:'govtech', lb:'è¡Œæ”¿DXã‚·ã‚¹ãƒ†ãƒ ',   ic:'ğŸ›ï¸',css:'web',  base:15000000,days:40,ph:4,sk:['ui','logic','comm'],prod:true,
   deliv:{files:['å¸‚æ°‘å‘ã‘ãƒãƒ¼ã‚¿ãƒ«UIï¼ˆå…¨ãƒ•ãƒ­ãƒ¼ï¼‰','è·å“¡ç”¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ','JIS X 8341æº–æ‹ å¯¾å¿œ','å¤šè¨€èªå¯¾å¿œï¼ˆ16è¨€èªï¼‰'],format:'Figma/HTML/React',revs:8},
   mj:'government digital service UI, accessible clean interface, formal blue tones, citizen portal, japanese e-government'},
  {id:'mobility',lb:'ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ»è»Šè¼‰HMI',ic:'ğŸš—',css:'ai',  base:25000000,days:50,ph:4,sk:['ui','logic'],prod:true,
   deliv:{files:['ã‚»ãƒ³ã‚¿ãƒ¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ« HMIè¨­è¨ˆ','ã‚¤ãƒ³ã‚¹ãƒ„ãƒ«ãƒ¡ãƒ³ãƒˆã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼','OTAæ›´æ–°UIãƒ•ãƒ­ãƒ¼','éŸ³å£°UI ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆ','å®‰å…¨åŸºæº–ï¼ˆISO 26262ï¼‰é©åˆç¢ºèª'],format:'Figma/ProtoPie',revs:8},
   mj:'automotive HMI interface design, car dashboard UI, dark cockpit interior, luxury vehicle infotainment system'},
  {id:'xrplatform',lb:'XRãƒ»ç©ºé–“ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°',ic:'ğŸ¥½',css:'ai',base:40000000,days:60,ph:5,sk:['ui','logic'],prod:true,
   deliv:{files:['Apple Vision Pro ç©ºé–“UIè¨­è¨ˆ','ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ä»•æ§˜','3D UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª','ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼ˆè¦–è¦šéšœå®³ï¼‰'],format:'Reality Composer/Figma',revs:10},
   mj:'spatial computing UI for Apple Vision Pro, immersive 3D interface, glass morphism, volumetric design, AR overlay'},
];
var CTYPES=[
  {id:'god',    lb:'ç¥ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ',         cls:'cgod',   ic:'ğŸ˜‡',mr:5, pm:1.3, rg:4,rl:-1,desc:'äºˆç®—æ½¤æ²¢ãƒ»ä¿®æ­£å°‘ãƒ»äººæ ¼è€…'},
  {id:'norm',   lb:'æ™®é€šã®ä¼šç¤¾',              cls:'cnorm',  ic:'ğŸ¢',mr:28,pm:1.0, rg:1,rl:1, desc:'å¯ã‚‚ãªãä¸å¯ã‚‚ãªã'},
  {id:'start',  lb:'æ„è­˜é«˜ã„ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—', cls:'cstart', ic:'ğŸš€',mr:52,pm:0.78,rg:2,rl:2, desc:'ä¸–ç•Œã‚’å¤‰ãˆãŸã„ãŒäºˆç®—ä½ã„'},
  {id:'agency', lb:'å¤§æ‰‹ä»£ç†åº—çµŒç”±',          cls:'cagency',ic:'ğŸ˜¤',mr:62,pm:0.85,rg:1,rl:3, desc:'ä¸­é–“ãƒãƒ¼ã‚¸ãƒ³å¤§ãƒ»æ‹…å½“ã‚³ãƒ­ã‚³ãƒ­'},
  {id:'pres',   lb:'åœ°æ–¹ã®ç¤¾é•·',              cls:'cpres',  ic:'ğŸ‘´',mr:72,pm:1.1, rg:1,rl:2, desc:'ã‚·ãƒ³ãƒ—ãƒ«ã«â†’è±ªè¯ã« ã‚’ç¹°ã‚Šè¿”ã™'},
  {id:'gov',    lb:'ãŠå½¹æ‰€',                  cls:'cgov',   ic:'ğŸ“„',mr:38,pm:1.4, rg:0,rl:0, desc:'ä»•æ§˜æ›¸250ãƒšãƒ¼ã‚¸ãƒ»MSæ˜æœæŒ‡å®š'},
  {id:'vnt',    lb:'ã‚·ãƒªãƒ¼ã‚ºAã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—',cls:'cvnt',   ic:'ğŸ’¼',mr:42,pm:1.15,rg:3,rl:1, desc:'è³‡é‡‘èª¿é”æ¸ˆã¿ãƒ»ã§ã‚‚æ€¥ã'},
  {id:'indie',  lb:'å€‹äººäº‹æ¥­ä¸»',              cls:'cind',   ic:'ğŸ™‹',mr:55,pm:0.5, rg:1,rl:1, desc:'äºˆç®—5ä¸‡ãƒ»è¦æ±‚100ä¸‡ç›¸å½“'},
  {id:'overseas',lb:'æµ·å¤–ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ',       cls:'cnorm',  ic:'ğŸŒ',mr:20,pm:1.4, rg:2,rl:0, desc:'è‹±èªã§ã‚„ã‚Šå–ã‚Šãƒ»é«˜å˜ä¾¡'},
  {id:'brand',  lb:'ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ›ãƒ«ãƒ€ãƒ¼',        cls:'cvnt',   ic:'ğŸ‘œ',mr:30,pm:1.5, rg:1,rl:0, desc:'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ–ãƒ©ãƒ³ãƒ‰å¿—å‘ãƒ»å“è³ªæœ€å„ªå…ˆ'},
  {id:'tech',   lb:'ãƒ†ãƒƒã‚¯ä¼æ¥­',              cls:'cvnt',   ic:'ğŸ’»',mr:35,pm:1.2, rg:2,rl:1, desc:'Figma/GitHubæ…£ã‚Œãƒ»ä»•æ§˜æ˜ç¢º'},
  {id:'media',  lb:'ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ»å‡ºç‰ˆ',          cls:'cnorm',  ic:'ğŸ“°',mr:45,pm:0.9, rg:2,rl:2, desc:'ç· åˆ‡çµ¶å¯¾ãƒ»ã‚¯ã‚ªãƒªãƒ†ã‚£é«˜ã„'},
  {id:'artist', lb:'ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãƒ»ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ',cls:'cind', ic:'ğŸ¨',mr:40,pm:0.7, rg:1,rl:1, desc:'ãƒ“ã‚¸ãƒ§ãƒ³ã¯å¼·ã„ãƒ»äºˆç®—ã¯å¼±ã„'},
  {id:'medical',lb:'åŒ»ç™‚æ©Ÿé–¢',                cls:'cgov',   ic:'ğŸ¥',mr:25,pm:1.3, rg:1,rl:0, desc:'å°‚é–€çŸ¥è­˜å¿…è¦ãƒ»ä¿¡é ¼æ€§é‡è¦–'},
];
var PNAMES={
  logo:['åœ°æ–¹è“å­ãƒ¡ãƒ¼ã‚«ãƒ¼ã®ãƒ­ã‚´','ã‚«ãƒ•ã‚§ã®ãƒ­ã‚´ãƒªãƒ‡ã‚¶ã‚¤ãƒ³','ãƒ†ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã‚·ãƒ³ãƒœãƒ«ãƒãƒ¼ã‚¯','åŒ»ç™‚ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®ãƒ­ã‚´ã‚¿ã‚¤ãƒ—','ä¸å‹•ç”£ä¼šç¤¾ãƒ¯ãƒ¼ãƒ‰ãƒãƒ¼ã‚¯','ãƒ¨ã‚¬ã‚¹ã‚¿ã‚¸ã‚ªã®ãƒãƒ¼ã‚¯','ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«é†¸é€ æ‰€ãƒ­ã‚´','ãƒ•ãƒ¼ãƒ‰ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¨ãƒ³ãƒ–ãƒ¬ãƒ ','å£«æ¥­äº‹å‹™æ‰€ãƒ­ã‚´','ã‚³ã‚¹ãƒ¡ãƒ–ãƒ©ãƒ³ãƒ‰ã‚·ãƒ³ãƒœãƒ«','ã‚¢ãƒ‘ãƒ¬ãƒ«ãƒ­ã‚´ãƒ‡ã‚¶ã‚¤ãƒ³','ãƒšãƒƒãƒˆç”¨å“ãƒ–ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯','å»ºç¯‰äº‹å‹™æ‰€ãƒ­ã‚´ã‚¿ã‚¤ãƒ—','ãƒ•ã‚£ãƒ³ãƒ†ãƒƒã‚¯ã‚·ãƒ³ãƒœãƒ«','æ•™è‚²ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ­ã‚´','è¾²ç”£ç‰©ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ­ã‚´'],
  meishi:['ç¨ç†å£«ã®ååˆº200æš','ãƒ•ãƒªãƒ¼ã‚³ãƒ³ã‚µãƒ«ã®ååˆº ä¸¡é¢','çµŒå–¶è€…ååˆºãƒªãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆç®”æŠ¼ã—ï¼‰','ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ååˆº ç‰¹æ®Šå°åˆ·','åŒ»å¸«ååˆº 100æš','å¼è­·å£«äº‹å‹™æ‰€ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒŠãƒªãƒ¼ä¸€å¼','ä¸å‹•ç”£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆååˆº','ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼ååˆº'],
  banner:['Google Display ãƒãƒŠãƒ¼ä¸€å¼ï¼ˆ10ã‚µã‚¤ã‚ºï¼‰','Instagramåºƒå‘ŠãƒãƒŠãƒ¼ã‚»ãƒƒãƒˆ','YouTubeå‹•ç”»ã‚µãƒ ãƒã‚¤ãƒ«Ã—10','ãƒ¡ãƒ«ãƒã‚¬ãƒ˜ãƒƒãƒ€ãƒ¼ï¼†ãƒ•ãƒƒã‚¿ãƒ¼','æ¥½å¤©å¸‚å ´ãƒãƒŠãƒ¼ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ','X(Twitter)ãƒ˜ãƒƒãƒ€ãƒ¼','ECã‚µã‚¤ãƒˆç‰¹é›†ãƒãƒŠãƒ¼','æ¡ç”¨åºƒå‘ŠãƒãƒŠãƒ¼ã‚»ãƒƒãƒˆ','ãƒªã‚¿ãƒ¼ã‚²ãƒ†ã‚£ãƒ³ã‚°åºƒå‘Šã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–'],
  flyer:['ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªãƒ‡ã‚¶ã‚¤ãƒ³','éŸ³æ¥½ãƒ©ã‚¤ãƒ–ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼A5','å­¦ç¿’å¡¾ãƒãƒ©ã‚·ï¼ˆæŠ˜è¾¼åºƒå‘Šï¼‰','ã‚¯ãƒªãƒ‹ãƒƒã‚¯é–‹é™¢æ¡ˆå†…ãƒãƒ©ã‚·','ä¸å‹•ç”£ç‰©ä»¶ãƒãƒ©ã‚·','ã‚¤ãƒ™ãƒ³ãƒˆå‘ŠçŸ¥ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼','ãƒãƒ«ã‚·ã‚§å‡ºåº—ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼','ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚»ãƒ¼ãƒ«POP'],
  icon:['ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆ64ç¨®','æ±ºæ¸ˆã‚µãƒ¼ãƒ“ã‚¹ UIã‚¢ã‚¤ã‚³ãƒ³ä¸€å¼','åŒ»ç™‚ã‚¢ãƒ—ãƒª ãƒ”ã‚¯ãƒˆã‚°ãƒ©ãƒ 32ç¨®','SaaSç®¡ç†ç”»é¢ æ©Ÿèƒ½ã‚¢ã‚¤ã‚³ãƒ³','Webã‚µãƒ¼ãƒ“ã‚¹ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ã‚¤ã‚³ãƒ³','ã‚²ãƒ¼ãƒ UI ã‚¢ã‚¤ãƒ†ãƒ ã‚¢ã‚¤ã‚³ãƒ³','åœ°å›³ã‚¢ãƒ—ãƒª POIã‚¢ã‚¤ã‚³ãƒ³'],
  sns:['ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆSNSé‹ç”¨ãƒ‡ã‚¶ã‚¤ãƒ³ä¸€å¼','ã‚«ãƒ•ã‚§Instagramãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆÃ—12','ã‚³ã‚¹ãƒ¡ãƒ–ãƒ©ãƒ³ãƒ‰SNSåˆ·æ–°','æ¡ç”¨åºƒå ±SNSãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚»ãƒƒãƒˆ','é£Ÿå“ãƒ–ãƒ©ãƒ³ãƒ‰SNSãƒ‡ã‚¶ã‚¤ãƒ³','ã‚¹ã‚¿ã‚¸ã‚ªå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«'],
  lp:['æ–°å•†å“ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ï¼ˆCVæœ€é©åŒ–ï¼‰','æ¡ç”¨ã‚µã‚¤ãƒˆLPï¼ˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼åˆ·æ–°ï¼‰','ã‚»ãƒŸãƒŠãƒ¼é›†å®¢LP A/Bãƒ†ã‚¹ãƒˆç”¨2æ¡ˆ','ECã‚¹ãƒˆã‚¢ ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ã‚¢ãƒ—ãƒªDLä¿ƒé€²LPï¼ˆã‚¹ãƒãƒ›ç‰¹åŒ–ï¼‰','SaaSç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«èª˜å°LP','ä¸å‹•ç”£ç‰©ä»¶ç´¹ä»‹LP','ãƒ›ãƒ†ãƒ«äºˆç´„LPï¼ˆã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰å¯¾å¿œï¼‰','ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ•ã‚¡ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆLP'],
  poster:['å…¨å›½ãƒ„ã‚¢ãƒ¼ãƒã‚¹ã‚¿ãƒ¼ B1','æ˜ ç”»ãƒ»èˆå°ãƒãƒ©ã‚· A4ï¼‹B2','ç¾è¡“å±•å›³éŒ²ãƒ‡ã‚¶ã‚¤ãƒ³','ãƒ•ã‚§ã‚¹ãƒ†ã‚£ãƒãƒ«ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£','ãƒ–ãƒ©ãƒ³ãƒ‰ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼','è¡Œæ”¿å•“ç™ºãƒã‚¹ã‚¿ãƒ¼','ã‚·ãƒ§ãƒ¼ãƒ«ãƒ¼ãƒ POPä¸€å¼','ãƒãƒ©ã‚½ãƒ³å¤§ä¼šã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ãƒã‚¹ã‚¿ãƒ¼'],
  catalog:['å®¶å…·ãƒ¡ãƒ¼ã‚«ãƒ¼ç·åˆã‚«ã‚¿ãƒ­ã‚° 96P','ã‚³ã‚¹ãƒ¡æ–°å•†å“ã‚«ã‚¿ãƒ­ã‚° 24P','ç”£æ¥­æ©Ÿæ¢°è£½å“ã‚«ã‚¿ãƒ­ã‚°','å¤§å­¦å‹Ÿé›†è¦é …ãƒ‘ãƒ³ãƒ•','ãƒ›ãƒ†ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ãƒ–ãƒƒã‚¯','ã‚¢ãƒ‘ãƒ¬ãƒ«ãƒ«ãƒƒã‚¯ãƒ–ãƒƒã‚¯ 48P','B2Bã‚µãƒ¼ãƒ“ã‚¹ä¼šç¤¾æ¡ˆå†… 16P','åŒ»ç™‚æ©Ÿå™¨ã‚«ã‚¿ãƒ­ã‚°ï¼ˆè‹±èªç‰ˆï¼‰'],
  package:['ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ãƒ©ãƒ™ãƒ«Ã—4ç¨®','ã‚³ã‚¹ãƒ¡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ·æ–°ï¼ˆå…¨ãƒ©ã‚¤ãƒ³ï¼‰','é£Ÿå“ã‚®ãƒ•ãƒˆãƒœãƒƒã‚¯ã‚¹ãƒ‡ã‚¶ã‚¤ãƒ³','æ—¥æœ¬é…’ãƒ©ãƒ™ãƒ«ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ã‚¹ã‚­ãƒ³ã‚±ã‚¢ãƒãƒ¥ãƒ¼ãƒ–ï¼†ãƒœãƒƒã‚¯ã‚¹','è“å­ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆã‚³ãƒ³ãƒ“ãƒ‹å‘ã‘ï¼‰','ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆãƒœãƒˆãƒ«ãƒ©ãƒ™ãƒ«','ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯é£Ÿå“ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸'],
  photo:['æ–°å•†å“ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³æ’®å½±ï¼ˆ25ã‚«ãƒƒãƒˆï¼‰','ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ’®å½±','æ–™ç†ãƒ»ãƒ•ãƒ¼ãƒ‰æ’®å½± 30å“','ECã‚¢ãƒ‘ãƒ¬ãƒ«å•†å“æ’®å½±200ç‚¹','ãƒ›ãƒ†ãƒ«ã‚¹ãƒšãƒ¼ã‚¹æ’®å½±','ã‚³ã‚¹ãƒ¡å•†å“ã‚¹ãƒãƒ¼ãƒ«æ’®å½±','ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ç”¨äººç‰©æ’®å½±'],
  app:['ãƒ•ãƒ¼ãƒ‰ãƒ‡ãƒªãƒãƒªãƒ¼ã‚¢ãƒ—ãƒªUIï¼ˆiOSï¼‰','åŒ»ç™‚äºˆç´„ã‚¢ãƒ—ãƒª å…¨ç”»é¢ãƒªãƒ‡ã‚¶ã‚¤ãƒ³','ãƒ•ã‚£ãƒ³ãƒ†ãƒƒã‚¯æŠ•è³‡ã‚¢ãƒ—ãƒªUI','ã‚®ã‚°ãƒ¯ãƒ¼ã‚«ãƒ¼å‘ã‘ã‚·ãƒ•ãƒˆç®¡ç†ã‚¢ãƒ—ãƒª','å¥åº·ç®¡ç†ã‚¢ãƒ—ãƒªï¼ˆApple Watchå¯¾å¿œï¼‰','å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚¢ãƒ—ãƒªUI','æ—…è¡Œäºˆç´„ã‚¢ãƒ—ãƒªï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œï¼‰','ä¸å‹•ç”£å†…è¦‹äºˆç´„ã‚¢ãƒ—ãƒª','ãƒ©ã‚¤ãƒ–é…ä¿¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UI','Eã‚¹ãƒãƒ¼ãƒ„ãƒãƒ¼ãƒ ã‚¢ãƒ—ãƒª'],
  motion:['ä¼æ¥­ãƒ­ã‚´ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ•ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰','ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹ã‚¢ãƒ‹ãƒ¡å‹•ç”» 90ç§’','SNSç”¨ã‚·ãƒ§ãƒ¼ãƒˆå‹•ç”» Ã—5æœ¬','å±•ç¤ºä¼šãƒ–ãƒ¼ã‚¹ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å‹•ç”»','ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ©Ÿèƒ½èª¬æ˜ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³','æ¡ç”¨ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ ãƒ¼ãƒ“ãƒ¼ï¼ˆ2åˆ†ï¼‰','ã‚¿ã‚¤ãƒˆãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ Webã‚µã‚¤ãƒˆ','ãƒ‡ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³å‹•ç”»'],
  web:['BtoB SaaS ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å…¨ç”»é¢','ãƒãƒƒãƒãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ UIãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ECãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  UIï¼ˆ100ç”»é¢ï¼‰','åŒ»ç™‚æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹ ã‚µã‚¤ãƒˆ','HR-Tech æ¡ç”¨ç®¡ç†ç”»é¢','ãƒ—ãƒ­ãƒ‘ãƒ†ãƒƒã‚¯ ç‰©ä»¶ç®¡ç†UI','ãƒ•ã‚£ãƒ³ãƒ†ãƒƒã‚¯ è³‡ç”£ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','EdTech å­¦ç¿’ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ UI'],
  brand:['å¤§æ‰‹é£Ÿå“ãƒ¡ãƒ¼ã‚«ãƒ¼ ãƒªãƒ–ãƒ©ãƒ³ãƒ‰å…¨ä½“','ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ— ãƒ–ãƒ©ãƒ³ãƒ‰æ§‹ç¯‰ï¼ˆ0â†’1ï¼‰','è‡ªæ²»ä½“ã‚·ãƒ†ã‚£ãƒ–ãƒ©ãƒ³ãƒ‰ç­–å®š','å¤§å­¦ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£åˆ·æ–°','ãƒ›ãƒ†ãƒ«ãƒã‚§ãƒ¼ãƒ³ ãƒ–ãƒ©ãƒ³ãƒ‰ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ãƒ–ãƒ©ãƒ³ãƒ‰ VIç­–å®š','ã‚¢ãƒ‘ãƒ¬ãƒ«ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ³ãƒ','B2B SaaS ãƒ–ãƒ©ãƒ³ãƒ‰ãƒªãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°'],
  preso:['ã‚·ãƒªãƒ¼ã‚ºA ãƒ”ãƒƒãƒãƒ‡ãƒƒã‚¯ï¼ˆ20ã‚¹ãƒ©ã‚¤ãƒ‰ï¼‰','IRè³‡æ–™ å¹´æ¬¡å ±å‘Šæ›¸ ãƒ‡ã‚¶ã‚¤ãƒ³','ç¤¾å†…ã‚­ãƒƒã‚¯ã‚ªãƒ• ãƒ—ãƒ¬ã‚¼ãƒ³åˆ·æ–°','æˆ¦ç•¥ãƒ—ãƒ¬ã‚¼ãƒ³ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€å¼','è£½å“ç™ºè¡¨ Keynoteãƒ‡ã‚¶ã‚¤ãƒ³','æ¡ç”¨èª¬æ˜ä¼šè³‡æ–™ å…¨é¢åˆ·æ–°','äº‹æ¥­è¨ˆç”»æ›¸ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³'],
  signage:['æ–°ã‚ªãƒ•ã‚£ã‚¹ ã‚µã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“','ã‚·ãƒ§ãƒ¼ãƒ«ãƒ¼ãƒ å±•ç¤ºä¼šãƒ–ãƒ¼ã‚¹è¨­è¨ˆ','é§…æ§‹å†…ã‚µã‚¤ãƒ³è¨ˆç”»','ç—…é™¢å†…ã‚µã‚¤ãƒ³ãƒ»ãƒ”ã‚¯ãƒˆã‚°ãƒ©ãƒ ','ãƒ›ãƒ†ãƒ«ãƒ­ãƒ“ãƒ¼ ç’°å¢ƒã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯','å¤§å­¦ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã‚µã‚¤ãƒ³ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ã‚¹ã‚¿ã‚¸ã‚¢ãƒ æ–½è¨­ã‚µã‚¤ãƒ³'],
  ux_research:['ECã‚µãƒ¼ãƒ“ã‚¹ ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼‹æ”¹å–„ææ¡ˆ','ã‚¢ãƒ—ãƒª ãƒšãƒ«ã‚½ãƒŠå®šç¾©ï¼†CJM','æ–°è¦äº‹æ¥­ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼20å','ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ','ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç›£æŸ»ï¼‹æ”¹å–„','ã‚¼ãƒ­ã‚¤ãƒã‚µãƒ¼ãƒ“ã‚¹ UXãƒªã‚µãƒ¼ãƒ'],
  design_system:['SaaS ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰','å¤§è¦æ¨¡ECã‚µã‚¤ãƒˆ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª','ã‚°ãƒ«ãƒ¼ãƒ—ä¼æ¥­çµ±ä¸€ UIæ¨™æº–åŒ–','ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚¢ãƒ—ãƒª ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ç­–å®š','ç¤¾å†…ãƒ„ãƒ¼ãƒ«ç¾¤ çµ±ä¸€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ '],
  ai:['ç”ŸæˆAI ãƒãƒ£ãƒƒãƒˆIFï¼ˆGPTé€£æºï¼‰','AIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ„ãƒ¼ãƒ« UX','MLäºˆæ¸¬ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ UI','AIã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ IFè¨­è¨ˆ','ç”»åƒç”ŸæˆAI ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆUI','éŸ³å£°AI ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆ','RAGæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ UI'],
  ar_xr:['ARè©¦ç€ã‚¢ãƒ—ãƒª UXè¨­è¨ˆ','XRå±•ç¤ºä¼šä½“é¨“è¨­è¨ˆ','ç©ºé–“ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° IFï¼ˆVision Proï¼‰','ARãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ UI','VRãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° ä½“é¨“è¨­è¨ˆ','ãƒ¡ã‚¿ãƒãƒ¼ã‚¹ç©ºé–“ UXè¨­è¨ˆ'],
  ir:['æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ ä¸Šå ´ä¼æ¥­ IRè³‡æ–™åˆ·æ–°','ESGãƒ¬ãƒãƒ¼ãƒˆ ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯','æ ªä¸»ç·ä¼šæ‹›é›†é€šçŸ¥ãƒ‡ã‚¶ã‚¤ãƒ³','è‹±èªç‰ˆã‚¢ãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ','å››åŠæœŸæ±ºç®—è³‡æ–™ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ'],
  saas:['ãƒ‡ã‚¶ã‚¤ãƒ³ç®¡ç† SaaS Î²ç‰ˆ','ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‘ã‘SaaSï¼ˆMAU 10ä¸‡ç›®æ¨™ï¼‰','ãƒãƒ¼ã‚±è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ« PMFæœŸ','FinTech BtoB SaaS æœ¬æ ¼é–‹ç™º','HR-Tech ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå…¨æ©Ÿèƒ½å®Ÿè£…','EdTech SaaS å­¦ç¿’æ©Ÿèƒ½æ‹¡å¼µ','HealthTech SaaS è¨˜éŒ²ãƒ»åˆ†ææ©Ÿèƒ½'],
  growth:['DAUæ”¹å–„ A/Bãƒ†ã‚¹ãƒˆæ–½ç­–è¨ˆç”»','ãƒãƒ£ãƒ¼ãƒ³ç‡å‰Šæ¸› UIæ”¹ä¿®','ã‚°ãƒ­ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ—è¨­è¨ˆ å®Ÿè£…','LTVæœ€å¤§åŒ– ãƒ•ã‚¡ãƒãƒ«æœ€é©åŒ–','ãƒã‚¤ãƒ©ãƒ«æ©Ÿèƒ½ å®Ÿè£…ï¼ˆæ‹›å¾…æ©Ÿèƒ½ï¼‰','ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºUI','ãƒšã‚¤ã‚¦ã‚©ãƒ¼ãƒ«æœ€é©åŒ– A/B'],
  cx:['è‡ªç¤¾SaaS ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœ€é©åŒ–','CXãƒãƒƒãƒ—å…¨ã‚¿ãƒƒãƒãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ','ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ UIåˆ·æ–°','NPSæ”¹å–„ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ”¹ä¿®','ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ†ã‚£ãƒ—ãƒ­ã‚°ãƒ©ãƒ  UXè¨­è¨ˆ'],
  platform:['ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‘ã‘ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹','ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘ãƒ‡ã‚¶ã‚¤ãƒ³OS','ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼å‘ã‘APIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','ãƒãƒ«ãƒã‚µã‚¤ãƒ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UX','B2B2C ãƒ›ãƒ¯ã‚¤ãƒˆãƒ©ãƒ™ãƒ«UI'],
  global_rebrand:['ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ–ãƒ©ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ å†æ§‹ç¯‰ 40ã‚«å›½','å¤šè¨€èªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ UIæœ€é©åŒ–','åœ°åŸŸåˆ¥ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰','ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ­ãƒ¼ãƒ³ãƒã‚­ãƒƒãƒˆåˆ¶ä½œ'],
  ma:['AIã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—è²·å PMIè¨­è¨ˆ','ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ä¼æ¥­ ãƒ–ãƒ©ãƒ³ãƒ‰çµ±åˆ','æµ·å¤–ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ æ—¥æœ¬å¸‚å ´å‘ã‘ UIæœ€é©åŒ–','ã‚°ãƒ«ãƒ¼ãƒ—ä¼šç¤¾ ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å†ç·¨'],
  os_design:['æ¬¡ä¸–ä»£OS UI/UXãƒ•ãƒ«ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ã‚¹ãƒãƒ¼ãƒˆã‚¦ã‚©ãƒƒãƒ OS UIè¨­è¨ˆ','è»Šè¼‰HMI ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆï¼ˆADASï¼‰','AR HMD OS ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆ'],
  // æ–°ã‚¿ã‚¤ãƒ—
  tshirt:['ã‚¹ãƒˆãƒªãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰ Tã‚·ãƒ£ãƒ„ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯','ãƒãƒ³ãƒ‰Tã‚·ãƒ£ãƒ„ãƒ‡ã‚¶ã‚¤ãƒ³Ã—5ç¨®','ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ãƒ—ãƒªãƒ³ãƒˆ å…¨20ã‚µã‚¤ã‚º','é™å®šã‚³ãƒ©ãƒœTã‚·ãƒ£ãƒ„','ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ã‚°ãƒƒã‚º Tã‚·ãƒ£ãƒ„','ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ãƒ–ãƒ©ãƒ³ãƒ‰Tã‚·ãƒ£ãƒ„'],
  stamp:['LINEã‚¹ã‚¿ãƒ³ãƒ— 16ç¨®ã‚»ãƒƒãƒˆ','ãƒ–ãƒ©ãƒ³ãƒ‰ã‚·ãƒ¼ãƒ«ã‚»ãƒƒãƒˆï¼ˆ6ç¨®ï¼‰','ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚¹ã‚¿ãƒ³ãƒ—ä¸€å¼','ãƒãƒ³ã‚³ãƒ»å°é‘‘ãƒ‡ã‚¶ã‚¤ãƒ³','ãƒã‚¹ã‚­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ—å›³æ¡ˆ','ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ãƒ¼ãƒ«ï¼ˆé£Ÿå“å‘ã‘ï¼‰'],
  thumbnail:['æ–™ç†ãƒãƒ£ãƒ³ãƒãƒ« ã‚µãƒ ãƒã‚¤ãƒ«Ã—12','ãƒ“ã‚¸ãƒã‚¹è§£èª¬ YouTube ã‚µãƒ ãƒã‚¤ãƒ«','ã‚²ãƒ¼ãƒ å®Ÿæ³ ã‚µãƒ ãƒã‚¤ãƒ«Ã—20','Vtuberãƒãƒ£ãƒ³ãƒãƒ« ã‚µãƒ ãƒã‚¤ãƒ«ã‚»ãƒƒãƒˆ','éŸ³æ¥½MV ã‚µãƒ ãƒã‚¤ãƒ«','ä¼æ¥­ç ”ä¿®å‹•ç”» ã‚µãƒ ãƒã‚¤ãƒ«'],
  menu:['ãƒ•ãƒ¬ãƒ³ãƒãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ ã‚³ãƒ¼ã‚¹ãƒ¡ãƒ‹ãƒ¥ãƒ¼','ã‚«ãƒ•ã‚§ ãƒ‰ãƒªãƒ³ã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆå£æ›ã‘ï¼‰','å±…é…’å±‹ ã‚°ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆå…¨30Pï¼‰','ãƒ›ãƒ†ãƒ«ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒ‹ãƒ¥ãƒ¼','ãƒ•ãƒ¼ãƒ‰ãƒ•ã‚§ã‚¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœãƒ¼ãƒ‰','ãƒ‡ã‚¸ã‚¿ãƒ«ã‚µã‚¤ãƒãƒ¼ã‚¸å¯¾å¿œãƒ¡ãƒ‹ãƒ¥ãƒ¼'],
  nengajo:['æ–°æ˜¥ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³DM 3,000æš','ä¼šç¤¾å¹´è³€çŠ¶ ãƒ‡ã‚¸ã‚¿ãƒ«ç‰ˆ','æš‘ä¸­è¦‹èˆã„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ã‚¯ãƒªã‚¹ãƒã‚¹ã‚«ãƒ¼ãƒ‰ï¼ˆè‹±èªç‰ˆï¼‰','VIPé¡§å®¢å‘ã‘æ‰‹ä½œã‚Šæ„ŸDM','è¡Œæ”¿ã‹ã‚‰ã®æ¡ˆå†…çŠ¶ãƒ‡ã‚¶ã‚¤ãƒ³'],
  game_ui:['ã‚½ãƒ¼ã‚·ãƒ£ãƒ«RPG å…¨UIè¨­è¨ˆ','ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ  UIï¼ˆiOS/Androidï¼‰','ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ  ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”»é¢','Eã‚¹ãƒãƒ¼ãƒ„ ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆç®¡ç†UI','ã‚¬ãƒãƒ£ãƒ»ã‚¬ãƒãƒ£æ¼”å‡ºç”»é¢','ã‚²ãƒ¼ãƒ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ 60ç¨®'],
  ebook:['ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ é›»å­æ›¸ç±ï¼ˆ200Pï¼‰','ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—è³‡é‡‘èª¿é” ã‚¬ã‚¤ãƒ‰PDF','UI/UXãƒ‡ã‚¶ã‚¤ãƒ³åŸºç¤ãƒ†ã‚­ã‚¹ãƒˆ','å¥åº·ç®¡ç†ãƒ¬ã‚·ãƒ”BOOK','è¡Œæ”¿å‘ã‘æ‰‹ç¶šãæ¡ˆå†…PDF','ç¤¾å†…ç ”ä¿® ãƒ†ã‚­ã‚¹ãƒˆå…¨é¢åˆ·æ–°'],
  map:['è¦³å…‰åœ° ã‚¤ãƒ©ã‚¹ãƒˆãƒãƒƒãƒ—ï¼ˆA2ï¼‰','ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ« ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—','ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´ æ¡ˆå†…å›³','ãƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯ ã‚¨ãƒªã‚¢ãƒãƒƒãƒ—','éƒ½å¸‚ç´¹ä»‹ ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒãƒƒãƒ—','ãƒ‡ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ çµ±è¨ˆåœ°å›³'],
  mascot:['åœ°æ–¹è‡ªæ²»ä½“ PRã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼','ãƒ•ã‚£ãƒ³ãƒ†ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ ãƒã‚¹ã‚³ãƒƒãƒˆ','å¹¼å…å‘ã‘ã‚¢ãƒ—ãƒª ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼3ç¨®','ã‚¹ãƒãƒ¼ãƒ„ãƒãƒ¼ãƒ  å…¬å¼ãƒã‚¹ã‚³ãƒƒãƒˆ','ECã‚µãƒ¼ãƒ“ã‚¹ ã‚¬ã‚¤ãƒ‰ã‚­ãƒ£ãƒ©','ä¼æ¥­å…¬å¼LINEã‚¹ã‚¿ãƒ³ãƒ—ç”¨ã‚­ãƒ£ãƒ©'],
  infographic:['ä¼æ¥­IR å¹´æ¬¡ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–','ã‚³ãƒ­ãƒŠå¾Œã®åƒãæ–¹ èª¿æŸ»çµæœ','AIæ¥­ç•Œ ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ãƒãƒ¼ãƒˆ','æ°—å€™å¤‰å‹• ãƒ‡ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³','æ¡ç”¨æƒ…å ± ä¼šç¤¾ç´¹ä»‹ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯','è£½å“æ¯”è¼ƒ ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯'],
  fashion:['ã‚»ãƒ¬ã‚¯ãƒˆã‚·ãƒ§ãƒƒãƒ— ç§‹å†¬ãƒ«ãƒƒã‚¯ãƒ–ãƒƒã‚¯','ã‚¢ãƒ‘ãƒ¬ãƒ«ãƒ–ãƒ©ãƒ³ãƒ‰ ã‚¹ãƒŠãƒƒãƒ—ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³èªŒ åºƒå‘Šã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³','ãƒ¬ãƒ³ã‚¿ãƒ«ãƒ‰ãƒ¬ã‚¹ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰ æ—¥æœ¬å‘ã‘ã‚«ã‚¿ãƒ­ã‚°','ãƒ¡ãƒ³ã‚ºã‚¹ãƒˆãƒªãƒ¼ãƒˆ ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«'],
  food:['æ–°è¦é–‹æ¥­ ãƒ©ãƒ¼ãƒ¡ãƒ³å°‚é–€åº—ãƒ–ãƒ©ãƒ³ãƒ‰','å±…é…’å±‹ãƒã‚§ãƒ¼ãƒ³ VIå…¨é¢åˆ·æ–°','ã‚«ãƒ•ã‚§ï¼†ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ ãƒ–ãƒ©ãƒ³ãƒ‰ç«‹ã¡ä¸Šã’','é«˜ç´šå¯¿å¸åº— æš–ç°¾ãƒ»åº—å†…ã‚µã‚¤ãƒ³','ã‚°ãƒ«ãƒ¡ECã‚µã‚¤ãƒˆ ã‚·ãƒ§ãƒƒãƒ—ãƒ–ãƒ©ãƒ³ãƒ‰','ãƒ•ãƒ¼ãƒ‰ãƒ†ãƒƒã‚¯ æ–°ã‚µãƒ¼ãƒ“ã‚¹ãƒ–ãƒ©ãƒ³ãƒ‰'],
  realestate:['ã‚¿ãƒ¯ãƒãƒ³ è²©å£²ãƒ‘ãƒ³ãƒ•ï¼ˆé«˜ç´šï¼‰','åœ°æ–¹ç§»ä½ä¿ƒé€² ç‰©ä»¶ã‚µã‚¤ãƒˆãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','ä¸å‹•ç”£ãƒ†ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ ãƒ–ãƒ©ãƒ³ãƒ‰çµ±åˆ','å•†æ¥­ãƒ“ãƒ« ãƒ†ãƒŠãƒ³ãƒˆå‹Ÿé›†è³‡æ–™','ãƒ›ãƒ†ãƒ«æ–°é¤¨ é–‹æ¥­ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ãƒªãƒãƒ™ç‰©ä»¶ è²©å£²ä¿ƒé€²ãƒ„ãƒ¼ãƒ«ä¸€å¼'],
  event:['éŸ³æ¥½ãƒ•ã‚§ã‚¹ ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ é‹å–¶ãƒ„ãƒ¼ãƒ«ä¸€å¼','å±•ç¤ºä¼š ãƒ–ãƒ¼ã‚¹ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆ50m2ï¼‰','ãƒãƒ©ã‚½ãƒ³å¤§ä¼š ãƒ©ãƒ³ãƒŠãƒ¼å‘ã‘å¿œæ´ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ä¼æ¥­å‘¨å¹´è¨˜å¿µå¼å…¸ æ¼”å‡ºãƒ‡ã‚¶ã‚¤ãƒ³','ã‚¹ãƒãƒ¼ãƒ„å›½éš›å¤§ä¼š WEBã‚µã‚¤ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³'],
  nft:['ã‚¸ã‚§ãƒãƒ©ãƒ†ã‚£ãƒ–ã‚¢ãƒ¼ãƒˆNFT 10,000ç‚¹','ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ NFTã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³','éŸ³æ¥½NFT ã‚¸ãƒ£ã‚±ãƒƒãƒˆã‚¢ãƒ¼ãƒˆ','ãƒ¡ã‚¿ãƒãƒ¼ã‚¹ç©ºé–“ ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¢ãƒã‚¿ãƒ¼','Web3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','NFTãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ UIãƒ‡ã‚¶ã‚¤ãƒ³'],
  medical_app:['åœ¨å®…åŒ»ç™‚ æ‚£è€…ç®¡ç†ã‚¢ãƒ—ãƒªUI','è¨ºå¯Ÿäºˆç´„ ã‚¢ãƒ—ãƒªUIï¼ˆç—…é™¢ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰','ä»‹è­·è¨˜éŒ² ç¾å ´ã‚¹ã‚¿ãƒƒãƒ•å‘ã‘ã‚¢ãƒ—ãƒª','ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ ã‚¢ãƒ—ãƒªè¨­è¨ˆ','æœè–¬ç®¡ç† ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚¢ãƒ—ãƒª','PHR å€‹äººå¥åº·è¨˜éŒ² ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UI'],
  edtech:['å°ä¸­å­¦ç”Ÿå‘ã‘ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã‚¢ãƒ—ãƒª','è³‡æ ¼è©¦é¨“ å­¦ç¿’ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ','ç¤¾å†…ç ”ä¿® Eãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ','å¤§å­¦ LMS å…¨é¢ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','å­ä¾›å‘ã‘è‹±èªå­¦ç¿’ ã‚­ãƒ£ãƒ©ã‚¢ãƒ—ãƒª','é«˜æ ¡ç”Ÿ é€²è·¯ç›¸è«‡ ãƒãƒƒãƒãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹UI'],
  fintech:['å€‹äººè³‡ç”£ç®¡ç†ã‚¢ãƒ—ãƒª UIå…¨é¢åˆ·æ–°','ä¸­å°ä¼æ¥­å‘ã‘ è«‹æ±‚æ›¸ç®¡ç†SaaSUI','ä»®æƒ³é€šè²¨ ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ—ãƒªUX','ãƒã‚¤ãƒ³ãƒˆçµŒæ¸ˆåœ ã‚¢ãƒ—ãƒªçµ±åˆUI','æ±ºæ¸ˆç«¯æœ«å‘ã‘ åº—èˆ—ç®¡ç†ç”»é¢','BNPLã‚µãƒ¼ãƒ“ã‚¹ è³¼å…¥ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–'],
  agri:['ã‚¹ãƒãƒ¼ãƒˆè¾²æ¥­ ã‚»ãƒ³ã‚µãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','ç”£ç›´ã‚¢ãƒ—ãƒª è¾²å®¶ãƒ»æ¶ˆè²»è€…åŒæ–¹å‘UI','æ¼æ¥­DX æ°´æšã’ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ','è¾²æ‘è¦³å…‰ ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰å‘ã‘Webã‚µã‚¤ãƒˆ','è¾²ç”£ç‰©EC ç”£åœ°ãƒ–ãƒ©ãƒ³ãƒ‰ã‚µã‚¤ãƒˆ','é£Ÿè¾²é€£æº ãƒ­ãƒ¼ã‚«ãƒ«SDGsã‚µã‚¤ãƒˆ'],
  sport:['ãƒ—ãƒ­ã‚µãƒƒã‚«ãƒ¼ã‚¯ãƒ©ãƒ– ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«','æ ¼é—˜æŠ€å›£ä½“ ãƒ–ãƒ©ãƒ³ãƒ‰åˆ·æ–°','ã‚¹ãƒãƒ¼ãƒ„ã‚¸ãƒ  ãƒ•ãƒ©ãƒ³ãƒãƒ£ã‚¤ã‚ºVI','ãƒãƒ©ã‚½ãƒ³å¤§ä¼š å…¬å¼ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³','ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã‚¢ãƒ—ãƒª ã‚¹ãƒãƒ¼ãƒ„ãƒ–ãƒ©ãƒ³ãƒ‰çµ±åˆ','ã‚¹ã‚¿ã‚¸ã‚¢ãƒ å‘½åæ¨© ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³'],
  anime:['TVã‚¢ãƒ‹ãƒ¡ åŠ‡å ´ç‰ˆ ã‚­ãƒ¼ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ã‚²ãƒ¼ãƒ ã‚¢ãƒ‹ãƒ¡ PVãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«','ã‚°ãƒƒã‚ºå±•é–‹ ãƒ•ã‚£ã‚®ãƒ¥ã‚¢ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸','ã‚³ãƒ©ãƒœã‚«ãƒ•ã‚§ å†…è£…ãƒ»å•†å“ãƒ‡ã‚¶ã‚¤ãƒ³','ãƒ¡ãƒ‡ã‚£ã‚¢ãƒŸãƒƒã‚¯ã‚¹ çµ±ä¸€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å±•é–‹','é…ä¿¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  ã‚ªãƒªã‚¸ãƒŠãƒ«ä½œå“'],
  govtech:['è‡ªæ²»ä½“ æ‰‹ç¶šããƒ‡ã‚¸ã‚¿ãƒ«åŒ–ãƒãƒ¼ã‚¿ãƒ«','å›½æ°‘ID è¡Œæ”¿ã‚µãƒ¼ãƒ“ã‚¹UIçµ±åˆ','ã‚¹ãƒãƒ¼ãƒˆã‚·ãƒ†ã‚£ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰','é˜²ç½æƒ…å ± å¸‚æ°‘å‘ã‘ã‚¢ãƒ—ãƒªUI','å›³æ›¸é¤¨ ãƒ‡ã‚¸ã‚¿ãƒ«ã‚µãƒ¼ãƒ“ã‚¹åˆ·æ–°','ãƒ‘ã‚¹ãƒãƒ¼ãƒˆãƒ»ãƒ“ã‚¶ç”³è«‹ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ–'],
  mobility:['EV å……é›»ã‚¹ã‚¿ãƒ³ãƒ‰ HMIè¨­è¨ˆ','è‡ªå‹•é‹è»¢ ãƒ¬ãƒ™ãƒ«4 UIè¨­è¨ˆ','ãƒã‚¹ãƒ»é‰„é“ é‹è¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ UI','MaaSçµ±åˆ ä¹—ã‚Šæ›ãˆã‚¢ãƒ—ãƒªUI','ã‚«ãƒ¼ã‚·ã‚§ã‚¢ é…è»Šãƒ»æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼UX','ãƒˆãƒ©ãƒƒã‚¯é‹è¡Œç®¡ç† ãƒ‰ãƒ©ã‚¤ãƒãƒ¼å‘ã‘UI'],
  xrplatform:['ãƒ¡ã‚¿ãƒãƒ¼ã‚¹ ã‚ªãƒ•ã‚£ã‚¹ ç©ºé–“UIè¨­è¨ˆ','ARå•†å“è©¦ç€ å…¨ãƒ–ãƒ©ãƒ³ãƒ‰å±•é–‹','åŒ»ç™‚XR æ‰‹è¡“æ”¯æ´ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹','æ•™è‚²XR ä»®æƒ³å®Ÿé¨“å®¤UI','ãƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯ ARä½“é¨“ å…¨ã‚¨ãƒªã‚¢è¨­è¨ˆ','ç©ºé–“åºƒå‘Šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  UIä»•æ§˜'],
};
var MODS=[
  {tx:'ã€Œå…¨ä½“çš„ã«ã‚‚ã£ã¨ãƒãƒƒãƒ—ã«ã—ã¦ãã ã•ã„ã€', em:'ğŸŒˆ',dm:-8, at:'ã‹ã—ã“ã¾ã‚Šã¾ã—ãŸâ€¦',rt:'ãƒãƒƒãƒ—ã¨ã¯ã©ã†ã„ã†æ„å‘³ã§ã—ã‚‡ã†ã‹ï¼Ÿ',rp:-6},
  {tx:'ã€Œãªã‚“ã‹ã¡ã‚‡ã£ã¨é•ã†ã‚“ã§ã™ã‚ˆã­ã€œã€',      em:'ğŸ˜‘',dm:-10,at:'ä¿®æ­£ã—ã¾ã™',rt:'å…·ä½“çš„ã«ã©ã“ãŒé•ã„ã¾ã™ã‹ï¼Ÿ',rp:-3},
  {tx:'ã€Œå‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«æˆ»ã—ã¦ãã ã•ã„ã€',         em:'ğŸ˜¤',dm:-15,at:'ã‚‚ã¡ã‚ã‚“ã§ã™ï¼ˆ2é€±é–“è¿”ã—ã¦ï¼‰',rt:'ãã‚Œã¯é›£ã—ã„ã§ã™â€¦',rp:-10},
  {tx:'ã€Œãƒ­ã‚´ã‚’100æ¡ˆå‡ºã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿã€',     em:'ğŸ’€',dm:-25,at:'ã¯ã„â€¦ï¼ˆå»ƒäººç¢ºå®šï¼‰',rt:'50æ¡ˆã§ã¯ã„ã‹ãŒã§ã—ã‚‡ã†',rp:-12},
  {tx:'ã€Œæ¯å­ãŒã‚‚ã£ã¨è±ªè¯ã«ã¨è¨€ã£ã¦ã¾ã™ã€',       em:'ğŸ‘¨â€ğŸ‘¦',dm:-12,at:'è±ªè¯ã«ã—ã¾ã™',rt:'ç¤¾é•·ã®ã”åˆ¤æ–­ã«ãŠä»»ã›ã‚’',rp:-15},
  {tx:'ã€Œæ‹…å½“è€…ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€‚å¼•ãç¶™ãã‚¼ãƒ­ã§ã™ã€',em:'ğŸ˜­',dm:-20,at:'æœ€åˆã‹ã‚‰èª¬æ˜ã—ã¾ã™',rt:'å¼•ãç¶™ãè³‡æ–™ã‚’ãã ã•ã„',rp:-5},
  {tx:'ã€Œå‰ã¨é•ã†æ–¹å‘ã§å…¨éƒ¨ã‚„ã‚Šç›´ã—ã§ã€',         em:'ğŸ”„',dm:-30,at:'ã¯ã„â€¦ï¼ˆæ·±å¤œç¢ºå®šï¼‰',rt:'è¿½åŠ è²»ç”¨ãŒç™ºç”Ÿã—ã¾ã™',rp:-10},
  {tx:'ã€Œã‚·ãƒ³ãƒ—ãƒ«ã«â†’è±ªè¯ã«â†’ã‚„ã£ã±ã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«ã€',em:'ğŸ”',dm:-35,at:'äº†è§£ã§ã™ï¼ˆä¸‰å¾€å¾©ç›®ï¼‰',rt:'æ–¹å‘æ€§ã‚’æ±ºã‚ã¦ã„ãŸã ããŸã„',rp:-8},
  {tx:'ã€Œãªã‚“ã‹ãã£ã¨ã“ãªã„ã‚“ã§ã™ã€',             em:'ğŸ¤”',dm:-8, at:'ãã£ã¨ãã‚‹æ–¹å‘ã§',rt:'å…·ä½“çš„ãªFBã‚’ãŠé¡˜ã„ã—ã¾ã™',rp:-3},
  {tx:'ã€Œç„¡æ–™ã§ã‚‚ã†3æ¡ˆä½œã£ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿã€',    em:'ğŸ’¸',dm:-18,at:'ã‚ã‹ã‚Šã¾ã—ãŸï¼ˆæ¶™ï¼‰',rt:'è¿½åŠ æ¡ˆä»¶ã¨ã—ã¦å¯¾å¿œã—ã¾ã™',rp:-8},
  {tx:'ã€Œä»–ç¤¾ã«é ¼ã‚‚ã†ã‹è¿·ã£ã¦ã¾ã™ã€',             em:'ğŸ˜¨',dm:-12,at:'å€¤å¼•ãã—ã¾ã™',rt:'ãœã²ã”æ¤œè¨ãã ã•ã„',rp:-20},
  {tx:'ã€Œæ˜¨æ—¥é€ã£ãŸãƒ‡ãƒ¼ã‚¿ã€å·®ã—æ›¿ãˆã§ã€ï¼ˆç´å“å¾Œï¼‰',em:'ğŸ˜¤',dm:-20,at:'å¯¾å¿œã—ã¾ã™ï¼ˆç„¡æ–™ã§ï¼‰',rt:'è¿½åŠ æ–™é‡‘ãŒç™ºç”Ÿã—ã¾ã™',rp:-12},
];
var EVTS=[
  {id:'figma_down',ic:'ğŸ’€',ty:'danger',tt:'FigmaãŒè½ã¡ãŸï¼',
   ds:'ç· ã‚åˆ‡ã‚Š3æ™‚é–“å‰ã€Figmaã®ã‚µãƒ¼ãƒãƒ¼ãŒãƒ€ã‚¦ãƒ³ã€‚\nã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸ã¯ã€Œinvestigatingã€ã€‚',
   ch:[{tx:'Sketchã§ä½œæ¥­ç¶šè¡Œ',ef:'å…¨ãƒ¡ãƒ³ã‚¿ãƒ«-5',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental-5,0,100);});notify('Sketchã§å‡Œãã¾ã™â€¦','warn');}},
       {tx:'å¾©æ—§ã‚’å¾…ã¤ï¼ˆãã‚ãã‚ï¼‰',ef:'å…¨ãƒ¡ãƒ³ã‚¿ãƒ«-12',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental-12,0,100);});addLog('Figmaå¾©æ—§å¾…ã¡ä¸­â€¦å…¨å“¡ç²¾ç¥æ¶ˆè€—','bad');}}]},
  {id:'client_bomb',ic:'ğŸ’¢',ty:'danger',tt:'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒçˆ†ç™ºï¼',
   ds:'æ‹…å½“è€…ã‹ã‚‰çªç„¶ã€é•·æ–‡ã®æ€’ã‚Šã®ãƒ¡ãƒ¼ãƒ«ãŒå±Šãã¾ã—ãŸã€‚\nç†ç”±ãŒã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ã§ã‚‚æ¿€ã—ãæ€’ã£ã¦ã„ã¾ã™ã€‚',
   ch:[{tx:'è¬ã‚Šå€’ã™ï¼ˆåœŸä¸‹åº§ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰',ef:'è©•åˆ¤-5ã€ãƒ¡ãƒ³ã‚¿ãƒ«-15',fn:function(){G.s.rep=clamp(G.s.rep-5,0,100);G.s.staff.forEach(function(s){s.mental=clamp(s.mental-15,0,100);});addLog('ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¬ç½ªã€‚ç–²å¼Šã€‚','bad');}},
       {tx:'å†·é™ã«äº‹å®Ÿç¢ºèªã™ã‚‹',ef:'è©•åˆ¤-2ã€æ”¹å–„ã®å¯èƒ½æ€§',fn:function(){G.s.rep=clamp(G.s.rep-2,0,100);notify('å†·é™å¯¾å¿œã€‚äº‹æ…‹ãŒè½ã¡ç€ã„ãŸã€‚','ok');}}]},
  {id:'inf_mod',ic:'â™¾ï¸',ty:'danger',tt:'ç„¡é™ä¿®æ­£åœ°ç„çªå…¥',
   ds:'ã€Œã‚‚ã†ä¸€å£°ã€\nã€Œã‚‚ã†ä¸€å£°ã€\nã€Œã‚‚ã†ä¸€å£°ã€\nã“ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€æ­¢ã¾ã‚‹æ°—ãŒã‚ã‚Šã¾ã›ã‚“ã€‚',
   ch:[{tx:'å—ã‘ç¶šã‘ã‚‹ï¼ˆå»ƒäººãƒ«ãƒ¼ãƒˆï¼‰',ef:'å…¨ãƒ¡ãƒ³ã‚¿ãƒ«-30ã€ãƒ–ãƒ©ãƒƒã‚¯+10',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental-30,0,100);});G.s.totalMods+=10;G.s.black=clamp(G.s.black+10,0,100);addLog('ç„¡é™ä¿®æ­£åœ°ç„â€¦ç¤¾å“¡ãŒå£Šã‚Œã¦ã„ã','bad');SFX.bad();}},
       {tx:'è¿½åŠ è²»ç”¨ã‚’è«‹æ±‚ã™ã‚‹',ef:'+10ä¸‡å††ã€è©•åˆ¤-5',fn:function(){G.s.money+=100000;G.s.rep=clamp(G.s.rep-5,0,100);addLog('è¿½åŠ è²»ç”¨è«‹æ±‚ã§ä¿®æ­£ã‚’æ‰“ã¡åˆ‡ã£ãŸã€‚','good');}}]},
  {id:'quit',ic:'ğŸš¶',ty:'warn',tt:'ç¤¾å“¡ãŒé€€è·ã‚’ç”³ã—å‡ºãŸ',
   ds:'ã€Œå°‘ã—ãŠè©±ãŒã‚ã‚‹ã‚“ã§ã™ãŒâ€¦ã€\nç¤¾å“¡ã®1äººãŒã€é™ã‹ã«é€€è·ã‚’ç”³ã—å‡ºã¾ã—ãŸã€‚',
   ch:[{tx:'çµ¦ä¸ã‚’ä¸Šã’ã¦å¼•ãæ­¢ã‚ã‚‹',ef:'-20ä¸‡å††ã€å¼•ãæ­¢ã‚',fn:function(){if(G.s.money>=200000){G.s.money-=200000;notify('çµ¦ä¸UPã§å¼•ãæ­¢ã‚æˆåŠŸï¼','ok');}else{fireRandom();notify('è³‡é‡‘ä¸è¶³ã§å¼•ãæ­¢ã‚ã‚‰ã‚Œãªã‹ã£ãŸâ€¦','danger');}}},
       {tx:'å¿«ãé€ã‚Šå‡ºã™',ef:'è©•åˆ¤-3ã€äººå“¡-1',fn:function(){fireRandom();addLog('ç¤¾å“¡ãŒæ—…ç«‹ã£ãŸã€‚','bad');}},
       {tx:'æ¥­å‹™æ”¹å–„ã‚’ç´„æŸã™ã‚‹',ef:'ãƒ–ãƒ©ãƒƒã‚¯-10ã€æˆåŠŸç‡50%',fn:function(){if(Math.random()<0.5){G.s.black=clamp(G.s.black-10,0,100);notify('æ”¹å–„ç´„æŸã§å¼•ãæ­¢ã‚æˆåŠŸï¼','ok');}else{fireRandom();notify('ãã‚Œã§ã‚‚å»ã£ã¦ã„ã£ãŸâ€¦','danger');}}}]},
  {id:'font_acc',ic:'ğŸ”¤',ty:'danger',tt:'ãƒ•ã‚©ãƒ³ãƒˆäº‹æ•…ç™ºç”Ÿï¼',
   ds:'ç´å“ãƒ‡ãƒ¼ã‚¿ã«æœªè³¼å…¥ã®å•†ç”¨ãƒ•ã‚©ãƒ³ãƒˆãŒæ··å…¥ã—ã¦ã„ã¾ã—ãŸã€‚\nã€Œå°åˆ·ã§ãã¾ã›ã‚“ã€ã¨é€£çµ¡ãŒæ¥ã¦ã„ã¾ã™ã€‚',
   ch:[{tx:'å³åº§ã«ä¿®æ­£ç‰ˆã‚’é€ã‚‹',ef:'ãƒ¡ãƒ³ã‚¿ãƒ«-10ã€-3ä¸‡å††',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental-10,0,100);});G.s.money-=30000;addLog('ãƒ•ã‚©ãƒ³ãƒˆäº‹æ•…å¯¾å¿œã€‚å‡ºè²»ã‚ã‚Šã€‚','bad');}},
       {tx:'ãƒ•ãƒªãƒ¼ãƒ•ã‚©ãƒ³ãƒˆã«å·®ã—æ›¿ãˆ',ef:'å“è³ªãƒ€ã‚¦ãƒ³ã€è©•åˆ¤-5',fn:function(){G.s.rep=clamp(G.s.rep-5,0,100);addLog('ãƒ•ãƒªãƒ¼ãƒ•ã‚©ãƒ³ãƒˆå·®ã—æ›¿ãˆã€‚å“è³ªå¦¥å”ã€‚','bad');}}]},
  {id:'fire_sns',ic:'ğŸ”¥',ty:'danger',tt:'SNSç‚ä¸Šç™ºç”Ÿï¼',
   ds:'ã€Œã“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã²ã©ããªã„ï¼Ÿã€ã®å£°ãŒXã§åºƒã¾ã£ã¦ã„ã¾ã™ã€‚\nãƒˆãƒ¬ãƒ³ãƒ‰ã«è¼‰ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚',
   ch:[{tx:'è¬ç½ªæ–‡ã‚’ä¸å¯§ã«å‡ºã™',ef:'ç‚ä¸Š-15ã€è©•åˆ¤-10',fn:function(){G.s.fire=clamp(G.s.fire-15,0,100);G.s.rep=clamp(G.s.rep-10,0,100);addLog('è¬ç½ªæ–‡å…¬é–‹ã€‚ç‚ä¸ŠãŒå°‘ã—åã¾ã£ãŸã€‚','bad');}},
       {tx:'å®Œå…¨æ²ˆé»™ã§ä¹—ã‚Šåˆ‡ã‚‹',ef:'ç‚ä¸Š+8',fn:function(){G.s.fire=clamp(G.s.fire+8,0,100);addLog('æ²ˆé»™ä½œæˆ¦ã€‚ã¾ã ç‡ƒãˆã¦ã„ã‚‹â€¦','bad');}},
       {tx:'ãƒ‡ã‚¶ã‚¤ãƒ³ã®æ„å›³ã‚’èª¬æ˜ã™ã‚‹',ef:'æˆåŠŸã‹ç‚ä¸Šã‹50/50',fn:function(){if(Math.random()<0.45){G.s.fire=clamp(G.s.fire-20,0,100);G.s.rep=clamp(G.s.rep+5,0,100);notify('èª¬æ˜ãŒå…±æ„Ÿã‚’å‘¼ã³ç‚ä¸Šé®ç«ï¼','ok');}else{G.s.fire=clamp(G.s.fire+15,0,100);notify('ã•ã‚‰ã«ç‚ä¸Šã—ã¦ã—ã¾ã£ãŸâ€¦','danger');}}}]},
  {id:'sns_buzz',ic:'ğŸš€',ty:'success',tt:'SNSã§ãƒã‚ºã£ãŸï¼',
   ds:'ç´å“ã—ãŸæ¡ˆä»¶ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãŒSNSã§å¤§ãããƒã‚ºã‚Šã¾ã—ãŸï¼\nãƒ‡ã‚¶ã‚¤ãƒ³å¥½ãã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒç¶šã€…ã¨ãƒªãƒã‚¹ãƒˆã€‚',
   ch:[{tx:'ç©æ¥µçš„ã«æ‹¡æ•£ã™ã‚‹',ef:'SNS+500ã€è©•åˆ¤+8',fn:function(){G.s.sns+=500;G.s.rep=clamp(G.s.rep+8,0,100);addLog('SNSãƒã‚ºã§èªçŸ¥æ€¥æ‹¡å¤§ï¼','good');SFX.good();}},
       {tx:'é™ã‹ã«å–œã¶',ef:'SNS+150ã€è©•åˆ¤+3',fn:function(){G.s.sns+=150;G.s.rep=clamp(G.s.rep+3,0,100);addLog('é™ã‹ã«ãƒã‚ºã‚Šã‚’äº«å—ã—ãŸã€‚','good');}}]},
  {id:'award',ic:'ğŸ†',ty:'success',tt:'ãƒ‡ã‚¶ã‚¤ãƒ³è³ã‚’å—è³ï¼',
   ds:'ã‚°ãƒƒãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³è³ã®ä¸€æ¬¡å¯©æŸ»ã‚’é€šéã—ã¾ã—ãŸï¼',
   ch:[{tx:'ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹ã‚’ç©æ¥µå±•é–‹',ef:'è©•åˆ¤+25ã€SNS+400',fn:function(){G.s.rep=clamp(G.s.rep+25,0,100);G.s.sns+=400;G.s.awards++;addLog('ã‚°ãƒƒãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³è³å—è³ï¼æ¥­ç•Œé¨’ç„¶ï¼','good');SFX.fanfare();}},
       {tx:'å®Ÿç¸¾ã¨ã—ã¦æ·¡ã€…ã¨è¨˜éŒ²',ef:'è©•åˆ¤+12',fn:function(){G.s.rep=clamp(G.s.rep+12,0,100);G.s.awards++;addLog('ãƒ‡ã‚¶ã‚¤ãƒ³è³å—è³ã€‚å®Ÿç¸¾ã¨ã—ã¦è¨˜éŒ²ã€‚','good');}}]},
  {id:'god_cli',ic:'ğŸ˜‡',ty:'success',tt:'ç¥ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç™»å ´ï¼',
   ds:'ã€Œäºˆç®—ã¯ååˆ†ã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã‚‚ã»ã¼ã—ã¾ã›ã‚“ã€‚ã€\nå¤¢ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒç¾ã‚Œã¾ã—ãŸã€‚',
   ch:[{tx:'ãœã²ãŠé¡˜ã„ã—ã¾ã™ï¼',ef:'é«˜é¡æ¡ˆä»¶+300ã€œ500ä¸‡å††',fn:function(){var e=3000000+ri(0,2000000);G.s.money+=e;G.s.rep=clamp(G.s.rep+10,0,100);addLog('ç¥ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨å¥‘ç´„ï¼'+fY(e)+'ï¼','good');SFX.fanfare();}}]},
  {id:'media',ic:'ğŸ“°',ty:'success',tt:'ãƒ¡ãƒ‡ã‚£ã‚¢å–æä¾é ¼ï¼',
   ds:'ãƒ‡ã‚¶ã‚¤ãƒ³å°‚é–€ãƒ¡ãƒ‡ã‚£ã‚¢ã‹ã‚‰å–æã®ç”³ã—è¾¼ã¿ãŒæ¥ã¾ã—ãŸã€‚',
   ch:[{tx:'å—ã‘ã‚‹ï¼ˆä»ŠãŒãƒãƒ£ãƒ³ã‚¹ï¼‰',ef:'è©•åˆ¤+22ã€SNS+300',fn:function(){G.s.rep=clamp(G.s.rep+22,0,100);G.s.sns+=300;addLog('ãƒ¡ãƒ‡ã‚£ã‚¢å–ææ²è¼‰ã€‚èªçŸ¥åº¦çˆ†ä¸ŠãŒã‚Šã€‚','good');SFX.good();}},
       {tx:'ä»Šã¯å¿™ã—ã„ã®ã§æ–­ã‚‹',ef:'ãƒãƒ£ãƒ³ã‚¹ã‚’é€ƒã™',fn:function(){notify('æ¬¡ã®æ©Ÿä¼šã‚’å¾…ã¨ã†â€¦','warn');}}]},
  {id:'study',ic:'ğŸ“š',ty:'success',tt:'ç¤¾å†…å‹‰å¼·ä¼šãŒç››ã‚Šä¸ŠãŒã£ãŸï¼',
   ds:'è‡ªä¸»çš„ãªå‹‰å¼·ä¼šãŒå§‹ã¾ã‚Šã€å…¨ç¤¾å“¡ãŒç†±å¿ƒã«å‚åŠ ã—ã¦ã„ã¾ã™ã€‚',
   ch:[{tx:'æ¥­å‹™æ™‚é–“å†…ã§ã‚„ã‚ã†',ef:'å…¨ã‚¹ã‚­ãƒ«+3ã€ãƒ¡ãƒ³ã‚¿ãƒ«+10',fn:function(){G.s.staff.forEach(function(s){Object.keys(s.stats).forEach(function(k){s.stats[k]=clamp(s.stats[k]+3,0,99);});s.mental=clamp(s.mental+10,0,100);});notify('å…¨ç¤¾å“¡ã‚¹ã‚­ãƒ«UPï¼ãƒ¡ãƒ³ã‚¿ãƒ«å›å¾©ï¼','ok');SFX.good();}}]},
  {id:'nft',ic:'ğŸ¨',ty:'warn',tt:'NFTæ¡ˆä»¶ã®ã‚ªãƒ•ã‚¡ãƒ¼',
   ds:'ã€Œå ±é…¬ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã§ãŠæ”¯æ‰•ã„ã—ã¾ã™ï¼æœªæ¥ã®ä¾¡å€¤ã«æœŸå¾…ã‚’ï¼ã€',
   ch:[{tx:'å—ã‘ã‚‹ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ã§ï¼‰',ef:'åå…¥ã‚ã‚‹ãŒç‚ä¸Š+15',fn:function(){G.s.money+=150000;G.s.fire=clamp(G.s.fire+15,0,100);addLog('NFTæ¡ˆä»¶å—æ³¨ã€‚ãƒˆãƒ¼ã‚¯ãƒ³å—ã‘å–ã‚Šã€‚å°†æ¥ãŒå¿ƒé…ã€‚','warn');}},
       {tx:'ç¾é‡‘æ‰•ã„ãªã‚‰å—ã‘ã‚‹',ef:'æ™®é€šã®æ¡ˆä»¶ã¨ã—ã¦å—æ³¨',fn:function(){G.s.money+=200000;addLog('ç¾é‡‘æ‰•ã„äº¤æ¸‰æˆåŠŸã€‚','good');}},
       {tx:'æ–­ã‚‹ï¼ˆæ­£è§£ã®äºˆæ„Ÿï¼‰',ef:'å®‰å…¨ã€‚ç‚ä¸Šå›é¿',fn:function(){notify('NFTæ¡ˆä»¶ã‚’æ–­ã£ãŸã€‚æ­£è§£ã‹ã‚‚ã€‚','ok');}}]},
  {id:'ai_wave',ic:'ğŸ¤–',ty:'warn',tt:'AIã®æ³¢ãŒæ¥ãŸâ€¦',
   ds:'ã€ŒAIã§ãƒ‡ã‚¶ã‚¤ãƒ³ã§ãã‚‹ã‚‰ã—ã„ã§ã™ã­ã€‚å¾¡ç¤¾ã«é ¼ã‚€å¿…è¦ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€',
   ch:[{tx:'AIã‚’ç©æ¥µæ´»ç”¨ã™ã‚‹æˆ¦ç•¥ã¸',ef:'AIæ´»ç”¨æŠ€è¡“è§£æ”¾',fn:function(){G.s.tech['ai_design']=true;notify('AIæ´»ç”¨ã‚¹ã‚¿ã‚¸ã‚ªã¨ã—ã¦é€²åŒ–å®£è¨€ï¼','ok');addLog('AIæ´»ç”¨æ–¹é‡ã‚’ç™ºè¡¨ã€‚','good');}},
       {tx:'äººé–“ã®ä¾¡å€¤ã‚’ä¸å¯§ã«èª¬æ˜ã™ã‚‹',ef:'è©•åˆ¤+5',fn:function(){G.s.rep=clamp(G.s.rep+5,0,100);addLog('äººé–“ãƒ‡ã‚¶ã‚¤ãƒ³ã®ä¾¡å€¤ã‚’èª¬æ˜ã€‚å…±æ„Ÿã‚’å¾—ãŸã€‚','good');}}]},
  {id:'overtime',ic:'ğŸ˜«',ty:'warn',tt:'æ®‹æ¥­ãŒç¶šã„ã¦ã„ã‚‹â€¦',
   ds:'ç· ã‚åˆ‡ã‚ŠãŒé‡ãªã‚Šã€ç¤¾å“¡ã®æ®‹æ¥­ãŒ3é€±é–“ç¶šã„ã¦ã„ã¾ã™ã€‚',
   ch:[{tx:'æ®‹æ¥­åˆ¶é™ã‚’è¨­ã‘ã‚‹',ef:'ãƒ–ãƒ©ãƒƒã‚¯-20ã€ãƒ¡ãƒ³ã‚¿ãƒ«+10',fn:function(){G.s.black=clamp(G.s.black-20,0,100);G.s.staff.forEach(function(s){s.mental=clamp(s.mental+10,0,100);});addLog('æ®‹æ¥­åˆ¶é™è¨­å®šã€‚ãƒ–ãƒ©ãƒƒã‚¯åº¦ä½ä¸‹ã€‚','good');}},
       {tx:'æ®‹æ¥­ä»£ã‚’å‡ºã—ã¦ç¶™ç¶š',ef:'-30ä¸‡å††ã€ç¤¾å“¡ã¯ç–²å¼Š',fn:function(){G.s.money-=300000;addLog('æ®‹æ¥­ä»£ã‚’æ”¯æ‰•ã£ã¦ç¶™ç¶šã€‚ç¤¾å“¡ã¯ç–²å¼Šã€‚','bad');}}]},
  {id:'birthday',ic:'ğŸ‚',ty:'success',tt:'ç¤¾å“¡ã®èª•ç”Ÿæ—¥ï¼',
   ds:'ä»Šæ—¥ã¯å¤§åˆ‡ãªç¤¾å“¡ã®èª•ç”Ÿæ—¥ã§ã™ã€‚',
   ch:[{tx:'ã‚µãƒ—ãƒ©ã‚¤ã‚ºãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼',ef:'å…¨ãƒ¡ãƒ³ã‚¿ãƒ«+15',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental+15,0,100);});notify('ã‚µãƒ—ãƒ©ã‚¤ã‚ºæˆåŠŸï¼å…¨å“¡ãƒãƒƒãƒ”ãƒ¼ï¼','ok');SFX.coin();}}]},
  {id:'big_deal',ic:'ğŸ¯',ty:'success',tt:'å¤§å‹æ¡ˆä»¶ã®ç›´æ¥ã‚ªãƒ•ã‚¡ãƒ¼ï¼',
   ds:'æ¥­ç•Œã®æœ‰åä¼æ¥­ã‹ã‚‰ç›´æ¥æŒ‡åã§ã‚ªãƒ•ã‚¡ãƒ¼ãŒå±Šãã¾ã—ãŸã€‚',
   ch:[{tx:'å—ã‘ã‚‹ï¼',ef:'+200ã€œ500ä¸‡å††',fn:function(){var e=2000000+ri(0,3000000);G.s.money+=e;G.s.rep=clamp(G.s.rep+10,0,100);addLog('å¤§å‹ç›´æ¥æ¡ˆä»¶ï¼'+fY(e)+'ï¼','good');SFX.fanfare();}},
       {tx:'ã‚­ãƒ£ãƒ‘ãŒå¿ƒé…ãªã®ã§æ–­ã‚‹',ef:'è©•åˆ¤-2',fn:function(){G.s.rep=clamp(G.s.rep-2,0,100);addLog('å¤§å‹æ¡ˆä»¶ã‚’æ–­ã£ãŸã€‚','');}}]},
  {id:'veteran',ic:'ğŸ‘´',ty:'success',tt:'æ¥­ç•Œã®é‡é®ã‹ã‚‰ã‚¢ãƒ‰ãƒã‚¤ã‚¹',
   ds:'è‘—åãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã‹ã‚‰ç›´æ¥ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚‚ã‚‰ãˆã‚‹æ©Ÿä¼šãŒè¨ªã‚Œã¾ã—ãŸã€‚',
   ch:[{tx:'å…¨ç¤¾å“¡ã§è©±ã‚’èã',ef:'å…¨ã‚¹ã‚­ãƒ«+5ã€è©•åˆ¤+8',fn:function(){G.s.staff.forEach(function(s){Object.keys(s.stats).forEach(function(k){s.stats[k]=clamp(s.stats[k]+5,0,99);});});G.s.rep=clamp(G.s.rep+8,0,100);addLog('é‡é®ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã§å…¨å“¡æˆé•·ï¼','good');SFX.good();}}]},
  {id:'note_viral',ic:'âœï¸',ty:'success',tt:'ç¤¾å“¡ã®noteãŒãƒã‚ºã£ãŸï¼',
   ds:'ç¤¾å“¡ãŒæ›¸ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³è«–ã®noteãŒãƒ“ã‚¸ãƒã‚¹ç•Œéšˆã§ãƒã‚ºã£ã¦ã„ã¾ã™ã€‚',
   ch:[{tx:'ç©æ¥µçš„ã«ã‚·ã‚§ã‚¢',ef:'SNS+600ã€æ¡ç”¨å•ã„åˆã‚ã›æ€¥å¢—',fn:function(){G.s.sns+=600;G.s.rep=clamp(G.s.rep+12,0,100);addLog('noteè¨˜äº‹ãƒã‚ºï¼æ¡ç”¨å•ã„åˆã‚ã›æ€¥å¢—ï¼','good');SFX.good();}},
       {tx:'é™ã‹ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—',ef:'SNS+200',fn:function(){G.s.sns+=200;G.s.rep=clamp(G.s.rep+5,0,100);addLog('noteè¨˜äº‹ã§èªçŸ¥åº¦UPã€‚','good');}}]},
  {id:'cash_crunch',ic:'ğŸ’¸',ty:'danger',tt:'è³‡é‡‘ã‚·ãƒ§ãƒ¼ãƒˆå¯¸å‰ï¼',
   ds:'å…¥é‡‘é…å»¶ãŒé‡ãªã‚Šã€å£åº§æ®‹é«˜ãŒå±é™ºåŸŸã«é”ã—ã¾ã—ãŸã€‚',
   ch:[{tx:'ç·Šæ€¥ã§å®‰ã„æ¡ˆä»¶ã‚’å—ã‘ã‚‹',ef:'+10ã€œ20ä¸‡å††',fn:function(){var e=100000+ri(0,100000);G.s.money+=e;addLog('ç·Šæ€¥æ¡ˆä»¶ã§'+fY(e)+'ã‚’ç¢ºä¿','good');}},
       {tx:'éŠ€è¡Œã«èè³‡ã‚’ç›¸è«‡ã™ã‚‹',ef:'+100ä¸‡å††ï¼ˆå€Ÿå…¥ï¼‰',fn:function(){G.s.money+=1000000;G.s.black=clamp(G.s.black+5,0,100);addLog('éŠ€è¡Œèè³‡100ä¸‡å††ç¢ºä¿ã€‚è¿”æ¸ˆãŒå¿…è¦ã€‚','warn');}}]},
  // â”€â”€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ•ã‚§ãƒ¼ã‚ºå°‚ç”¨ã‚¤ãƒ™ãƒ³ãƒˆ â”€â”€
  // â”€â”€â”€ è¿½åŠ ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒ•ã‚§ãƒ¼ã‚º0-3ï¼‰â”€â”€â”€
  {id:'design_award',ic:'ğŸ†',ty:'success',tt:'ãƒ‡ã‚¶ã‚¤ãƒ³è³ã«ãƒãƒŸãƒãƒ¼ãƒˆ',
   ds:'å¤§æ‰‹ãƒ‡ã‚¶ã‚¤ãƒ³èªŒã®ã‚¢ãƒ¯ãƒ¼ãƒ‰ã«ãƒãƒŸãƒãƒ¼ãƒˆã•ã‚ŒãŸã€‚å—è³ã™ã‚Œã°è©•åˆ¤ãŒå¤§ããä¸ŠãŒã‚‹ã€‚',
   ch:[{tx:'æ¸¾èº«ã®ä½œå“ã§å¿œå‹Ÿã™ã‚‹',ef:'è©•åˆ¤+15ã€SNS+3000ã€å—è³+1',fn:function(){G.s.rep=clamp(G.s.rep+15,0,100);G.s.sns+=3000;G.s.awards=(G.s.awards||0)+1;addLog('ğŸ† ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¢ãƒ¯ãƒ¼ãƒ‰å—è³ï¼è©•åˆ¤æ€¥ä¸Šæ˜‡ï¼','good');SFX.fanfare();}},
       {tx:'ä»Šå›ã¯ãƒ‘ã‚¹',ef:'å¤‰åŒ–ãªã—',fn:function(){addLog('ä»Šå›ã¯è¦‹é€ã‚Šã€‚','sys');}}]},
  {id:'remote_request',ic:'ğŸ ',ty:'warn',tt:'å…¨å“¡ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯å¸Œæœ›ãŒå‡ºãŸ',
   ds:'ã‚¹ã‚¿ãƒƒãƒ•å…¨å“¡ãŒã€Œé€±3ãƒªãƒ¢ãƒ¼ãƒˆã«ã—ã¦ã»ã—ã„ã€ã¨è¨€ã£ã¦ããŸã€‚ã©ã†ã™ã‚‹ï¼Ÿ',
   ch:[{tx:'å…¨é¢ãƒªãƒ¢ãƒ¼ãƒˆOK',ef:'å…¨ãƒ¡ãƒ³ã‚¿ãƒ«+15ã€è©•åˆ¤-5',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental+15,0,100);});G.s.rep=clamp(G.s.rep-5,0,100);addLog('ãƒªãƒ¢ãƒ¼ãƒˆå…¨é¢OKã€‚ã‚¹ã‚¿ãƒƒãƒ•å–œã¶ã€‚','good');}},
       {tx:'é€±2ãƒªãƒ¢ãƒ¼ãƒˆã§æŠ˜è¡·æ¡ˆ',ef:'å…¨ãƒ¡ãƒ³ã‚¿ãƒ«+8',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental+8,0,100);});addLog('é€±2ãƒªãƒ¢ãƒ¼ãƒˆåˆæ„ã€‚è½ã¡ç€ã„ãŸã€‚','sys');}},
       {tx:'å‡ºç¤¾å¿…é ˆã‚’ç¶­æŒ',ef:'ãƒ¡ãƒ³ã‚¿ãƒ«-8ã€ãƒ–ãƒ©ãƒƒã‚¯+5',fn:function(){G.s.staff.forEach(function(s){s.mental=clamp(s.mental-8,0,100);});G.s.black=clamp(G.s.black+5,0,100);addLog('å‡ºç¤¾å¿…é ˆç¶™ç¶šã€‚ä¸æº€ãŒæºœã¾ã‚Šãã†ã€‚','warn');}}]},
  {id:'big_client',ic:'ğŸ¤',ty:'success',tt:'å¤§æ‰‹ä¼æ¥­ã‹ã‚‰ç›´æ¥æŒ‡åï¼',
   ds:'ä¸Šå ´ä¼æ¥­ã®CMOã‹ã‚‰ç›´æ¥é€£çµ¡ãŒæ¥ãŸã€‚ã€Œãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å…¨ä½“ã‚’ä»»ã›ãŸã„ã€ã¨è¨€ã£ã¦ã„ã‚‹ã€‚',
   ch:[{tx:'å…¨åŠ›ã§å—ã‘ã‚‹',ef:'+500ä¸‡ é›£æ˜“åº¦MAX',fn:function(){G.s.money+=5000000;G.s.totalRev+=5000000;addLog('ğŸ‰ å¤§æ‰‹ãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å—æ³¨ï¼+500ä¸‡ï¼','good');SFX.fanfare();}},
       {tx:'æ¡ä»¶äº¤æ¸‰ã—ã¦å—ã‘ã‚‹',ef:'+350ä¸‡ é›£æ˜“åº¦4',fn:function(){G.s.money+=3500000;G.s.totalRev+=3500000;addLog('å¤§æ‰‹æ¡ˆä»¶ã‚’äº¤æ¸‰ã—ã¦å—æ³¨ã€‚+350ä¸‡ã€‚','good');SFX.good();}},
       {tx:'ä»Šã¯æ–­ã‚‹',ef:'æ©Ÿä¼šæå¤±',fn:function(){addLog('å¤§æ‰‹æ¡ˆä»¶ã‚’æ–­ã£ãŸã€‚','warn');}}]},
  {id:'tool_update',ic:'âš™ï¸',ty:'info',tt:'ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŒå¤§å‹ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ',
   ds:'FigmaãŒå¤§å‹ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã€‚æ–°æ©Ÿèƒ½ã‚’ä½¿ã„ã“ãªã›ã‚Œã°ç”Ÿç”£æ€§UPã€‚æ…£ã‚Œã‚‹ã¾ã§ã¯å°‘ã—å¤§å¤‰ã€‚',
   ch:[{tx:'å…¨ç¤¾å“¡ã§ç¿’å¾—',ef:'å…¨ã‚¹ã‚­ãƒ«+5',fn:function(){G.s.staff.forEach(function(s){Object.keys(s.stats).forEach(function(k){s.stats[k]=clamp(s.stats[k]+5,0,99);});});addLog('æ–°ãƒ„ãƒ¼ãƒ«æ©Ÿèƒ½ç¿’å¾—å®Œäº†ï¼å…¨å“¡ã‚¹ã‚­ãƒ«UPï¼','good');}},
       {tx:'ä¸»è¦ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿',ef:'é¸æŠœã‚¹ã‚­ãƒ«+8',fn:function(){G.s.staff.slice(0,Math.min(3,G.s.staff.length)).forEach(function(s){Object.keys(s.stats).forEach(function(k){s.stats[k]=clamp(s.stats[k]+8,0,99);});});addLog('ä¸»è¦ã‚¹ã‚¿ãƒƒãƒ•ãŒãƒ„ãƒ¼ãƒ«æ–°æ©Ÿèƒ½ã‚’ç¿’å¾—ã€‚','good');}},
       {tx:'æ§˜å­è¦‹',ef:'å¤‰åŒ–ãªã—',fn:function(){addLog('æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ç¶šã‘ã‚‹ã€‚','sys');}}]},
  {id:'investor_meet',ic:'ğŸ’¼',ty:'info',tt:'ã‚¨ãƒ³ã‚¸ã‚§ãƒ«æŠ•è³‡å®¶ã¨é£Ÿäº‹',
   ds:'çŸ¥äººã®ç´¹ä»‹ã§ã‚¨ãƒ³ã‚¸ã‚§ãƒ«æŠ•è³‡å®¶ã¨ä¼šé£Ÿã™ã‚‹ã“ã¨ã«ãªã£ãŸã€‚å‡ºè³‡ã®è©±ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚',
   ch:[{tx:'ç©æ¥µçš„ã«ã‚¢ãƒ”ãƒ¼ãƒ«',ef:'30%ã§å‡ºè³‡+300ä¸‡',fn:function(){if(Math.random()<0.3){G.s.money+=3000000;G.s.totalRev+=3000000;addLog('ğŸ‰ ã‚¨ãƒ³ã‚¸ã‚§ãƒ«ã‹ã‚‰300ä¸‡å††å‡ºè³‡ï¼','good');SFX.fanfare();}else{G.s.rep=clamp(G.s.rep+3,0,100);addLog('è‰¯ã„è©±ã—åˆã„ã€‚è©•åˆ¤+3ã€‚','good');}}},
       {tx:'ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®æƒ³ã„ã‚’èªã‚‹',ef:'è©•åˆ¤+5ã€SNS+1000',fn:function(){G.s.rep=clamp(G.s.rep+5,0,100);G.s.sns+=1000;addLog('ç†±ã„è©±ã—åˆã„ã€‚è©•åˆ¤ã¨SNSãŒä¸ŠãŒã£ãŸã€‚','good');}},
       {tx:'æ¡ä»¶ãŒåˆã‚ãšæ–­ã‚‹',ef:'å¤‰åŒ–ãªã—',fn:function(){addLog('æ¡ä»¶ãŒåˆã‚ãšæ–­ã£ãŸã€‚','warn');}}]},
  {id:'freelance_collab',ic:'ğŸ¤œ',ty:'info',tt:'ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã‚³ãƒ©ãƒœä¾é ¼',
   ds:'æœ‰åãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã‹ã‚‰ã€Œä¸€ç·’ã«ä»•äº‹ã—ã¾ã›ã‚“ã‹ã€ã¨å£°ãŒã‹ã‹ã£ãŸã€‚',
   ch:[{tx:'æ¥­å‹™å§”è¨—ã§ä¾é ¼',ef:'-20ä¸‡ã€æ¡ˆä»¶å—æ³¨åŠ›UP',fn:function(){G.s.money-=200000;G.s.rep=clamp(G.s.rep+8,0,100);G.s.sns+=500;addLog('ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¨ã‚³ãƒ©ãƒœï¼è©•åˆ¤+8ã€SNS+500ï¼','good');SFX.good();}},
       {tx:'æ¡ç”¨ã‚’æ‰“è¨ºã™ã‚‹',ef:'æ¡ç”¨å€™è£œã«è¿½åŠ ',fn:function(){G.genHire();addLog('ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã‚’æ¡ç”¨å€™è£œã¨ã—ã¦è¿½åŠ ã—ãŸã€‚','good');}},
       {tx:'ä»Šã¯é›£ã—ã„',ef:'å¤‰åŒ–ãªã—',fn:function(){addLog('ä»Šå›ã¯è¦‹é€ã‚Šã€‚','sys');}}]},

  {id:'vc_offer',ic:'ğŸ’°',ty:'success',tt:'VCã‹ã‚‰æŠ•è³‡ã‚ªãƒ•ã‚¡ãƒ¼ï¼',
   ds:'ã‚·ãƒªãƒ¼ã‚ºAã®æŠ•è³‡å®¶ãŒã€Œå¾¡ç¤¾ã«æŠ•è³‡ã—ãŸã„ã€ã¨é€£çµ¡ã—ã¦ãã¾ã—ãŸã€‚\nè©•ä¾¡é¡50å„„å††ã€å‡ºè³‡5å„„å††ã®ææ¡ˆã§ã™ã€‚',
   ch:[{tx:'å—ã‘å…¥ã‚Œã‚‹ï¼ˆ5å„„èª¿é”ï¼‰',ef:'+5å„„å††',fn:function(){if(G.s.phase>=4){G.s.money+=500000000;G.s.funding+=500000000;addLog('ğŸ‰ ã‚·ãƒªãƒ¼ã‚ºA 5å„„å††èª¿é”æˆåŠŸï¼','good');SFX.fanfare();notify('ğŸ’° ã‚·ãƒªãƒ¼ã‚ºA 5å„„å††èª¿é”ï¼','ok',5000);}else{notify('ã¾ã ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ãªã„','warn');}}},
       {tx:'æ¡ä»¶ã‚’äº¤æ¸‰ã™ã‚‹ï¼ˆ+1å„„ï¼‰',ef:'+6å„„å††',fn:function(){if(G.s.phase>=4){G.s.money+=600000000;G.s.funding+=600000000;addLog('äº¤æ¸‰æˆåŠŸï¼ã‚·ãƒªãƒ¼ã‚ºA 6å„„å††èª¿é”ï¼','good');SFX.fanfare();}else{notify('ã¾ã äº¤æ¸‰ã§ãã‚‹ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ãªã„','warn');}}},
       {tx:'è¦‹é€ã‚‹ï¼ˆã¾ã æ—©ã„ï¼‰',ef:'æ©Ÿä¼šæå¤±',fn:function(){notify('æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‹è² ã—ã‚ˆã†','warn');}}]},
  {id:'dau_spike',ic:'ğŸ“ˆ',ty:'success',tt:'DAUãŒæ€¥ä¸Šæ˜‡ï¼',
   ds:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒSNSã§çªç„¶ãƒã‚ºã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒçˆ†å¢—ã—ã¦ã„ã¾ã™ã€‚\nã‚µãƒ¼ãƒãƒ¼ãŒæ‚²é³´ã‚’ä¸Šã’ã¦ã„ã¾ã™â€¦',
   ch:[{tx:'ã‚¤ãƒ³ãƒ•ãƒ©å³å¢—å¼·ï¼ˆ-3000ä¸‡ï¼‰',ef:'DAUÃ—3',fn:function(){if(G.s.dau>0){G.s.dau=Math.round(G.s.dau*3);G.s.money-=30000000;addLog('ã‚¤ãƒ³ãƒ•ãƒ©å¢—å¼·ã§DAUçˆ†å¢—ï¼','good');SFX.good();}else{notify('ã¾ã ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ãªã„','warn');}}},
       {tx:'ç¯€ç´„ã—ã¦è€ãˆã‚‹',ef:'DAUÃ—1.5ã€è©•åˆ¤-5',fn:function(){if(G.s.dau>0){G.s.dau=Math.round(G.s.dau*1.5);G.s.rep=clamp(G.s.rep-5,0,100);addLog('ã‚¤ãƒ³ãƒ•ãƒ©ç¯€ç´„ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå°‘ã—é›¢è„±ã€‚','warn');}}}]},
  {id:'competitor_entry',ic:'âš”ï¸',ty:'danger',tt:'å¤§æ‰‹ãŒé¡ä¼¼ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ãƒªãƒªãƒ¼ã‚¹ï¼',
   ds:'GAFAã‚¯ãƒ©ã‚¹ã®ä¼æ¥­ãŒã€Œã†ã¡ã‚‚ã‚„ã‚Šã¾ã™ã€ã¨ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã€‚\nã€Œã“ã‚Œçµ‚ã‚ã‚Šã˜ã‚ƒãªã„ã§ã™ã‹â€¦ã€ã¨Slackã«æµã‚ŒãŸã€‚',
   ch:[{tx:'å·®åˆ¥åŒ–ã‚’å¾¹åº•å¼·åŒ–ã™ã‚‹',ef:'è©•åˆ¤+10ã€-5000ä¸‡',fn:function(){G.s.rep=clamp(G.s.rep+10,0,100);G.s.money-=50000000;addLog('å·®åˆ¥åŒ–æˆ¦ç•¥ã«å…¨åŠ›æŠ•è³‡ã€‚ç‹¬è‡ªè·¯ç·šã§å¯¾æŠ—ã€‚','good');}},
       {tx:'ãƒ‹ãƒƒãƒç‰¹åŒ–ã§ç”Ÿãæ®‹ã‚‹',ef:'è¦æ¨¡ç¸®å°ã€ãƒãƒ£ãƒ¼ãƒ³ä½ä¸‹',fn:function(){if(G.s.dau>0)G.s.dau=Math.round(G.s.dau*0.7);G.s.rep=clamp(G.s.rep+5,0,100);addLog('ãƒ‹ãƒƒãƒç‰¹åŒ–ã€‚ã‚³ã‚¢ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å›ºã‚ã‚‹ã€‚','good');}},
       {tx:'è²·åææ¡ˆã‚’å—ã‘å…¥ã‚Œã‚‹',ef:'+50å„„å††ã§M&A EXIT',fn:function(){G.s.money+=5000000000;addLog('ç«¶åˆã¨ã®çµ±åˆæˆç«‹ï¼+50å„„å††ï¼','good');SFX.fanfare();notify('ğŸ¤ M&Aæˆç«‹ï¼50å„„å††ï¼','ok',6000);}}]},
  {id:'talent_poach',ic:'ğŸƒ',ty:'danger',tt:'å„ªç§€ãªç¤¾å“¡ãŒå¼•ãæŠœã‹ã‚Œãã†ï¼',
   ds:'GAFAãŒã€Œå¹´å3å€ã‚ªãƒ•ã‚¡ãƒ¼ã—ã¾ã™ã€ã¨ã†ã¡ã®ç¤¾å“¡ã«ç›´æ¥é€£çµ¡ã—ã¦ãã¾ã—ãŸã€‚\nã€Œã©ã†ã—ã‚ˆã†ã‹è¿·ã£ã¦ã¾ã™ã€ã¨å ±å‘ŠãŒæ¥ã¦ã„ã¾ã™ã€‚',
   ch:[{tx:'ã‚¹ãƒˆãƒƒã‚¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸',ef:'ä¿¡é ¼UPã€å¼•ãæ­¢ã‚æˆåŠŸ',fn:function(){var cost=Math.max(1000000,Math.round(G.s.totalRev*0.005));G.s.money-=cost;notify('SOä»˜ä¸ã§å¼•ãæ­¢ã‚æˆåŠŸï¼','ok');addLog('ã‚¹ãƒˆãƒƒã‚¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ä¸ã€‚å¼•ãæ­¢ã‚æˆåŠŸã€‚','good');}},
       {tx:'çµ¦ä¸ã‚’å¤§å¹…UP',ef:'-æœˆçµ¦+50ä¸‡ã€å¼•ãæ­¢ã‚',fn:function(){var ns=G.s.staff.filter(function(s){return!s.isSelf;});if(ns.length>0){var top=ns.sort(function(a,b){return(b.stats.logic+b.stats.ui)-(a.stats.logic+a.stats.ui);})[0];top.sal+=500000;G.s.money-=3000000;notify(top.nm+'ã®çµ¦ä¸UPã§å¼•ãæ­¢ã‚ï¼','ok');}}}]},
  {id:'media_unicorn',ic:'ğŸ“º',ty:'success',tt:'ã€Œæ¬¡ã®ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³å€™è£œã€ç‰¹é›†ï¼',
   ds:'æ—¥çµŒãƒ»TechCrunchãƒ»Forbesã‹ã‚‰\nã€Œæ¬¡ã®ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³å€™è£œ10ç¤¾ã€ã«é¸å‡ºã•ã‚Œã¾ã—ãŸï¼',
   ch:[{tx:'ç©æ¥µçš„ã«éœ²å‡ºã™ã‚‹',ef:'è©•åˆ¤+30ã€DAU+10ä¸‡',fn:function(){G.s.rep=clamp(G.s.rep+30,0,100);if(G.s.dau>0)G.s.dau+=100000;G.s.sns+=10000;addLog('ãƒ¡ãƒ‡ã‚£ã‚¢ç‰¹é›†ï¼DAU+10ä¸‡ã€è©•åˆ¤çˆ†ä¸ŠãŒã‚Šï¼','good');SFX.fanfare();}},
       {tx:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§èªã‚‰ã›ã‚‹',ef:'è©•åˆ¤+12ã€DAU+2ä¸‡',fn:function(){G.s.rep=clamp(G.s.rep+12,0,100);if(G.s.dau>0)G.s.dau+=20000;addLog('ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æˆé•·ãŒè©•ä¾¡ã•ã‚ŒãŸã€‚','good');}}]},
];
var TECHS=[
  {row:'åŸºç¤æŠ€è¡“',nodes:[
    {id:'figma_basic',  nm:'FigmaåŸºç¤',      ic:'ğŸ¨',cost:0,      req:[],                      ef:'+å“è³ª5%',  desc:'åŸºæœ¬ãƒ„ãƒ¼ãƒ«ï¼ˆç¿’å¾—æ¸ˆã¿ï¼‰'},
    {id:'design_system',nm:'ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ',ic:'ğŸ§©',cost:300000, req:['figma_basic'],          ef:'+å“è³ª10%', desc:'ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç®¡ç†ã§å“è³ªå®‰å®š'},
    {id:'ux_research',  nm:'UXãƒªã‚µãƒ¼ãƒ',      ic:'ğŸ”¬',cost:200000, req:['figma_basic'],          ef:'+UIå“è³ª15%',desc:'UXãƒ»IAè¨­è¨ˆã‚’ç¿’å¾—'},
  ]},
  {row:'å¿œç”¨æŠ€è¡“',nodes:[
    {id:'motion',       nm:'ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³',       ic:'ğŸ¬',cost:500000, req:['design_system'],       ef:'+è©•åˆ¤5',   desc:'AfterEffectsãƒ»Lottie'},
    {id:'branding',     nm:'ãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥',     ic:'ğŸ’',cost:800000, req:['design_system','ux_research'],ef:'å˜ä¾¡UP',desc:'ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æ¡ˆä»¶è§£æ”¾'},
    {id:'three_d',      nm:'3Dãƒ‡ã‚¶ã‚¤ãƒ³',       ic:'ğŸŒ',cost:600000, req:['motion'],               ef:'+å·®åˆ¥åŒ–',  desc:'Splineãƒ»Blenderå¯¾å¿œ'},
  ]},
  {row:'ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆæŠ€è¡“',nodes:[
    {id:'ai_design',    nm:'AIãƒ‡ã‚¶ã‚¤ãƒ³',       ic:'ğŸ¤–',cost:1000000,req:['branding'],             ef:'AIæ¡ˆä»¶è§£æ”¾',desc:'ç”ŸæˆAIæ´»ç”¨ãƒ»AIãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè§£æ”¾'},
    {id:'global',       nm:'ã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹',   ic:'ğŸŒ',cost:3000000,req:['branding','ai_design'], ef:'ä¸–ç•Œã‚¨ãƒ³ãƒ‰', desc:'æµ·å¤–ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ä¸–ç•Œã‚¨ãƒ³ãƒ‰è§£æ”¾'},
  ]},
  {row:'ğŸš€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæŠ€è¡“',nodes:[
    {id:'product_mgmt', nm:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæˆ¦ç•¥',   ic:'ğŸ¯',cost:5000000, req:['ai_design'],           ef:'è‡ªç¤¾SaaSè§£æ”¾ãƒ»DAUé–‹å§‹',desc:'OKRãƒ»PMFãƒ»ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—è¨­è¨ˆã€‚Phase4ã¸è§£æ”¾'},
    {id:'growth_hack',  nm:'ã‚°ãƒ­ãƒ¼ã‚¹ãƒãƒƒã‚¯',   ic:'ğŸ“ˆ',cost:4000000, req:['product_mgmt'],        ef:'DAUæˆé•·+30%',         desc:'A/Bãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãƒ»ãƒã‚¤ãƒ©ãƒ«ãƒ«ãƒ¼ãƒ—'},
    {id:'data_infra',   nm:'ãƒ‡ãƒ¼ã‚¿åŸºç›¤',       ic:'ğŸ“Š',cost:6000000, req:['product_mgmt'],        ef:'ARRç²¾åº¦UPãƒ»æ„æ€æ±ºå®šåŠ é€Ÿ',desc:'BigQueryãƒ»BIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»ãƒ•ã‚¡ãƒãƒ«åˆ†æ'},
  ]},
  {row:'ğŸŒ ã‚¹ã‚±ãƒ¼ãƒ«æŠ€è¡“',nodes:[
    {id:'platform_biz', nm:'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŒ–',ic:'ğŸŒ',cost:15000000,req:['growth_hack','data_infra'],ef:'Phase5ãƒ»M&Aè§£æ”¾',desc:'APIã‚¨ã‚³ãƒãƒŸãƒ¼ãƒ»ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹å±•é–‹'},
    {id:'corp_gov',     nm:'ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚¬ãƒãƒŠãƒ³ã‚¹',ic:'âš–ï¸',cost:20000000,req:['platform_biz'],   ef:'IPOã‚¨ãƒ³ãƒ‰è§£æ”¾',       desc:'å–ç· å½¹ä¼šãƒ»ç›£æŸ»ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ•´å‚™'},
    {id:'global_expand',nm:'ã‚°ãƒ­ãƒ¼ãƒãƒ«æœ¬ç¤¾',   ic:'ğŸŒ',cost:30000000,req:['platform_biz','data_infra'],ef:'ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰',desc:'NYãƒ»LDNãƒ»SGã«ã‚ªãƒ•ã‚£ã‚¹å±•é–‹'},
  ]},
];
var OFFICES=[
  {nm:'ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°',    ic:'â˜•',  cost:0,          rp:0,  mc:0,         desc:'2ç•³ã®ã‚¹ãƒšãƒ¼ã‚¹ã€‚å®¶è³ƒ0å††ã€‚ã§ã‚‚é›†ä¸­ã§ããªã„ã€‚'},
  {nm:'æ¸‹è°·ã‚ªãƒ•ã‚£ã‚¹',    ic:'ğŸ™ï¸',cost:2000000,   rp:10, mc:300000,    desc:'æ¸‹è°·ã®å°ã•ãªã‚ªãƒ•ã‚£ã‚¹ã€‚æ¡ç”¨åŠ›UPã€‚å®¶è³ƒ30ä¸‡/æœˆã€‚'},
  {nm:'è¡¨å‚é“ã‚ªãƒ•ã‚£ã‚¹',  ic:'ğŸŒ¿',  cost:8000000,   rp:25, mc:800000,    desc:'æ´—ç·´ã•ã‚ŒãŸã‚ªãƒ•ã‚£ã‚¹ã€‚æ¡ˆä»¶å˜ä¾¡UPã€‚å®¶è³ƒ80ä¸‡/æœˆã€‚'},
  {nm:'ä¸–ç•Œã‚¹ã‚¿ã‚¸ã‚ª',    ic:'ğŸŒ',  cost:30000000,  rp:60, mc:3000000,   desc:'NYãƒ»LDNãƒ»TOKYOã«ã‚ªãƒ•ã‚£ã‚¹ã€‚ä¸–ç•Œã‚¨ãƒ³ãƒ‰ç¢ºå®šã€‚'},
  {nm:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæœ¬ç¤¾',  ic:'ğŸš€',  cost:100000000, rp:75, mc:10000000,  desc:'èµ¤å‚ã®æœ¬ç¤¾ãƒ“ãƒ«ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­ã®è¨¼ã€‚DAUæ€¥åŠ é€Ÿã€‚'},
  {nm:'ãƒ†ãƒƒã‚¯ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹', ic:'ğŸ¢',  cost:500000000, rp:90, mc:40000000,  desc:'å…­æœ¬æœ¨Hillsç´šã€‚ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¸å›½ã®æœ¬æ‹ åœ°ã€‚'},
  {nm:'ã‚°ãƒ­ãƒ¼ãƒãƒ«HQ',    ic:'ğŸŒ',  cost:2000000000,rp:100,mc:150000000, desc:'ä¸–ç•Œ5éƒ½å¸‚ã«åŒæ™‚å±•é–‹ã€‚ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆã®è¨¼æ˜ã€‚'},
];
var OFF_LB=['COWORKING SPACE','SHIBUYA OFFICE','OMOTESANDO OFFICE','GLOBAL STUDIO','PRODUCT HQ','TECH CAMPUS','GLOBAL HQ'];
var HIRE_POOL=[
  {nm:'ç”°ä¸­ ã•ãã‚‰',role:'UIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼',  ic:'ğŸ¨',sal:350000,st:{design:72,speed:80,logic:65,ui:85,comm:60},mental:80,risk:'Xã§ãƒ‡ã‚¶ã‚¤ãƒ³è«–äº‰ã‚’ã‚ˆãã‚„ã‚‹',ph:0},
  {nm:'éˆ´æœ¨ ã‚†ã†ã',role:'ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯', ic:'âœï¸',sal:320000,st:{design:88,speed:55,logic:50,ui:60,comm:70},mental:75,risk:'UIã«ã¯è‹¦æ‰‹æ„è­˜ãŒã‚ã‚‹',ph:0},
  {nm:'å±±ç”° ã‚ãŠã„',role:'PM',            ic:'ğŸ“‹',sal:420000,st:{design:45,speed:70,logic:90,ui:55,comm:92},mental:85,risk:'ä¼šè­°ã‚’å¢—ã‚„ã™å‚¾å‘ãŒã‚ã‚‹',ph:0},
  {nm:'ä½è—¤ ã¯ãª',  role:'UX',            ic:'ğŸ”¬',sal:380000,st:{design:60,speed:60,logic:88,ui:75,comm:78},mental:80,risk:'ã€Œãã‚ŒUIã®è©±ã§ã¯ï¼Ÿã€ã¨è¨€ã„ãŒã¡',ph:0},
  {nm:'ä¼Šè—¤ ã‘ã‚“ãŸ',role:'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',    ic:'ğŸ’»',sal:500000,st:{design:40,speed:92,logic:85,ui:65,comm:60},mental:70,risk:'ã€Œå®Ÿè£…ã§ããªã„ã‚“ã§ã™ã‘ã©ã€ã¨è¨€ã†',ph:1},
  {nm:'æ¸¡è¾º ã¿ãŠ',  role:'ã‚³ãƒ”ãƒ¼ãƒ©ã‚¤ã‚¿ãƒ¼',ic:'âœï¸',sal:300000,st:{design:55,speed:65,logic:72,ui:50,comm:88},mental:82,risk:'è¨€èªåŒ–ã®è¦æ±‚ãƒ¬ãƒ™ãƒ«ãŒé«˜ã„',ph:0},
  {nm:'ä¸­æ‘ ã‚Šã‚‡ã†',role:'ãƒ¢ãƒ¼ã‚·ãƒ§ãƒŠãƒ¼',  ic:'ğŸ¬',sal:450000,st:{design:78,speed:60,logic:55,ui:70,comm:65},mental:78,risk:'ã€Œå‹•ãã§è§£æ±ºã€æ€è€ƒã§è²»ç”¨ãŒã‹ã‹ã‚‹',ph:1},
  {nm:'å°æ— ãªã¤ã¿',role:'ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯', ic:'ğŸ–Œï¸',sal:280000,st:{design:65,speed:70,logic:60,ui:55,comm:55},mental:65,risk:'ã‚»ãƒ³ã‚¹ãŒæ¡ç”¨å¾Œã«åˆ¤æ˜ã™ã‚‹ã‚¿ã‚¤ãƒ—',ph:0},
  {nm:'åŠ è—¤ ã—ã‚“ã‚„',role:'AIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼', ic:'ğŸ¤–',sal:600000,st:{design:60,speed:95,logic:80,ui:75,comm:65},mental:75,risk:'ã€ŒAIã£ã½ã„ã€ã¨è¨€ã‚ã‚Œã‚„ã™ã„',ph:2},
  {nm:'å‰ç”° ãˆã¿',  role:'UIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼', ic:'ğŸ¨',sal:400000,st:{design:80,speed:75,logic:70,ui:92,comm:72},mental:78,risk:'å‰ã®ä¼šç¤¾ã®æ„šç—´ã‚’è¨€ã„ãŒã¡',ph:0},
  {nm:'æ¾æœ¬ ãã‚‰',  role:'UX',            ic:'ğŸ”',sal:440000,st:{design:65,speed:62,logic:91,ui:80,comm:82},mental:83,risk:'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚’å¤šç”¨ã™ã‚‹',ph:1},
  {nm:'äº•ä¸Š ãŸã‘ã‚‹',role:'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',    ic:'âš™ï¸',sal:550000,st:{design:35,speed:88,logic:90,ui:70,comm:68},mental:72,risk:'ãƒ‡ã‚¶ã‚¤ãƒ³ã‚ˆã‚Šå®Ÿè£…ã‚’å„ªå…ˆã™ã‚‹',ph:1},
  {nm:'æœ¨æ‘ ã‚†ãª',  role:'PM',            ic:'ğŸ“Š',sal:480000,st:{design:42,speed:75,logic:88,ui:60,comm:90},mental:88,risk:'ãƒ—ãƒ­ã‚»ã‚¹ã‚’é‡è¦–ã—ã™ãã‚‹',ph:2},
  {nm:'æ— ã¾ã•ã¨',  role:'ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯', ic:'ğŸ¨',sal:360000,st:{design:91,speed:50,logic:48,ui:55,comm:72},mental:70,risk:'å®Œç’§ä¸»ç¾©ã§ç´æœŸãŒå±ãªã„ã“ã¨ãŒã‚ã‚‹',ph:1},
  {nm:'é«˜æ©‹ ã‚Šãª',  role:'UIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼', ic:'ğŸ¨',sal:380000,st:{design:76,speed:72,logic:68,ui:88,comm:75},mental:82,risk:'ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã«ã“ã ã‚ã‚Šã™ãã‚‹',ph:0},
  {nm:'è¿‘è—¤ ã¾ã‚„',  role:'ã‚³ãƒ”ãƒ¼ãƒ©ã‚¤ã‚¿ãƒ¼',ic:'ğŸ“',sal:320000,st:{design:52,speed:68,logic:75,ui:48,comm:92},mental:85,risk:'è¨€è‘‰ã®åŠ›ã‚’ä¿¡ã˜ã™ãã¦ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚’è»½è¦–',ph:0},
  // â”€â”€ ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­ â”€â”€
  {nm:'ç¦ç”° ã‚ãã‚‰',role:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒã‚¸ãƒ£ãƒ¼',ic:'ğŸ¯',sal:900000, st:{design:55,speed:78,logic:95,ui:70,comm:90},mental:82,risk:'ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨€ã£ã¦ãªã„ã€ãŒå£ç™–',ph:4},
  {nm:'è¥¿æ‘ ã²ã‹ã‚Š',role:'ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆ',ic:'ğŸ“Š',sal:1100000,st:{design:30,speed:85,logic:98,ui:50,comm:68},mental:72,risk:'ã€Œçµ±è¨ˆçš„æœ‰æ„æ€§ã€ã—ã‹ä¿¡ã˜ãªã„',ph:4},
  {nm:'å‚æœ¬ ã¨ã‚‚ã‚„',role:'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãƒãƒã‚¸ãƒ£ãƒ¼',ic:'âš™ï¸',sal:1300000,st:{design:35,speed:90,logic:95,ui:62,comm:80},mental:75,risk:'æŠ€è¡“è² å‚µã®è©±ã§ç›®ãŒè¼ã',ph:4},
  {nm:'å²¡ç”° ã‚Œã„ãª',role:'ã‚°ãƒ­ãƒ¼ã‚¹PM',    ic:'ğŸ“ˆ',sal:1000000,st:{design:50,speed:88,logic:90,ui:72,comm:85},mental:78,risk:'A/Bãƒ†ã‚¹ãƒˆã‚’ä½•ã«ã§ã‚‚é©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹',ph:4},
  // â”€â”€ ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  â”€â”€
  {nm:'ç”°æ‘ ã—ã‚‡ã†',role:'BizDev/ã‚¢ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹',ic:'ğŸ¤',sal:1500000,st:{design:45,speed:80,logic:88,ui:55,comm:97},mental:80,risk:'ã€Œã‚¢ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã€ã¨ã„ã†è¨€è‘‰ãŒå¥½ãã™ãã‚‹',ph:5},
  {nm:'æ©‹æœ¬ ã¿ã‚‰ã„',role:'CPO',           ic:'ğŸŒŸ',sal:2200000,st:{design:72,speed:82,logic:95,ui:88,comm:92},mental:85,risk:'å‰è·ã§ã‚‚ä¸€åº¦çµŒå–¶å¤±æ•—çµŒé¨“ã‚ã‚Š',ph:5},
  {nm:'æ‘ç”° ã“ã†ã˜',role:'CFO',           ic:'ğŸ’¹',sal:2800000,st:{design:20,speed:75,logic:99,ui:30,comm:90},mental:80,risk:'æ•°å­—ä»¥å¤–ã«èˆˆå‘³ãŒå®Œå…¨ã«ãªã„',ph:5},
  {nm:'æ¸…æ°´ ãªãŠ',  role:'CTO',           ic:'ğŸ”§',sal:2500000,st:{design:40,speed:95,logic:99,ui:55,comm:78},mental:77,risk:'ãƒ¢ãƒãƒªã‚¹ã‚’ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«ã™ã‚‹ã®ãŒå¤¢',ph:5},
];
var ENDINGS=[
  {id:'world', tt:'ğŸŒ ä¸–ç•Œçš„ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª',col:'var(--gold)',
   cond:function(s){return s.rep>=90&&s.awards>=3&&s.tech['global'];},
   story:'ADCã‚°ãƒ©ãƒ³ãƒ—ãƒªå—è³ã€‚NYã€LDNã€TOKYOã«ã‚ªãƒ•ã‚£ã‚¹ã‚’æ§‹ãˆãŸã€‚\nä¸–ç•Œä¸­ã®ãƒ–ãƒ©ãƒ³ãƒ‰ãŒã€Œã‚ãªãŸã®ä¼šç¤¾ã«é ¼ã¿ãŸã„ã€ã¨è¨€ã£ã¦ãã‚Œã‚‹ã€‚\næœ€åˆã®2ç•³ã®ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚¹ãƒšãƒ¼ã‚¹ãŒã€é ã„æ˜”ã®ã‚ˆã†ã«æ„Ÿã˜ã‚‰ã‚Œã‚‹ã€‚\n\nã™ã¹ã¦ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«è¾¼ã‚ãŸæ„›ã¯ã€ã¡ã‚ƒã‚“ã¨ä¸–ç•Œã«å±Šã„ã¦ã„ãŸã€‚'},
  {id:'product',tt:'ğŸš€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­ã¸ã®è»¢èº«',col:'var(--teal)',
   cond:function(s){return s.tech['ai_design']&&s.projDone>=30&&s.totalRev>=50000000&&!s.tech['product_mgmt'];},
   story:'ã€Œå…ƒãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ã€ã¨ã—ã¦æ¥­ç•Œã«èªã‚Šç¶™ãŒã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚\nè‡ªç¤¾ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®DAUãŒ10ä¸‡ã‚’è¶…ãˆãŸã€‚\nãƒ‡ã‚¶ã‚¤ãƒ³ã®åŠ›ã§ã€ä¸–ç•Œã®ä½¿ã„æ–¹ã‚’å¤‰ãˆã‚‹ã“ã¨ãŒã§ããŸã€‚'},
  {id:'god',   tt:'âœ¨ ç¥ã‚¹ã‚¿ã‚¸ã‚ªï¼ˆBest Endingï¼‰',col:'var(--acc2)',
   cond:function(s){return s.staff.length>=5&&s.staff.every(function(x){return x.mental>=70;})&&s.rep>=75;},
   story:'å°ã•ã„ã‘ã‚Œã©ã€æœ€é«˜ã®ä¼šç¤¾ã€‚\nç¤¾å“¡å…¨å“¡ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãŒé«˜ãã€ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚‚è©•åˆ¤ã‚‚ç”³ã—åˆ†ãªã„ã€‚\nã€Œè¦æ¨¡ã˜ã‚ƒãªã„ã€æ„›ã ã€ã¨ã„ã†çµè«–ã«è‡³ã£ãŸã€‚\n\nèª°ã‚‚ãŒç¾¨ã‚€ã€æœ¬ç‰©ã®ã‚¹ã‚¿ã‚¸ã‚ªã€‚\nç¤¾å“¡å…¨å“¡ãŒã€Œã“ã“ã§åƒã‘ã¦ã‚ˆã‹ã£ãŸã€ã¨è¨€ã£ã¦ãã‚ŒãŸã€‚'},
  {id:'saas_unicorn',tt:'âš¡ SaaSãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³é”æˆï¼',col:'#00d4aa',
   cond:function(s){return (s.dau||0)>=500000&&(s.arr||0)>=2000000000;},
   story:'DAU 50ä¸‡äººã€ARR 20å„„å††ã‚’çªç ´ã€‚\nã‚·ãƒªãƒ¼ã‚ºCã§300å„„å††ã®è³‡é‡‘èª¿é”ã«æˆåŠŸã—ãŸã€‚\nã‹ã¤ã¦ãƒ­ã‚´ã‚’é ¼ã‚“ã§ã„ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒ\nã€Œã†ã¡ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚‚ãŠé¡˜ã„ã§ãã¾ã™ã‹ã€ã¨è¨€ã£ã¦ãã‚‹ã€‚\n\nãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ãŒã€ä¸–ç•Œã‚’å¤‰ãˆã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«ãªã£ãŸã€‚'},
  {id:'platform_empire',tt:'ğŸŒ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¸å›½',col:'#6366f1',
   cond:function(s){return s.tech['platform_biz']&&(s.dau||0)>=2000000&&s.totalRev>=10000000000;},
   story:'100ã‚«å›½ã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãŒä½¿ã†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¸æˆé•·ã€‚\nAppleãƒ»Googleãƒ»Microsoftã‹ã‚‰è²·åã‚ªãƒ•ã‚¡ãƒ¼ãŒå±Šã„ãŸã€‚\n\nã‚ã®2ç•³ã®ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚¹ãƒšãƒ¼ã‚¹ã§\nã€Œã¨ã‚Šã‚ãˆãšååˆºä½œã‚Šã¾ã™ã€ã¨è¨€ã£ã¦ã„ãŸè‡ªåˆ†ã«è¦‹ã›ãŸã„æ™¯è‰²ãŒã‚ã‚‹ã€‚'},
  {id:'acquired',tt:'ğŸ¤ ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆã«è²·åï¼',col:'#f59e0b',
   cond:function(s){return s.tech['platform_biz']&&s.totalRev>=5000000000&&(s.dau||0)>=1000000;},
   story:'GAFAã‚¯ãƒ©ã‚¹ã®ãƒ†ãƒƒã‚¯ä¼æ¥­ã‹ã‚‰ã®è²·åã‚ªãƒ•ã‚¡ãƒ¼ã€‚\né‡‘é¡ã¯éå…¬é–‹ã ãŒã€å…¨ç¤¾å“¡ãŒç”Ÿæ¶¯éŠã‚“ã§æš®ã‚‰ã›ã‚‹é¡ã ã¨ã„ã†ã€‚\n\nã€Œãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ã‚’è²·åã™ã‚‹ã€ã¨ã„ã†å‰ä¾‹ã®ãªã„M&Aã€‚\næ¥­ç•Œã«æ–°ã—ã„æ–‡è„ˆã‚’ä½œã‚‹ã“ã¨ãŒã§ããŸã€‚'},
  {id:'ipo',   tt:'ğŸ“ˆ ä¸Šå ´ï¼',col:'var(--gold)',
   cond:function(s){return s.tech['corp_gov']&&s.totalRev>=100000000&&s.fire<=20&&s.staff.length>=20;},
   story:'æ ªå¼ä¸Šå ´ã‚’æœãŸã—ãŸã€‚\nCFOæ¡ç”¨ãƒ»IRè³‡æ–™ä½œæˆãƒ»æŠ•è³‡å®¶èª¬æ˜ä¼šã€‚\nã€Œãƒ‡ã‚¶ã‚¤ãƒ³ã‚ˆã‚ŠIRè³‡æ–™ã®æ–¹ãŒå¿™ã—ã„ã€ã¨ã„ã†\næƒ³å®šå¤–ã®æ—¥å¸¸ãŒå¾…ã£ã¦ã„ãŸã€‚\n\nãã‚Œã§ã‚‚ã€ä¼šç¤¾ã¯å¤§ãããªã£ãŸã€‚'},
  {id:'burnout_collapse',tt:'ğŸ˜µ æ€¥æˆé•·ã®ä»£å„Ÿ',col:'#ef4444',
   cond:function(s){return (s.dau||0)>=100000&&s.black>=85;},
   story:'DAUã¯å¢—ãˆç¶šã‘ã¦ã„ã‚‹ã®ã«ã€ç¤¾å“¡ãŒæ¬¡ã€…ã¨å€’ã‚Œã¦ã„ãã€‚\nã€Œã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã€ã¨ã€Œã‚¹ã‚±ãƒ¼ãƒ«ã—ãªã„äººé–“ã€ã®é–“ã§\nä¼šç¤¾ã¯å´©å£Šã—ãŸã€‚\n\næˆé•·ã®é€Ÿåº¦ã‚’ã€äººã®é™ç•Œã«åˆã‚ã›ã‚‹ã¹ãã ã£ãŸã€‚'},
  {id:'fire',  tt:'ğŸ”¥ ç‚ä¸Šè§£æ•£â€¦',col:'var(--red)',
   cond:function(s){return s.fire>=90;},
   story:'ç‚ä¸Šãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒé™ç•Œã‚’è¶…ãˆãŸã€‚\nç¤¾é•·ã®Xãƒã‚¹ãƒˆãŒç™ºç«¯ã§æ¥­ç•Œå…¨ä½“ã‚’æ•µã«å›ã—ãŸã€‚\n\nã€Œã‚ã®æ™‚ä»£ã®åé¢æ•™å¸«ã€ã¨ã—ã¦ã€æ¥­ç•Œã«è²¢çŒ®ã™ã‚‹ã“ã¨ãŒã§ããŸã€‚\nã‚ã‚‹æ„å‘³ã€ã“ã‚Œã‚‚ä¸€ã¤ã®ãƒ¬ã‚¬ã‚·ãƒ¼ã€‚'},
  {id:'nft',   tt:'ğŸ¨ NFTã§ç ´æ»…',col:'#e040fb',
   cond:function(s){return s.fire>=60&&s.money<=0;},
   story:'å—ã‘å–ã£ãŸãƒˆãƒ¼ã‚¯ãƒ³ãŒå…¨éƒ¨ç´™ããšã«ãªã£ãŸã€‚\nã€Œä¿¡ã˜ã¦ãŸã®ã«ã€ã¨ã„ã†ãƒ†ãƒ­ãƒƒãƒ—ãŒæµã‚Œç¶šã‘ã‚‹ã€‚\n\næ¬¡ã®ãƒãƒ–ãƒ«ã«ã¯ä¹—ã‚‰ãªã„ã¨èª“ã£ãŸã€‚\nã§ã‚‚ã€ã¾ãŸä¹—ã£ã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œãªã„ã€‚ãã‚ŒãŒäººé–“ã ã‹ã‚‰ã€‚'},
  {id:'broke', tt:'ğŸ’¸ è³‡é‡‘ã‚·ãƒ§ãƒ¼ãƒˆå€’ç”£',col:'var(--red)',
   cond:function(s){return s.money<=-1000000;},
   story:'å£åº§ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã£ãŸã€‚\nã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ã¯ãƒ‡ã‚¶ã‚¤ãƒ³ã‚ˆã‚Šé‡è¦ã¨ã„ã†\næ®‹é…·ãªçœŸå®Ÿã‚’çŸ¥ã£ãŸã€‚\n\næ¬¡ã¯çµŒå–¶ã‚’å­¦ã‚“ã§ã‹ã‚‰å§‹ã‚ã‚ˆã†ã€‚'},
];

// â”€â”€â”€ STATE & LOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var gLog=[];
function addLog(txt,type){gLog.unshift({t:txt,ty:type||'',w:G.s.turn});if(gLog.length>60)gLog.pop();renderLog();}
function renderLog(){var el=q('glog');if(!el)return;var h='';gLog.slice(0,30).forEach(function(l){h+='<div class="le '+l.ty+'"><span class="le-t">T'+l.w+'â–¶</span><span class="le-x">'+esc(l.t)+'</span></div>';});el.innerHTML=h;}
function fireRandom(){var ns=G.s.staff.filter(function(s){return!s.isSelf;});if(!ns.length)return;var s=pick(ns);G.s.actives.forEach(function(p){if(p.asgn===s.id)p.asgn=null;});G.s.staff=G.s.staff.filter(function(x){return x.id!==s.id;});G.s.rep=clamp(G.s.rep-3,0,100);addLog(s.nm+'ãŒé€€è·ã—ãŸã€‚','bad');notify(s.nm+'ãŒé€€è·ã—ã¦ã—ã¾ã„ã¾ã—ãŸâ€¦','danger');SFX.bad();}

// â”€â”€â”€ MAIN GAME OBJECT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var G={
  s:{},
  busy:false,
  curTab:'dash',
  ocId:null,tcId:null,
  revCb:null,

  initState:function(){
    G.s={
      turn:1,money:38000,rep:12,fire:0,sns:84,black:5,
      phase:0,offLevel:0,compName:'å€‹äººäº‹å‹™æ‰€',
      tech:{figma_basic:true},
      totalRev:0,totalProj:0,projDone:0,totalMods:0,awards:0,portfolio:[],
      dau:0,arr:0,burnRate:0,prodStage:0,funding:0,
      staff:[],actives:[],avail:[],hirePool:[],monthNum:0,oAnim:0
    };
    G.staffPos=[];
    G.murmurLog=[];
    G._murmurShown={};
    G._murmurActive={};
    G.aiMode=true;
    G.autoSpeed=2500;
    G.autoTimer=null;
    G.aiMode=false;
    G.aiActionLog=[];
  },

  toggleAuto:function(){/* AUTOå‰Šé™¤æ¸ˆ */},


  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // AI MODE â€” å…¨çµŒå–¶ã‚’AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å§”è­²
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  toggleAI:function(){
    G.aiMode=!G.aiMode;
    var btn=q('btn-ai');
    if(G.aiMode){
      // â”€â”€ ON â”€â”€
      if(btn){
        btn.innerHTML='<span class="ai-dot"></span>ğŸ¤– AIç¨¼åƒä¸­';
        btn.classList.add('on');
      }
      document.body.classList.add('ai-mode');
      var lf=q('ai-live-feed');if(lf){lf.innerHTML='';lf.style.display='flex';}
      var ls=q('ai-live-sh');if(ls)ls.style.display='';
      G.aiThink('BOOT',
        'AI AGENT èµ·å‹•å®Œäº†ã€‚\n' +
        'å…¨çµŒå–¶æ¨©é™ã‚’å§”è­²ã•ã‚Œã¾ã—ãŸã€‚\n' +
        'å—æ³¨ãƒ»æ¡ç”¨ãƒ»é…ç½®ãƒ»æŠ€è¡“ãƒ»ç§»è»¢\n' +
        'å…¨ã¦è‡ªå‹•ã§åˆ¤æ–­ã—ã¾ã™ã€‚');
      addLog('ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ ON â”€ å…¨çµŒå–¶æ¨©é™ã‚’å§”è­²','sys');
      notify('ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ ON â”€ çµŒå–¶ã‚’å…¨ã¦AIã«å§”è­²','ok',4000);
      if(G.curTab==='ai')G.renderAI();
      if(!G.busy)G.scheduleAuto();
    } else {
      // â”€â”€ OFF â”€â”€
      if(btn){
        btn.innerHTML='<span class="ai-dot" style="display:none"></span>ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰';
        btn.classList.remove('on');
      }
      document.body.classList.remove('ai-mode');
      G.aiThink('SHUTDOWN','çµŒå–¶æ¨©é™ã‚’äººé–“ã«è¿”é‚„ã€‚\nãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚');
      var lf2=q('ai-live-feed');if(lf2)lf2.style.display='none';
      var ls2=q('ai-live-sh');if(ls2)ls2.style.display='none';
      addLog('ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ OFF â”€ çµŒå–¶æ¨©ã‚’å–ã‚Šæˆ»ã—ãŸ','sys');
      notify('ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ OFF â”€ çµŒå–¶æ¨©ã‚’å–ã‚Šæˆ»ã—ãŸ','warn',3000);
      if(G.curTab==='ai')G.renderAI();
    }
  },

  // AIæ€è€ƒãƒãƒ–ãƒ«ã‚’ç”»é¢å·¦ä¸‹ã«è¡¨ç¤º
  aiThink:function(tag,msg){
    // ãƒ©ã‚¤ãƒ–ãƒ•ã‚£ãƒ¼ãƒ‰ï¼ˆAIã‚¿ãƒ–å†…ï¼‰ã«è¡¨ç¤º
    var feed=q('ai-live-feed');
    if(feed){
      var sh=q('ai-live-sh');if(sh)sh.style.display='';
      feed.style.display='flex';
      var div=document.createElement('div');
      div.className='ai-bubble';
      div.style.animation='bubbleIn .2s ease';
      var lines=msg.split('\n').map(function(l){return esc(l);}).join('<br>');
      div.innerHTML='<div class="ai-tag">'+esc(tag)+'</div>'+lines;
      feed.insertBefore(div,feed.firstChild);
      while(feed.children.length>8){feed.removeChild(feed.lastChild);}
    }
    // AIã‚¿ãƒ–ãŒé–‹ã„ã¦ã„ãªã‘ã‚Œã°ãƒãƒƒã‚¸è¡¨ç¤º
    if(G.curTab!=='ai'){
      var nb=q('nb-ai');if(nb&&!nb.classList.contains('on')){
        nb.style.outline='2px solid #6366f1';
        setTimeout(function(){if(nb)nb.style.outline='';},3000);
      }
    } else {
      G.renderAI();
    }
  },

  // AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çµŒå–¶åˆ¤æ–­ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆnextTurnå†’é ­ã§å‘¼ã°ã‚Œã‚‹ï¼‰
  aiDecide:function(){
    if(!G.aiMode)return;
    var s=G.s;
    var acts=[];

    // â‘  å—æ³¨åˆ¤æ–­ï¼šç©ºãã‚¹ãƒ­ãƒƒãƒˆ Ã— ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¹ã‚¿ãƒƒãƒ•ãŒã„ã‚Œã°é«˜ã‚¹ã‚³ã‚¢æ¡ˆä»¶ã‚’å—æ³¨
    var maxSlots=Math.max(2,s.staff.length);
    var freeSlots=maxSlots-s.actives.length;
    var idleStaff=s.staff.filter(function(st){return st.status==='idle';});
    if(freeSlots>0&&s.avail.length>0&&(idleStaff.length>0||s.actives.length===0)){
      var fireRisk=s.fire>=50;  // ç‚ä¸Šè­¦æˆ’ä¸­
      var ranked=s.avail.slice().sort(function(a,b){
        function score(p){
          var base=p.price;
          base*=(p.cli.id==='god'?1.35:p.cli.id==='norm'?1.1:p.cli.id==='agency'?0.7:p.cli.id==='startup'?0.9:1.0);
          base*=(p.diff<=2?1.2:p.diff===3?1.0:p.diff>=4?(fireRisk?0.4:0.75):1.0);
          base*=(p.urg?(fireRisk?0.5:0.85):1.0);
          // ã‚¹ã‚­ãƒ«ãƒãƒƒãƒãƒœãƒ¼ãƒŠã‚¹
          if(p.sk&&s.staff.length>0){
            var bestSkill=s.staff.reduce(function(mx,st){
              return Math.max(mx, p.sk.reduce(function(sm,k){return sm+(st.stats[k]||0);},0));
            },0);
            base*=(1+bestSkill*0.002);
          }
          return base;
        }
        return score(b)-score(a);
      });
      ranked.slice(0,Math.min(freeSlots,idleStaff.length||1)).forEach(function(proj){
        var ap=JSON.parse(JSON.stringify(proj));
        ap.prog=0;ap.asgn=null;ap.modCnt=0;
        s.actives.push(ap);
        s.avail=s.avail.filter(function(x){return x.id!==proj.id;});
        acts.push('å—æ³¨:ã€Œ'+proj.nm+'ã€'+fY(proj.price));
        addLog('ğŸ¤–ã€Œ'+proj.nm+'ã€ã‚’AIãŒå—æ³¨','sys');
        G.aiActionLog.push({turn:G.s.turn,type:'order',msg:'ã€Œ'+proj.nm+'ã€å—æ³¨ '+fY(proj.price)});
      });
    }

    // â‘¡ ã‚¢ã‚µã‚¤ãƒ³åˆ¤æ–­ï¼šæœªã‚¢ã‚µã‚¤ãƒ³æ¡ˆä»¶ã«ã‚¹ã‚­ãƒ«ãƒãƒƒãƒæœ€å„ªå…ˆã§ã‚¢ã‚µã‚¤ãƒ³
    s.actives.forEach(function(proj){
      if(proj.asgn)return;
      var avl=s.staff.filter(function(st){return st.status==='idle'&&st.mental>20;});
      if(!avl.length)return;
      var best=avl.slice().sort(function(a,b){
        function sc(st){
          var v=(st.stats.design+st.stats.ui+st.stats.speed)/3*(st.mental/100);
          if(proj.sk)proj.sk.forEach(function(k){if(st.stats[k])v+=st.stats[k]*0.35;});
          return v;
        }
        return sc(b)-sc(a);
      })[0];
      proj.asgn=best.id;best.status='working';
      acts.push('æ‹…å½“:'+best.nm+'â†’ã€Œ'+proj.nm+'ã€');
      addLog('ğŸ¤– '+best.nm+'ã‚’ã€Œ'+proj.nm+'ã€ã«ã‚¢ã‚µã‚¤ãƒ³','sys');
      G.aiActionLog.push({turn:G.s.turn,type:'assign',msg:best.nm+' â†’ ã€Œ'+proj.nm+'ã€'});
    });

    // â‘¢ æ¡ç”¨åˆ¤æ–­ï¼šäººæ‰‹ä¸è¶³ & è³‡é‡‘ä½™è£• â†’ ã‚³ã‚¹ãƒ‘æœ€è‰¯ã®äººæã‚’æ¡ç”¨
    var staffMax=[4,10,16,22,200,1000,5000][Math.min(s.phase,6)];
    // å¸¸ã«staffMaxã¾ã§æ¡ç”¨å¯èƒ½ï¼ˆè³‡é‡‘åˆ¶ç´„ã®ã¿ï¼‰
    var targetStaff=staffMax;
    var monthlyCost=s.staff.reduce(function(a,st){return a+st.sal;},0)*1.5;
    if(s.money<monthlyCost*3)targetStaff=Math.min(s.staff.length+2,staffMax);
    if(s.hirePool.length<4)G.genHire();
    if(s.staff.length<targetStaff&&s.money>800000&&s.hirePool.length>0){
      var bh=s.hirePool.slice().sort(function(a,b){
        var va=(a.st.design+a.st.ui+a.st.speed+a.st.logic)/4/a.sal;
        var vb=(b.st.design+b.st.ui+b.st.speed+b.st.logic)/4/b.sal;
        return vb-va;
      })[0];
      var hcost=bh.sal*2;
      if(s.money>hcost*3){
        var emp={
          id:'e'+Date.now(),nm:bh.nm,role:bh.role,ic:bh.ic,sal:bh.sal,
          stats:JSON.parse(JSON.stringify(bh.st)),mental:bh.mental,
          status:'idle',isSelf:false,sense:ri(40,85)
        };
        s.money-=hcost;s.staff.push(emp);
        s.hirePool=s.hirePool.filter(function(h){return h.nm!==bh.nm;});
        acts.push('æ¡ç”¨:'+emp.nm+'('+emp.role+') '+fY(hcost));
        addLog('ğŸ¤– '+emp.nm+'ã‚’AIãŒæ¡ç”¨','sys');
        G.aiActionLog.push({turn:G.s.turn,type:'hire',msg:emp.nm+'('+emp.role+') æ¡ç”¨ '+fY(hcost)});
        SFX.good();G.updateHUD();G.renderAll();
      }
    }

    // â‘£ æŠ€è¡“ç¿’å¾—ï¼šè³‡é‡‘2Mè¶… & å‰æã‚¯ãƒªã‚¢æ¸ˆã¿ã‚’å„ªå…ˆé †ã§1ã¤ç¿’å¾—
    if(s.money>2000000){
      var allN=TECHS.reduce(function(a,r){return a.concat(r.nodes);},[]);
      var buyable=allN.filter(function(n){
        return !s.tech[n.id]
          &&n.req.every(function(r){return s.tech[r];})
          &&s.money>n.cost*2.5;
      });
      var prio=['design_system','figma_basic','ux_research','motion','branding','three_d','ai_design','global'];
      var toLearn=null;
      for(var pi=0;pi<prio.length;pi++){
        toLearn=buyable.find(function(n){return n.id===prio[pi];});
        if(toLearn)break;
      }
      if(!toLearn&&buyable.length)toLearn=buyable[0];
      if(toLearn){
        s.money-=toLearn.cost;s.tech[toLearn.id]=true;
        acts.push('ç¿’å¾—:ã€Œ'+toLearn.nm+'ã€ '+fY(toLearn.cost));
        addLog('ğŸ¤–ã€Œ'+toLearn.nm+'ã€ã‚’AIãŒç¿’å¾—','sys');
        G.aiActionLog.push({turn:G.s.turn,type:'tech',msg:'ã€Œ'+toLearn.nm+'ã€ç¿’å¾— '+fY(toLearn.cost)});
        SFX.lvup();G.updateHUD();G.renderTech();
      }
    }

    // â‘¤ ã‚ªãƒ•ã‚£ã‚¹ç§»è»¢ï¼šè©•åˆ¤ãƒ»è³‡é‡‘ãƒ»ãƒ•ã‚§ãƒ¼ã‚ºãŒæƒãˆã°ç§»è»¢
    var nextLv=s.offLevel+1;
    if(nextLv<OFFICES.length){
      var od=OFFICES[nextLv];
      if(s.money>od.cost*1.8&&s.rep>=nextLv*18&&s.phase>=nextLv-1){
        s.money-=od.cost;s.offLevel=nextLv;s.rep=clamp(s.rep+od.rp,0,100);
        q('olb').textContent=OFF_LB[nextLv];
        acts.push('ç§»è»¢:ã€Œ'+od.nm+'ã€ è©•åˆ¤+'+od.rp);
        addLog('ğŸ¤–ã€Œ'+od.nm+'ã€ã«AIãŒç§»è»¢','sys');
        G.aiActionLog.push({turn:G.s.turn,type:'other',msg:'ã€Œ'+od.nm+'ã€ã«ç§»è»¢ è©•åˆ¤+'+od.rp});
        SFX.lvup();G.updateHUD();G.renderProg();
      }
    }

    // â‘¥ ç‚ä¸Šå¯¾ç­–ï¼šç‚ä¸Š60%è¶…ãªã‚‰é›£æ¡ˆä»¶ã‚’è¾é€€ã—ã¦ãƒªã‚¹ã‚¯ä½æ¸›
    if(s.fire>=60&&s.actives.length>1){
      var dp=s.actives.find(function(p){return p.diff>=4||p.cli.id==='agency';});
      if(dp){
        if(dp.asgn){var dSt=s.staff.find(function(x){return x.id===dp.asgn;});if(dSt)dSt.status='idle';}
        s.actives=s.actives.filter(function(p){return p.id!==dp.id;});
        acts.push('ç‚ä¸Šå¯¾ç­–:ã€Œ'+dp.nm+'ã€è¾é€€');
        addLog('ğŸ¤– ç‚ä¸Šå¯¾ç­–ã§ã€Œ'+dp.nm+'ã€ã‚’è¾é€€','sys');
        G.aiActionLog.push({turn:G.s.turn,type:'risk',msg:'ç‚ä¸Šå¯¾ç­–:ã€Œ'+dp.nm+'ã€è¾é€€'});
      }
    }

    // â‘¦ ãƒ¡ãƒ³ã‚¿ãƒ«ç®¡ç†ï¼šãƒ¡ãƒ³ã‚¿ãƒ«30ä»¥ä¸‹ã®ã‚¹ã‚¿ãƒƒãƒ•ã‚’å¼·åˆ¶ä¼‘é¤Š
    s.actives.forEach(function(proj){
      if(!proj.asgn)return;
      var wk=s.staff.find(function(x){return x.id===proj.asgn;});
      if(wk&&wk.mental<25){
        wk.status='idle';proj.asgn=null;
        acts.push('ä¼‘é¤Š:'+wk.nm+' (ãƒ¡ãƒ³ã‚¿ãƒ«ä½ä¸‹)');
        addLog('ğŸ¤– '+wk.nm+'ã‚’ãƒ¡ãƒ³ã‚¿ãƒ«å›å¾©ã®ãŸã‚ä¼‘é¤Šã•ã›ãŸ','sys');
      }
    });

    // â‘§ æ€è€ƒãƒ­ã‚°å‡ºåŠ›
    if(acts.length>0){
      var tags=['STRATEGY','OPTIMIZE','EXECUTE','ANALYZE','DECIDE','MANAGE'];
      var tagIdx=s.turn%tags.length;
      G.aiThink(tags[tagIdx],acts.slice(0,3).join('\n')+(acts.length>3?'\nä»–'+(acts.length-3)+'ä»¶':''));
    } else if(s.turn%3===0){
      var status=[];
      status.push('æ¡ˆä»¶'+s.actives.length+'ä»¶é€²è¡Œä¸­');
      if(s.fire>30)status.push('ç‚ä¸Šè­¦æˆ’ '+s.fire+'%');
      status.push('è³‡é‡‘ '+fY(s.money));
      G.aiThink('MONITOR',status.join('\n'));
    }

    // AI KPIæ›´æ–°
    if(G.curTab==='ai')G.renderAI();

    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”Ÿæˆ
    var stEl=q('ai-status-txt');
    if(stEl){
      var idleCount=s.staff.filter(function(x){return x.status==='idle';}).length;
      var busyCount=s.actives.filter(function(x){return x.asgn;}).length;
      var msgs=[
        'AI AGENT ç¨¼åƒä¸­ â”€ æ¡ˆä»¶'+s.actives.length+'ä»¶ é€²è¡Œä¸­',
        'AI AGENT â”€ ä½™è£•è³‡é‡‘ '+fY(s.money),
        'AI AGENT â”€ ç©ºãã‚¹ã‚¿ãƒƒãƒ• '+idleCount+'å',
        'AI AGENT â”€ æ‹…å½“ä¸­ '+busyCount+'ä»¶',
        'AI AGENT â”€ ç‚ä¸Šãƒªã‚¹ã‚¯ '+s.fire+'%',
        'AI AGENT â”€ è©•åˆ¤ã‚¹ã‚³ã‚¢ '+s.rep,
      ];
      stEl.textContent=msgs[s.turn%msgs.length];
    }
  },

  scheduleAuto:function(){
    if(!G.aiMode)return;
    if(G.autoTimer)clearTimeout(G.autoTimer);
    G.autoTimer=setTimeout(function(){
      if(!G.aiMode||G.busy)return G.scheduleAuto();
      var anyModal=q('modal-ev').classList.contains('open')||q('modal-mod').classList.contains('open')||q('modal-rev').classList.contains('open');
      if(anyModal&&!G.aiMode){G.scheduleAuto();return;}
      G.nextTurn();
    },2000);
  },

  mkSelf:function(){return{id:'self',nm:'ã‚ãªãŸ',role:'UIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼',ic:'ğŸ§‘â€ğŸ’»',sal:0,stats:{design:65,speed:70,logic:60,ui:72,comm:65},mental:90,status:'idle',isSelf:true,sense:70};},

  // å¤–éƒ¨ã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®ã‚ªãƒ¼ãƒ€ãƒ¼ã‚’ã‚²ãƒ¼ãƒ ã«å–ã‚Šè¾¼ã‚€
  checkExtOrders:function(){
    try{
      var eo=JSON.parse(localStorage.getItem('dcfk_ext_orders')||'[]');
      if(!eo.length)return;
      var processed=JSON.parse(localStorage.getItem('dcfk_ext_processed')||'[]');
      var newOnes=eo.filter(function(o){return!processed.includes(o.id);});
      if(!newOnes.length)return;
      newOnes.forEach(function(o){
        processed.push(o.id);
        var pt=PTYPES.find(function(p){return p.id===o.tid;})||PTYPES[0];
        var phase=G.s.phase;
        var price=pt.base*(1+phase*0.4)*1.2; // å¤–éƒ¨ã‚ªãƒ¼ãƒ€ãƒ¼ã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¾¡æ ¼
        G.s.avail.unshift({
          id:'ext-'+o.id, tid:o.tid||'logo', tlb:o.tlb||'ãƒ­ã‚´', tic:o.tic||'ğŸ”¤',
          tcss:pt.css||'logo', nm:o.nm,
          cli:{id:'god',lb:o.from||'å¤–éƒ¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ',ic:'ğŸŒ',mr:5,pm:1.3,rg:4,rl:-1},
          price:Math.round(price), days:pt.days||7,
          diff:3, dead:o.dl||14, urg:true, sk:pt.sk||['design'],
          prog:0, asgn:null, modCnt:0, isExt:true,
          extDesc:o.desc, extBudget:o.budget
        });
      });
      localStorage.setItem('dcfk_ext_processed',JSON.stringify(processed));
      if(newOnes.length>0){
        notify('ğŸ“¬ å¤–éƒ¨ã‚ªãƒ¼ãƒ€ãƒ¼ãŒ'+newOnes.length+'ä»¶å±Šãã¾ã—ãŸï¼æ¡ˆä»¶ã‚¿ãƒ–ã‚’ç¢ºèªã—ã¦ãã ã•ã„','ok',5000);
        addLog('ğŸ“¬ å¤–éƒ¨ã‹ã‚‰'+newOnes.length+'ä»¶ã®ã‚ªãƒ¼ãƒ€ãƒ¼ãŒå±Šã„ãŸï¼','good');
        var pb=q('bdg-proj');if(pb){pb.style.display='inline';pb.textContent=parseInt(pb.textContent||'0')+newOnes.length;}
      }
    }catch(e){console.log('extOrders error',e);}
  },

  genProjects:function(){
    var avail=PTYPES.filter(function(p){return p.ph<=G.s.phase;});
    var cnt=3+G.s.phase;G.s.avail=[];
    for(var i=0;i<cnt;i++){
      var pt=pick(avail),ct=pick(CTYPES);
      var nm=pick(PNAMES[pt.id]||[pt.lb+'æ¡ˆä»¶']);
      var pm=0.75+Math.random()*0.55,diff=clamp(1+Math.floor(Math.random()*3+G.s.phase*0.6),1,5);
      var tb=G.s.tech['design_system']?1.1:1;
      G.s.avail.push({id:'p'+Date.now()+i,tid:pt.id,tlb:pt.lb,tic:pt.ic,tcss:pt.css,nm:nm,cli:ct,
        price:Math.round(pt.base*pm*(1+G.s.phase*0.4)*ct.pm*tb),days:pt.days+ri(0,3),
        diff:diff,dead:ri(3,8),urg:Math.random()>0.75,sk:pt.sk,prog:0,asgn:null,modCnt:0});
    }
    G.checkExtOrders();
  },

  // â”€â”€ æ‰‹ç¶šãçš„ã‚¹ã‚¿ãƒƒãƒ•ç”Ÿæˆï¼ˆãƒ•ã‚§ãƒ¼ã‚º4ä»¥ä¸Šã§ç„¡åˆ¶é™æ¡ç”¨ã‚’å®Ÿç¾ï¼‰â”€â”€
  genStaff:function(seed){
    var LAST=['ç”°ä¸­','éˆ´æœ¨','ä½è—¤','å±±ç”°','ä¼Šè—¤','æ¸¡è¾º','ä¸­æ‘','å°æ—','åŠ è—¤','å‰ç”°',
              'æ¾æœ¬','äº•ä¸Š','æœ¨æ‘','æ—','æ¸…æ°´','å±±æœ¬','æ£®','æ± ç”°','æ©‹æœ¬','é˜¿éƒ¨',
              'çŸ³å·','å±±å£','å‰ç”°','è—¤ç”°','å¾Œè—¤','å²¡ç”°','æ‘ä¸Š','é•·è°·å·','è¿‘è—¤','çŸ³äº•',
              'å‚æœ¬','é è—¤','é’æœ¨','è—¤äº•','è¥¿æ‘','ç¦ç”°','å¤ªç”°','ä¸‰æµ¦','å²¡æœ¬','é«˜æ©‹'];
    var FIRST=['ã‚ãŠã„','ã‚†ã','ã•ãã‚‰','ã¿ãªã¿','ã¯ãª','ã‚Œãª','ã²ã‹ã‚Š','ã¾ã„','ã‚Šãª','ã‚†ã†ãª',
               'ãŸã‘ã‚‹','ã“ã†ãŸ','ã—ã‚‡ã†','ã‚Šã‚‡ã†','ã‘ã‚“ãŸ','ã—ã‚“ã‚„','ãã‚‰','ã¯ã‚‹ã¨','ã‚†ã†ã','ãªãŠ',
               'ã‚ãã‚‰','ã¿ãŠ','ã‹ãª','ã¤ã°ã•','ãˆã¾','ãµã¿','ã¾ã‚†','ã®ã‚','ã„ã¨','ã›ãª'];
    var r=function(n){seed=(seed*1664525+1013904223)&0x7fffffff;return seed%n;};
    var nm=LAST[r(LAST.length)]+' '+FIRST[r(FIRST.length)];
    var ph=G.s.phase;
    // ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥ãƒ­ãƒ¼ãƒ«
    var ROLES_BY_PHASE=[
      [{role:'UIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼',ic:'ğŸ¨',salBase:320000,sk:{design:[65,90],ui:[75,95],speed:[55,80],logic:[50,75],comm:[55,80]}},
       {role:'ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯',ic:'âœï¸',salBase:300000,sk:{design:[70,95],ui:[50,70],speed:[50,75],logic:[40,65],comm:[55,75]}},
       {role:'UX',ic:'ğŸ”¬',salBase:370000,sk:{design:[55,75],ui:[70,90],speed:[55,75],logic:[75,92],comm:[70,90]}},
       {role:'PM',ic:'ğŸ“‹',salBase:410000,sk:{design:[40,60],ui:[50,70],speed:[65,85],logic:[80,95],comm:[85,98]}}],
      [{role:'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',ic:'ğŸ’»',salBase:490000,sk:{design:[30,55],ui:[55,80],speed:[80,97],logic:[80,97],comm:[55,80]}},
       {role:'ãƒ¢ãƒ¼ã‚·ãƒ§ãƒŠãƒ¼',ic:'ğŸ¬',salBase:440000,sk:{design:[70,90],ui:[65,85],speed:[55,75],logic:[50,70],comm:[58,80]}},
       {role:'ã‚³ãƒ”ãƒ¼ãƒ©ã‚¤ã‚¿ãƒ¼',ic:'âœï¸',salBase:300000,sk:{design:[50,70],ui:[40,60],speed:[60,80],logic:[65,85],comm:[85,98]}}],
      [{role:'AIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼',ic:'ğŸ¤–',salBase:580000,sk:{design:[55,80],ui:[70,92],speed:[85,98],logic:[75,95],comm:[55,80]}},
       {role:'ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼',ic:'ğŸ’',salBase:500000,sk:{design:[80,98],ui:[65,85],speed:[50,75],logic:[60,80],comm:[70,90]}}],
      [{role:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒã‚¸ãƒ£ãƒ¼',ic:'ğŸ¯',salBase:850000,sk:{design:[50,70],ui:[65,85],speed:[70,90],logic:[88,98],comm:[85,98]}},
       {role:'ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆ',ic:'ğŸ“Š',salBase:1050000,sk:{design:[25,45],ui:[40,65],speed:[80,95],logic:[92,99],comm:[60,80]}},
       {role:'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãƒãƒã‚¸ãƒ£ãƒ¼',ic:'âš™ï¸',salBase:1200000,sk:{design:[30,50],ui:[55,75],speed:[85,98],logic:[90,99],comm:[75,92]}},
       {role:'ã‚°ãƒ­ãƒ¼ã‚¹PM',ic:'ğŸ“ˆ',salBase:950000,sk:{design:[45,65],ui:[65,85],speed:[82,97],logic:[85,97],comm:[80,95]}}],
      [{role:'BizDevãƒãƒã‚¸ãƒ£ãƒ¼',ic:'ğŸ¤',salBase:1100000,sk:{design:[40,60],ui:[50,70],speed:[70,90],logic:[82,97],comm:[90,99]}},
       {role:'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒªãƒ¼ãƒ‰',ic:'ğŸŒŸ',salBase:1400000,sk:{design:[65,85],ui:[80,97],speed:[75,95],logic:[88,99],comm:[85,98]}}],
      [{role:'ãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ‰',ic:'ğŸ”§',salBase:1600000,sk:{design:[40,65],ui:[60,80],speed:[90,99],logic:[92,99],comm:[72,90]}},
       {role:'VPoE',ic:'ğŸ—ï¸',salBase:2000000,sk:{design:[45,65],ui:[60,80],speed:[85,98],logic:[92,99],comm:[85,98]}}]
    ];
    var roleList=ROLES_BY_PHASE[Math.min(ph,ROLES_BY_PHASE.length-1)];
    if(ph>=2&&r(3)===0)roleList=ROLES_BY_PHASE[Math.max(0,Math.min(ph-1,ROLES_BY_PHASE.length-1))];
    var rd=roleList[r(roleList.length)];
    var stat=function(rng){return clamp(rng[0]+r(rng[1]-rng[0]),0,99);};
    var salVar=0.8+r(40)/100;
    var ICS=['ğŸ¨','âœï¸','ğŸ”¬','ğŸ“‹','ğŸ’»','ğŸ¬','âœï¸','ğŸ¤–','ğŸ’','ğŸ¯','ğŸ“Š','âš™ï¸','ğŸ“ˆ','ğŸ¤','ğŸŒŸ','ğŸ”§'];
    return {
      nm:nm,role:rd.role,ic:rd.ic||ICS[r(ICS.length)],
      sal:Math.round(rd.salBase*salVar/10000)*10000,
      st:{design:stat(rd.sk.design),ui:stat(rd.sk.ui),speed:stat(rd.sk.speed),logic:stat(rd.sk.logic),comm:stat(rd.sk.comm)},
      mental:70+r(25),ph:Math.min(ph,5)
    };
  },

  genHire:function(){
    var phase=G.s.phase;
    // å›ºå®šãƒ—ãƒ¼ãƒ«ã‹ã‚‰ä½¿ãˆã‚‹ã‚‚ã®ã‚’åé›†
    var fixed=HIRE_POOL.filter(function(h){
      if(h.ph>phase)return false;
      if(h.role==='AIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼'&&!G.s.tech['ai_design'])return false;
      if(G.s.staff.some(function(s){return s.nm===h.nm;}))return false;
      return true;
    });
    // å…¨ãƒ•ã‚§ãƒ¼ã‚ºã§æ‰‹ç¶šãç”Ÿæˆï¼ˆç„¡åˆ¶é™è£œå……ï¼‰
    var showCount=Math.min(4+phase*2,20);
    var existNames=new Set(G.s.staff.map(function(s){return s.nm;}));
    fixed.forEach(function(h){existNames.add(h.nm);});
    var generated=[],attempts=0,seed=Date.now()^(G.s.turn*7919+Math.random()*9999);
    while(generated.length<showCount&&attempts<500){
      attempts++;
      seed=(seed*1664525+1013904223)&0x7fffffff;
      var gen=G.genStaff(seed);
      if(!existNames.has(gen.nm)){existNames.add(gen.nm);generated.push(gen);}
    }
    G.s.hirePool=shuffle(fixed).concat(generated).slice(0,showCount);
  },

  // â”€ CANVAS: OFFICE â”€
  ocZoom:1.0,  // ã‚¢ã‚¤ã‚½ãƒ¡ ã‚ºãƒ¼ãƒ å€ç‡ï¼ˆ0.4ã€œ2.5ï¼‰

  zoomOC:function(dir){
    var steps=[0.4,0.5,0.6,0.75,0.85,1.0,1.2,1.4,1.6,1.9,2.2,2.5];
    var cur=steps.reduce(function(best,s,i){
      return Math.abs(s-G.ocZoom)<Math.abs(best.v-G.ocZoom)?{v:s,i:i}:best;
    },{v:steps[0],i:0});
    var next=Math.max(0,Math.min(steps.length-1, cur.i+dir));
    G.ocZoom=steps[next];
    var el=q('oc-zoom-val');
    if(el)el.textContent=Math.round(G.ocZoom*100)+'%';
    // localStorageä¿å­˜
    localStorage.setItem('dcfk_oczoom',G.ocZoom);
  },

  startOC:function(){
    var cv=q('ocv');if(!cv)return;
    // ã‚ºãƒ¼ãƒ å¾©å…ƒ
    var saved=parseFloat(localStorage.getItem('dcfk_oczoom')||'1');
    if(saved>=0.4&&saved<=2.5)G.ocZoom=saved;
    var el=q('oc-zoom-val');
    if(el)el.textContent=Math.round(G.ocZoom*100)+'%';
    // DPRå¯¾å¿œ: ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºã‚’è¡¨ç¤ºã‚µã‚¤ã‚ºÃ—devicePixelRatioã«è¨­å®š
    G.resizeOC(cv);
    if(G.ocId)cancelAnimationFrame(G.ocId);
    (function loop(){G.drawOC(cv);G.ocId=requestAnimationFrame(loop);})();
  },

  // Canvasã®ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºã‚’æ­£ã—ãè¨­å®šï¼ˆDPRå¯¾å¿œï¼‰
  resizeOC:function(cv){
    if(!cv)cv=q('ocv');if(!cv)return;
    var wrap=cv.parentElement;if(!wrap)return;
    var dpr=window.devicePixelRatio||1;
    var cssW=wrap.clientWidth;
    var cssH=wrap.clientHeight||240;
    // CSSè¡¨ç¤ºã‚µã‚¤ã‚ºã‚’æ˜ç¤º
    cv.style.width=cssW+'px';
    cv.style.height=cssH+'px';
    // ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º = CSSè¡¨ç¤ºã‚µã‚¤ã‚º Ã— DPRï¼ˆã‚·ãƒ£ãƒ¼ãƒ—ã«æç”»ï¼‰
    cv.width =Math.round(cssW*dpr);
    cv.height=Math.round(cssH*dpr);
    G._ocDPR=dpr;
  },

  drawOC:function(cv){
    var ctx=cv.getContext('2d');
    var dpr=G._ocDPR||window.devicePixelRatio||1;
    // CSSè«–ç†ã‚µã‚¤ã‚ºã§è¨ˆç®—ï¼ˆDPRã§å‰²ã‚Šæˆ»ã™ï¼‰
    var W=cv.width/dpr, H=cv.height/dpr;

    G.s.oAnim=(G.s.oAnim||0)+1;
    var t=G.s.oAnim, lv=G.s.offLevel;

    ctx.save();
    ctx.scale(dpr,dpr);  // DPRã‚¹ã‚±ãƒ¼ãƒ«é©ç”¨
    ctx.clearRect(0,0,W,H);

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ISOMETRIC CORE
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    var Z=G.ocZoom||1.0;  // ã‚ºãƒ¼ãƒ å€ç‡
    var TW=48*Z, TH=24*Z; // ã‚¿ã‚¤ãƒ«å¹…ãƒ»é«˜ã•ï¼ˆã‚ºãƒ¼ãƒ åæ˜ ï¼‰
    var WALL=36*Z;        // å£ã®é«˜ã•ï¼ˆã‚ºãƒ¼ãƒ åæ˜ ï¼‰
    var ROWS=9, COLS=16;
    // åŸç‚¹ï¼šç”»é¢ä¸Šéƒ¨ä¸­å¤®ï¼ˆã‚ºãƒ¼ãƒ ã«é–¢ã‚ã‚‰ãšå®‰å®šã—ãŸä½ç½®ï¼‰
    var OX=W*0.5, OY=TH*1.2+10;

    // ã‚°ãƒªãƒƒãƒ‰åº§æ¨™ â†’ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åº§æ¨™ï¼ˆã‚¿ã‚¤ãƒ«å·¦ä¸Šï¼‰
    function toIso(gx,gy){
      return {
        x: OX + (gx - gy) * (TW/2),
        y: OY + (gx + gy) * (TH/2)
      };
    }
    // ã‚¿ã‚¤ãƒ«ä¸­å¿ƒ
    function isoCenter(gx,gy){
      var p=toIso(gx,gy);
      return {x:p.x, y:p.y+TH/2};
    }

    // ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ
    var themes=[
      {floor1:'#d4cfc8',floor2:'#cac5be',wall:'#b8a898',wallTop:'#a09080',walldark:'#907868',ceiling:'#e8e0d8',sky:'#c8d8e8'},
      {floor1:'#d8d0c8',floor2:'#cec6be',wall:'#b0a090',wallTop:'#988878',walldark:'#887060',ceiling:'#e0d8d0',sky:'#b8d0e8'},
      {floor1:'#dcd8d0',floor2:'#d2cec6',wall:'#a8a090',wallTop:'#908880',walldark:'#807870',ceiling:'#e8e4dc',sky:'#a8c8e0'},
      {floor1:'#e0dcd4',floor2:'#d6d2ca',wall:'#a09898',wallTop:'#889090',walldark:'#788080',ceiling:'#ece8e0',sky:'#98c0d8'},
      {floor1:'#1e2236',floor2:'#1a1e30',wall:'#2a3060',wallTop:'#3040a0',walldark:'#1a2050',ceiling:'#252840',sky:'#0a1030'},
      {floor1:'#12141e',floor2:'#0e1018',wall:'#1a1e3a',wallTop:'#252850',walldark:'#10122a',ceiling:'#181a28',sky:'#060810'},
      {floor1:'#0a0b12',floor2:'#08090e',wall:'#12142a',wallTop:'#1a1e3a',walldark:'#08091a',ceiling:'#101218',sky:'#040508'},
    ];
    var TH2=themes[Math.min(lv,themes.length-1)];
    var isDark=lv>=4;

    // â”â” SKY / BACKGROUND â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    var skyGrad=ctx.createLinearGradient(0,0,0,H);
    if(isDark){
      skyGrad.addColorStop(0,TH2.sky);
      skyGrad.addColorStop(1,TH2.floor1);
    }else{
      skyGrad.addColorStop(0,'#c8ddf0');
      skyGrad.addColorStop(0.4,TH2.sky);
      skyGrad.addColorStop(1,TH2.floor1);
    }
    ctx.fillStyle=skyGrad;
    ctx.fillRect(0,0,W,H);

    // â”â” BACK WALL â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // å¾Œå£ï¼šrow=0 ã®å‰é¢
    ctx.save();
    ctx.beginPath();
    var p0=toIso(0,0), pC=toIso(COLS,0);
    ctx.moveTo(p0.x, p0.y);
    ctx.lineTo(pC.x, pC.y);
    ctx.lineTo(pC.x, pC.y-WALL);
    ctx.lineTo(p0.x, p0.y-WALL);
    ctx.closePath();
    var wGrad=ctx.createLinearGradient(p0.x,p0.y-WALL,p0.x,p0.y);
    wGrad.addColorStop(0,TH2.wallTop);
    wGrad.addColorStop(1,TH2.wall);
    ctx.fillStyle=wGrad;
    ctx.fill();
    // å£ã®ç¸¦ã‚¹ãƒˆãƒ©ã‚¤ãƒ—ï¼ˆãƒ‘ãƒãƒ«æ„Ÿï¼‰
    ctx.strokeStyle=isDark?'rgba(255,255,255,0.04)':'rgba(0,0,0,0.06)';
    ctx.lineWidth=1;
    for(var wi=1;wi<COLS;wi++){
      var wp=toIso(wi,0);
      ctx.beginPath();ctx.moveTo(wp.x,wp.y);ctx.lineTo(wp.x,wp.y-WALL);ctx.stroke();
    }
    // å£ã®çª“
    if(lv>=1){
      var winNum=Math.min(2+lv,5);
      for(var wni=0;wni<winNum;wni++){
        var wgx=Math.round(COLS/(winNum+1))*(wni+1);
        var wp2=toIso(wgx,0);
        var wsx=wp2.x-(TW/4), wsy=wp2.y-WALL*0.8;
        var wwW=TW*0.45, wwH=WALL*0.55;
        // çª“æ 
        ctx.fillStyle=isDark?'#304080':'#c8b090';
        ctx.fillRect(wsx-2, wsy-2, wwW+4, wwH+4);
        // ç©ºã®è‰²
        var skyC=isDark?'#1a2850':'#88c0e8';
        ctx.fillStyle=skyC;
        ctx.fillRect(wsx, wsy, wwW, wwH);
        // çª“ã®å…‰åå°„
        ctx.fillStyle='rgba(255,255,255,0.25)';
        ctx.fillRect(wsx+2, wsy+2, wwW*0.3, wwH*0.4);
        // çª“ã‚ãï¼ˆåå­—ï¼‰
        ctx.strokeStyle=isDark?'#2a3860':'#b0a080';
        ctx.lineWidth=1.5;
        ctx.beginPath();ctx.moveTo(wsx+wwW/2,wsy);ctx.lineTo(wsx+wwW/2,wsy+wwH);ctx.stroke();
        ctx.beginPath();ctx.moveTo(wsx,wsy+wwH/2);ctx.lineTo(wsx+wwW,wsy+wwH/2);ctx.stroke();
      }
    }
    ctx.restore();

    // å·¦å£ï¼ˆcol=0ï¼‰
    ctx.save();
    ctx.beginPath();
    var pl0=toIso(0,0), plR=toIso(0,ROWS);
    ctx.moveTo(pl0.x, pl0.y);
    ctx.lineTo(plR.x, plR.y);
    ctx.lineTo(plR.x, plR.y-WALL);
    ctx.lineTo(pl0.x, pl0.y-WALL);
    ctx.closePath();
    var wGrad2=ctx.createLinearGradient(pl0.x,0,plR.x,0);
    wGrad2.addColorStop(0,TH2.walldark);
    wGrad2.addColorStop(1,TH2.wall);
    ctx.fillStyle=wGrad2;
    ctx.fill();
    ctx.restore();

    // â”â” FLOOR TILES â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // painter's order: gyå°â†’å¤§, gxå°â†’å¤§
    for(var gy=0;gy<ROWS;gy++){
      for(var gx=0;gx<COLS;gx++){
        var fp=toIso(gx,gy);
        var isEven=((gx+gy)%2===0);
        ctx.beginPath();
        ctx.moveTo(fp.x,            fp.y);
        ctx.lineTo(fp.x+(TW/2),     fp.y+(TH/2));
        ctx.lineTo(fp.x,            fp.y+TH);
        ctx.lineTo(fp.x-(TW/2),     fp.y+(TH/2));
        ctx.closePath();
        var fc=isEven?TH2.floor1:TH2.floor2;
        ctx.fillStyle=fc;
        ctx.fill();
        // ã‚¿ã‚¤ãƒ«å¢ƒç•Œç·š
        ctx.strokeStyle=isDark?'rgba(255,255,255,0.04)':'rgba(0,0,0,0.07)';
        ctx.lineWidth=0.5;
        ctx.stroke();
      }
    }

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ISOMETRIC DRAW HELPERS
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    // ã‚¢ã‚¤ã‚½ãƒ¡ã€Œç®±ã€ï¼šåº•é¢(gx,gy)ã€å¹…gdwÃ—æ·±ã•gdhã€é«˜ã•pxH
    function isoBox(gx,gy,gdw,gdh,pxH,colTop,colLeft,colRight,outline){
      // 4éš…ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åº§æ¨™
      var pNW=toIso(gx,gy),      pNE=toIso(gx+gdw,gy);
      var pSW=toIso(gx,gy+gdh),  pSE=toIso(gx+gdw,gy+gdh);
      ctx.save();
      if(outline){ctx.strokeStyle=outline;ctx.lineWidth=0.8;}

      // ä¸Šé¢ï¼ˆå¤©æ¿ï¼‰
      ctx.beginPath();
      ctx.moveTo(pNW.x,pNW.y-pxH);
      ctx.lineTo(pNE.x,pNE.y-pxH);
      ctx.lineTo(pSE.x,pSE.y-pxH);
      ctx.lineTo(pSW.x,pSW.y-pxH);
      ctx.closePath();
      ctx.fillStyle=colTop;ctx.fill();
      if(outline)ctx.stroke();

      // å·¦é¢ï¼ˆå—è¥¿ï¼‰
      ctx.beginPath();
      ctx.moveTo(pSW.x,pSW.y-pxH);
      ctx.lineTo(pSE.x,pSE.y-pxH);
      ctx.lineTo(pSE.x,pSE.y);
      ctx.lineTo(pSW.x,pSW.y);
      ctx.closePath();
      ctx.fillStyle=colLeft;ctx.fill();
      if(outline)ctx.stroke();

      // å³é¢ï¼ˆå—æ±ï¼‰
      ctx.beginPath();
      ctx.moveTo(pNE.x,pNE.y-pxH);
      ctx.lineTo(pSE.x,pSE.y-pxH);
      ctx.lineTo(pSE.x,pSE.y);
      ctx.lineTo(pNE.x,pNE.y);
      ctx.closePath();
      ctx.fillStyle=colRight;ctx.fill();
      if(outline)ctx.stroke();
      ctx.restore();
    }

    // ã‚¢ã‚¤ã‚½ãƒ¡ä¸Šé¢ã®ã¿ï¼ˆå¹³é¢ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼‰
    function isoFlat(gx,gy,gdw,gdh,col){
      var pNW=toIso(gx,gy),pNE=toIso(gx+gdw,gy);
      var pSW=toIso(gx,gy+gdh),pSE=toIso(gx+gdw,gy+gdh);
      ctx.beginPath();
      ctx.moveTo(pNW.x,pNW.y);ctx.lineTo(pNE.x,pNE.y);
      ctx.lineTo(pSE.x,pSE.y);ctx.lineTo(pSW.x,pSW.y);
      ctx.closePath();
      ctx.fillStyle=col;ctx.fill();
    }

    // â”â” DESK â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawIsoDesk(gx,gy,sIdx){
      var hasS=(sIdx>=0&&sIdx<G.s.staff.length);
      var s2=hasS?G.s.staff[sIdx]:null;
      var busy=hasS&&s2.status==='working';

      // ãƒ‡ã‚¹ã‚¯æœ¬ä½“ï¼ˆå¹…2Ã—æ·±1ï¼‰
      var dTop=isDark?'#2a2e3a':'#f4f2ec';
      var dL=isDark?'#1a1e28':'#d8d4cc';
      var dR=isDark?'#20232e':'#ccc8c0';
      isoBox(gx,gy,1.8,0.9,14,dTop,dL,dR,isDark?'#404558':'#b0aca4');

      // ãƒ¢ãƒ‹ã‚¿ãƒ¼
      var mc=busy?[[90,140,240],[60,200,130],[220,80,140]][sIdx%3]:[70,75,90];
      var mBase=isoCenter(gx+0.7, gy+0.3);
      // ãƒ¢ãƒ‹ã‚¿ãƒ¼å°åº§
      ctx.fillStyle=isDark?'#303440':'#383838';
      ctx.fillRect(mBase.x-3, mBase.y-20, 6, 4);
      ctx.fillRect(mBase.x-6, mBase.y-18, 12, 2);
      // ãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 
      ctx.fillStyle=isDark?'#252830':'#1a1a1a';
      ctx.fillRect(mBase.x-13, mBase.y-34, 26, 17);
      // ãƒ¢ãƒ‹ã‚¿ãƒ¼ç”»é¢
      var mCol='rgb('+mc[0]+','+mc[1]+','+mc[2]+')';
      ctx.fillStyle=busy?mCol:(isDark?'#1a1e2a':'#282828');
      ctx.fillRect(mBase.x-12, mBase.y-33, 24, 15);
      // ç”»é¢ã‚°ãƒ­ãƒ¼ï¼ˆä½œæ¥­ä¸­ï¼‰
      if(busy){
        ctx.save();
        ctx.shadowColor=mCol;ctx.shadowBlur=12;
        ctx.fillStyle='rgba('+mc[0]+','+mc[1]+','+mc[2]+',0.4)';
        ctx.fillRect(mBase.x-12, mBase.y-33, 24, 15);
        ctx.restore();
        // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ä¸Šã®ãƒ©ã‚¤ãƒ³
        var li=Math.floor(t*0.1)%4;
        for(var rr=0;rr<4;rr++){
          ctx.fillStyle=rr===li?'rgba(255,255,255,0.9)':'rgba(255,255,255,0.3)';
          ctx.fillRect(mBase.x-10+rr, mBase.y-31+rr*3, 14-rr*2, 1.5);
        }
      }
      // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼ˆãƒ‡ã‚¹ã‚¯ä¸Šï¼‰
      var kp=isoCenter(gx+0.75, gy+0.7);
      isoFlat(gx+0.3,gy+0.55,0.9,0.35,isDark?'#2a2e3a':'#dcdcd8');
      // ã‚³ãƒ¼ãƒ’ãƒ¼ã‚«ãƒƒãƒ—
      if(sIdx%2===0){
        var cp=isoCenter(gx+0.2,gy+0.25);
        isoBox(gx+0.1,gy+0.15,0.35,0.3,8,'#c07830','#a05010','#b06020');
        ctx.fillStyle='#3a1808';
        ctx.beginPath();ctx.ellipse(cp.x,cp.y-8,5,3,0,0,Math.PI*2);ctx.fill();
        // æ¹¯æ°—
        if(Math.sin(t*0.08+sIdx)>0){
          ctx.fillStyle='rgba(220,220,240,0.5)';
          var voff=Math.sin(t*0.1+sIdx)*2;
          ctx.fillRect(cp.x-1,cp.y-14+voff,2,5);
          ctx.fillRect(cp.x+2,cp.y-16+voff,2,4);
        }
      }
    }

    // â”â” PLANT â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawPlant(gx,gy,big){
      var sz=big?1.2:0.7;
      var base=isoCenter(gx,gy);
      // é‰¢
      isoBox(gx-sz*0.3,gy-sz*0.3,sz*0.6,sz*0.6,sz*10,
        '#a06030','#7a4820','#8a5428');
      // åœŸ
      ctx.fillStyle='#5a3010';
      ctx.beginPath();ctx.ellipse(base.x,base.y-sz*10,sz*12,sz*5,0,0,Math.PI*2);ctx.fill();
      // è‘‰ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼
      var leafSwing=Math.sin(t*0.025)*3;
      var leafCols=isDark?['#1a6030','#228840','#2aaa50']:['#2a7a30','#38a040','#48c050'];
      [[0,-sz*28,sz*16],[sz*10,-sz*22,sz*12],[-sz*10,-sz*22,sz*12],
       [sz*5,-sz*34,sz*10],[-sz*5,-sz*34,sz*10],[0,-sz*40,sz*8]].forEach(function(l,li){
        ctx.fillStyle=leafCols[li%3];
        ctx.save();
        ctx.translate(base.x+l[0]+leafSwing*(li%2?1:-1)*0.3, base.y+l[1]);
        ctx.beginPath();ctx.ellipse(0,0,l[2]*0.7,l[2],0.3,0,Math.PI*2);ctx.fill();
        ctx.restore();
      });
    }

    // â”â” SOFA â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawSofa(gx,gy){
      // èƒŒã‚‚ãŸã‚Œ
      isoBox(gx,gy,2,0.4,22,'#d07030','#a85020','#c06828');
      // åº§é¢
      isoBox(gx,gy+0.4,2,1,14,'#e08040','#b86030','#d07038');
      // ã‚¢ãƒ¼ãƒ ãƒ¬ã‚¹ãƒˆå·¦
      isoBox(gx,gy,0.2,1.4,22,'#b85820','#904818','#a85020');
      // ã‚¢ãƒ¼ãƒ ãƒ¬ã‚¹ãƒˆå³
      isoBox(gx+1.8,gy,0.2,1.4,22,'#b85820','#904818','#a85020');
      // ã‚¯ãƒƒã‚·ãƒ§ãƒ³2ã¤
      isoBox(gx+0.25,gy+0.5,0.65,0.8,18,'#c86828','#a05020','#b86030');
      isoBox(gx+1.1,gy+0.5,0.65,0.8,18,'#c86828','#a05020','#b86030');
    }

    // â”â” COFFEE TABLE â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawCoffeeTable(gx,gy){
      isoBox(gx,gy,1.4,0.7,8,'#d4aa78','#b08858','#c89a68','rgba(0,0,0,0.15)');
      // é›‘èªŒ
      isoFlat(gx+0.2,gy+0.1,0.6,0.4,'rgba(220,80,80,0.6)');
      isoFlat(gx+0.6,gy+0.25,0.5,0.35,'rgba(80,120,220,0.6)');
    }

    // â”â” BOOKSHELF â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawBookshelf(gx,gy){
      isoBox(gx,gy,1.5,0.4,40,
        isDark?'#2a2e3c':'#c8b898',
        isDark?'#1a1e2c':'#a89878',
        isDark?'#202430':'#b8a888',
        isDark?'#404558':'rgba(0,0,0,0.2)');
      // æœ¬ï¼ˆã‚«ãƒ©ãƒ•ãƒ«ãªèƒŒè¡¨ç´™ï¼‰
      var bookCols=['#e04040','#4060d0','#40a040','#d0a020','#a040c0','#40b0a0','#d06030'];
      for(var bi=0;bi<6;bi++){
        var bp=toIso(gx+bi*0.24+0.05, gy+0.05);
        ctx.fillStyle=bookCols[bi%bookCols.length];
        ctx.fillRect(bp.x-3, bp.y-32+bi%2*4, 5, 22);
      }
    }

    // â”â” WHITEBOARD â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawWhiteboard(gx,gy){
      var p=toIso(gx,gy);
      // ãƒœãƒ¼ãƒ‰æœ¬ä½“ï¼ˆå¾Œå£ã«ç«‹ã¦ã‹ã‘ã‚‹æ„Ÿã˜ï¼‰
      ctx.fillStyle=isDark?'#1e2238':'#888880';
      ctx.fillRect(p.x-(TW*0.5), p.y-WALL+2, TW, 2);
      ctx.fillStyle=isDark?'#242840':'#f8f8f0';
      ctx.fillRect(p.x-(TW*0.45), p.y-WALL+4, TW*0.9, WALL*0.65);
      // å†…å®¹
      ctx.fillStyle=isDark?'rgba(60,100,220,0.7)':'rgba(50,70,200,0.6)';
      ctx.font='8px monospace';
      ctx.fillText('UI FLOW',p.x-(TW*0.35),p.y-WALL*0.5);
      ctx.strokeStyle=isDark?'rgba(200,80,80,0.6)':'rgba(180,50,50,0.6)';
      ctx.lineWidth=1.5;
      ctx.beginPath();
      ctx.moveTo(p.x-(TW*0.35), p.y-WALL*0.28);
      ctx.lineTo(p.x-(TW*0.1),  p.y-WALL*0.18);
      ctx.lineTo(p.x+(TW*0.15), p.y-WALL*0.28);
      ctx.stroke();
      ctx.fillStyle=isDark?'rgba(40,160,100,0.6)':'rgba(30,140,80,0.5)';
      ctx.fillRect(p.x+(TW*0.08), p.y-WALL*0.5, TW*0.22, WALL*0.2);
    }

    // â”â” BIG SCREEN (lv>=4) â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawBigScreen(gx,gy){
      var p=toIso(gx,gy);
      var sw=TW*1.8, sh=WALL*0.75;
      ctx.fillStyle=isDark?'#10123a':'#181840';
      ctx.fillRect(p.x-sw/2, p.y-WALL+2, sw, sh);
      // ãƒ‡ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
      var barColors=isDark?['#6366f1','#00d4aa','#f59e0b']:['#4f46e5','#059669','#d97706'];
      for(var di=0;di<8;di++){
        var bh=Math.floor(6+Math.sin(t*0.04+di*1.2)*8+8);
        ctx.fillStyle=barColors[di%3];
        ctx.globalAlpha=0.6+Math.sin(t*0.06+di)*0.3;
        ctx.fillRect(p.x-sw/2+8+di*(sw/9), p.y-WALL+sh-bh, sw/10, bh);
      }
      ctx.globalAlpha=1;
      ctx.fillStyle=isDark?'#00d4aa':'#4f46e5';
      ctx.font='9px monospace';
      var label=lv>=6?'GLOBAL HQ':lv>=5?'TECH CAMPUS':'PRODUCT HQ';
      ctx.fillText(label, p.x-sw/2+6, p.y-WALL+sh+12);
    }

    // â”â” LAMP â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawLamp(gx,gy){
      var base=isoCenter(gx,gy);
      // å°åº§
      isoBox(gx-0.1,gy-0.1,0.2,0.2,3,'#888','#666','#777');
      // ãƒãƒ¼ãƒ«
      ctx.fillStyle='#777';
      ctx.fillRect(base.x-1, base.y-40, 2, 37);
      // ã‚·ã‚§ãƒ¼ãƒ‰
      ctx.fillStyle='#f0c040';
      ctx.beginPath();
      ctx.moveTo(base.x-12, base.y-40);
      ctx.lineTo(base.x+12, base.y-40);
      ctx.lineTo(base.x+7,  base.y-32);
      ctx.lineTo(base.x-7,  base.y-32);
      ctx.closePath(); ctx.fill();
      // å…‰ã®è¼ª
      ctx.save();
      ctx.globalAlpha=0.12+Math.sin(t*0.04)*0.04;
      ctx.fillStyle='#f0c040';
      ctx.beginPath();
      ctx.ellipse(base.x, base.y-20, 28, 14, 0, 0, Math.PI*2);
      ctx.fill();
      ctx.restore();
    }

    // â”â” SERVER RACK (lv>=5) â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    function drawServerRack(gx,gy){
      isoBox(gx,gy,0.6,0.4,50,
        isDark?'#1a1e30':'#2a2e40',
        isDark?'#101420':'#1e2230',
        isDark?'#161a28':'#242838');
      var rp=isoCenter(gx+0.15,gy+0.1);
      for(var ri=0;ri<5;ri++){
        var on=Math.sin(t*0.12+ri*2.1)>0;
        ctx.fillStyle=on?'#6366f1':'#232538';
        ctx.fillRect(rp.x, rp.y-40+ri*8, 4, 3);
        ctx.fillStyle=on?'#00d4aa':'#1a2030';
        ctx.fillRect(rp.x+6, rp.y-40+ri*8, 3, 3);
      }
    }

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ROOM LAYOUTï¼ˆãƒ•ã‚§ãƒ¼ã‚ºåˆ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé…ç½®ï¼‰
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    var staffCount=G.s.staff.length;
    var maxDesks=lv===0?1:lv<=1?3:lv<=2?6:lv<=3?12:lv<=4?20:lv<=5?32:50;
    var visCount=Math.min(staffCount,maxDesks);

    // ãƒ‡ã‚¹ã‚¯é…ç½®ã‚°ãƒªãƒƒãƒ‰ï¼ˆã‚¢ã‚¤ã‚½ãƒ¡åº§æ¨™ï¼‰
    var desks=[];
    var dcols=Math.max(1,Math.min(Math.ceil(Math.sqrt(visCount*2)),7));
    var drows=Math.max(1,Math.ceil(visCount/dcols));
    var dStartX=1.5, dStartY=1.5;
    var dSpX=Math.min(3.2,(COLS-3)/Math.max(dcols,1));
    var dSpY=Math.min(2.8,(ROWS-3)/Math.max(drows,1));
    for(var dr=0;dr<drows;dr++){
      for(var dc=0;dc<dcols;dc++){
        var didx=dr*dcols+dc;
        if(didx>=visCount)break;
        desks.push({
          gx:dStartX+dc*dSpX,
          gy:dStartY+dr*dSpY,
          idx:didx,
          sortY:dStartY+dr*dSpY+1
        });
      }
    }

    // â”â” STATIC OBJECTSï¼ˆå¾Œã‚ã‹ã‚‰å‰ã®é †ã§æç”»ï¼‰ â”â”â”â”â”â”â”â”â”
    // ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰ï¼ˆå¾Œå£ï¼‰
    if(lv>=1) drawWhiteboard(COLS*0.5, 0);
    // å¤§å‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ï¼ˆlv4+ï¼‰
    if(lv>=4) drawBigScreen(COLS*0.5, 0);
    // æœ¬æ£šï¼ˆå·¦å¾Œã‚è§’ï¼‰
    if(lv>=2) drawBookshelf(0.2, 0.3);
    if(lv>=4) drawBookshelf(COLS-2, 0.3);
    // ã‚µãƒ¼ãƒãƒ¼ãƒ©ãƒƒã‚¯ï¼ˆlv5+ï¼‰
    if(lv>=5){ drawServerRack(0.3, 1.2); drawServerRack(0.3, 2.0); }

    // å¥¥ã®æ¤ç‰©ï¼ˆå¾Œå£æ²¿ã„ï¼‰
    drawPlant(0.5, 0, false);
    drawPlant(COLS-0.8, 0, false);
    if(lv>=2){ drawPlant(COLS*0.35, 0.1, true); drawPlant(COLS*0.65, 0.1, false); }
    if(lv>=4){ drawPlant(COLS*0.2, 0.2, false); }

    // ãƒ‡ã‚¹ã‚¯ã‚’æç”»ï¼ˆYé †ã‚½ãƒ¼ãƒˆæ¸ˆã¿ï¼‰
    desks.sort(function(a,b){return a.sortY-b.sortY;});
    desks.forEach(function(d){ drawIsoDesk(d.gx, d.gy, d.idx); });

    // æ‰‹å‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆå‰æ–¹é…ç½®ï¼‰
    if(lv>=1){
      drawSofa(COLS-4, ROWS-2.2);
      drawCoffeeTable(COLS-2.8, ROWS-1.2);
      drawLamp(COLS-1, ROWS-2.8);
    }
    if(lv>=3){
      drawSofa(1.5, ROWS-2.2);
      drawPlant(0.5, ROWS-1.5, true);
    }
    if(lv>=2){
      drawPlant(COLS*0.5, ROWS-1.2, false);
      drawLamp(COLS*0.3, ROWS-1.5);
    }

    // å¤šæ•°ç¤¾å“¡ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
    if(staffCount>maxDesks){
      ctx.fillStyle='rgba(99,102,241,0.9)';
      ctx.beginPath();ctx.roundRect(W-80,8,72,20,4);ctx.fill();
      ctx.fillStyle='#fff';ctx.font='10px monospace';
      ctx.fillText('ğŸ‘¥ '+staffCount+'å',W-73,22);
    }

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // STAFF CHARACTERSï¼ˆã‚¢ã‚¤ã‚½ãƒ¡ã‚­ãƒ£ãƒ©ï¼‰
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    if(!G.staffPos) G.staffPos=[];

    var HAIR=['#3a2010','#c8b060','#102840','#501010','#282828','#8060a0','#204030'];
    var SKIN=['#f0c890','#d4a070','#a06840','#805028','#c09878'];
    var SHIRTS=['#5060d0','#30a060','#c04060','#d0a020','#606080','#c06030','#40a0b0'];

    G.s.staff.forEach(function(s,i){
      var desk=desks[i]||desks[desks.length-1];
      var dcp=desk?isoCenter(desk.gx+0.9, desk.gy+1.0):{x:W/2,y:H/2};

      if(!G.staffPos[i]){
        G.staffPos[i]={sx:dcp.x, sy:dcp.y, tx:dcp.x, ty:dcp.y, timer:0, state:'sit'};
      }
      var sp=G.staffPos[i];
      sp.timer--;
      if(sp.timer<=0){
        var r=Math.random();
        if(s.status==='working'||r<0.6){
          sp.tx=dcp.x+(Math.random()-0.5)*6;
          sp.ty=dcp.y+(Math.random()-0.5)*4;
          sp.state='sit'; sp.timer=90+Math.floor(Math.random()*130);
        } else if(r<0.75&&desks.length>1){
          var other=desks[Math.floor(Math.random()*desks.length)];
          var ocp=isoCenter(other.gx+0.9, other.gy+1.0);
          sp.tx=ocp.x+(Math.random()-0.5)*8; sp.ty=ocp.y+(Math.random()-0.5)*6;
          sp.state='walk'; sp.timer=40+Math.floor(Math.random()*50);
        } else {
          // ãƒ©ã‚¦ãƒ³ã‚¸ã‚¨ãƒªã‚¢ã¸
          var lx=lv>=1?(W*0.7+Math.random()*W*0.15):(W*0.3+Math.random()*W*0.4);
          sp.tx=lx; sp.ty=H*0.65+Math.random()*H*0.2;
          sp.state='relax'; sp.timer=30+Math.floor(Math.random()*50);
        }
      }
      sp.sx+=(sp.tx-sp.sx)*0.07;
      sp.sy+=(sp.ty-sp.sy)*0.07;

      var px2=sp.sx, py2=sp.sy;
      var tired=s.mental<30, busy=s.status==='working';
      var bob=sp.state==='sit'? Math.sin(t*0.025+i*1.4)*0.5
             :sp.state==='walk'?Math.sin(t*0.2+i)*2
             :Math.sin(t*0.04+i)*0.5;

      ctx.save();
      // å½±
      ctx.fillStyle='rgba(0,0,0,0.18)';
      ctx.beginPath();ctx.ellipse(px2,py2+10,10,3.5,0,0,Math.PI*2);ctx.fill();

      ctx.translate(px2, py2+bob);

      // ã‚¢ã‚¤ã‚½ãƒ¡å‘ãã‚­ãƒ£ãƒ©ï¼ˆæ–œã‚å‰å‘ãï¼‰
      var S=1.4; // ã‚¹ã‚±ãƒ¼ãƒ«

      // è¶³
      var legL=sp.state==='walk'?Math.sin(t*0.22+i)*3:0;
      ctx.fillStyle=SKIN[i%5];
      ctx.fillRect(-4*S,(6+legL)*S,4*S,5*S);
      ctx.fillRect(0*S,(6-legL)*S,4*S,5*S);
      // é´
      ctx.fillStyle='#303030';
      ctx.fillRect(-5*S,(10+legL)*S,5*S,2.5*S);
      ctx.fillRect(-1*S,(10-legL)*S,5*S,2.5*S);

      // ä½“
      var shirtC=tired?'#806060':SHIRTS[i%7];
      ctx.fillStyle=shirtC;
      ctx.fillRect(-5*S,0*S,10*S,7*S);
      // ä½“ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
      ctx.fillStyle='rgba(255,255,255,0.15)';
      ctx.fillRect(-5*S,0*S,10*S,2*S);
      // ãƒ™ãƒ«ãƒˆ
      ctx.fillStyle='rgba(0,0,0,0.25)';
      ctx.fillRect(-5*S,5.5*S,10*S,1.5*S);

      // è…•
      ctx.fillStyle=SKIN[i%5];
      ctx.fillRect(-8*S,0*S,4*S,5*S);
      ctx.fillRect(4*S,0*S,4*S,5*S);

      // é ­
      ctx.fillStyle=SKIN[i%5];
      ctx.fillRect(-4*S,-9*S,8*S,9*S);
      // é¡”
      ctx.fillStyle='rgba(0,0,0,0.2)';
      ctx.fillRect(-2*S,-7*S,2*S,1.5*S); // å·¦çœ‰
      ctx.fillRect(0.5*S,-7*S,1.5*S,1.5*S); // å³çœ‰
      ctx.fillStyle=busy?'#4060c0':'rgba(0,0,0,0.3)';
      ctx.fillRect(-2*S,-5*S,2*S,1.5*S); // å·¦ç›®
      ctx.fillRect(0.5*S,-5*S,1.5*S,1.5*S); // å³ç›®
      // ç¬‘é¡”
      ctx.strokeStyle=tired?'rgba(180,50,50,0.5)':'rgba(0,0,0,0.25)';
      ctx.lineWidth=1.2;
      ctx.beginPath();
      ctx.arc(0,-3.5*S,2*S,0,Math.PI,tired);
      ctx.stroke();
      // è€³
      ctx.fillStyle=SKIN[(i+1)%5];
      ctx.fillRect(-6*S,-7*S,2.5*S,3*S);
      ctx.fillRect(3.5*S,-7*S,2.5*S,3*S);

      // é«ª
      ctx.fillStyle=HAIR[i%7];
      ctx.fillRect(-4*S,-10*S,8*S,3*S);
      ctx.fillRect(-5*S,-9*S,2*S,4*S);
      ctx.fillRect(3*S,-9*S,2*S,4*S);

      // ãƒ˜ãƒƒãƒ‰ãƒ•ã‚©ãƒ³ï¼ˆä½œæ¥­ä¸­ï¼‰
      if(busy){
        ctx.fillStyle='#1a1a1a';
        ctx.fillRect(-7*S,-10*S,2.5*S,6*S);
        ctx.fillRect(4.5*S,-10*S,2.5*S,6*S);
        ctx.fillRect(-7*S,-12*S,14*S,2.5*S);
        ctx.fillStyle='#333';
        ctx.fillRect(-8*S,-8*S,3*S,4*S);
        ctx.fillRect(5*S,-8*S,3*S,4*S);
      }

      // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°æ‰‹
      if(sp.state==='sit'&&busy){
        var tk=Math.sin(t*0.2+i)>0;
        ctx.fillStyle=SKIN[i%5];
        ctx.fillRect(-8*S,(3+(!tk?1:0))*S,3.5*S,2*S);
        ctx.fillRect(4.5*S,(3+(tk?1:0))*S,3.5*S,2*S);
      }

      // zzzï¼ˆç–²å¼Šï¼‰
      if(tired){
        ctx.fillStyle='rgba(255,80,80,0.9)';
        ctx.font=(7*S)+'px monospace';
        ctx.fillText('z',3*S,-13*S);
        if(Math.sin(t*0.04+i)>0)ctx.fillText('z',7*S,-19*S);
      }

      ctx.restore();

      // åå‰ãƒãƒƒã‚¸
      var nm2=s.nm.split(' ')[0];
      var bw=nm2.length*5+12;
      ctx.fillStyle=busy?'rgba(20,20,60,0.9)':'rgba(15,15,30,0.78)';
      ctx.beginPath();
      ctx.roundRect(px2-bw/2, py2+bob+14, bw, 12, 3);
      ctx.fill();
      ctx.fillStyle=busy?'#a0c0ff':'#c8c8ee';
      ctx.font='9px monospace';
      ctx.fillText(nm2, px2-bw/2+3, py2+bob+24);
      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ‰ãƒƒãƒˆ
      ctx.fillStyle=tired?'#ff4040':busy?'#6366f1':'#34d399';
      ctx.beginPath();ctx.arc(px2+bw/2-6, py2+bob+19, 3, 0, Math.PI*2);ctx.fill();

      // å¹ãå‡ºã—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯æµç”¨ï¼‰
      var murmurKey=i+'_'+G.s.turn;
      if(!G._murmurShown)G._murmurShown={};
      if(Math.sin(t*0.004+i*7.3)>0.97&&!G._murmurShown[murmurKey]){
        G._murmurShown[murmurKey]=true;
        var MURMURS_WORK=['ã¾ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã—ç›´ã—â€¦','ç· ã‚åˆ‡ã‚Šæ˜æ—¥ã ã£ã‘','Figmaãƒ•ãƒªãƒ¼ã‚ºã—ãŸ','ã‚³ãƒ¼ãƒ’ãƒ¼3æ¯ç›®','ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ã¤ã‚‰ã„','FBãã‚‹ã®æ€–ã„','ãƒ‡ã‚¶ã‚¤ãƒ³è¿·èµ°ä¸­','å¯ã‚Œã¦ãªã„','ç¥æ¡ˆä»¶ã‚ã‚ŠãŸã„','ã“ã®ãƒ•ã‚©ãƒ³ãƒˆé•ã†æ°—ãŒ','ã‚‚ã†å°‘ã—ã§å®Œæˆï¼','é›†ä¸­ï¼','ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã¯ï¼Ÿ','ã„ã„æ„Ÿã˜ã‹ã‚‚','ã‚ã¨ã¯å¾®èª¿æ•´ã®ã¿'];
        var MURMURS_IDLE=['ä»Šæ—¥ãƒ©ãƒ³ãƒã©ã“','Slacké€šçŸ¥å¤šã™ã','çœ ã„','åœ¨å®…ã®æ–¹ãŒã‚ˆã‹ã£ãŸ','ã‚ã®ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ä¸Šæ‰‹ã„','ã‚³ãƒ¼ãƒ‰ã†ã¾ãæ›¸ã‘ãªã„','å¸°ã‚ŠãŸã„ï¼ˆå®šæ™‚å¾Œï¼‰','ä»Šæœˆã‚‚é ‘å¼µã£ãŸ','çµ¦æ–™ä¸ŠãŒã‚‰ãªã„ã‹ãª','ã‚¹ã‚¿ãƒè¡ŒããŸã„','é€±æœ«ä½•ã—ã‚ˆ','è»¢è·ã‚µã‚¤ãƒˆè¦‹ã¦ãŸï¼ˆå†…ç·’ï¼‰'];
        var msgList2=busy?MURMURS_WORK:MURMURS_IDLE;
        var msg2=msgList2[(i*13+Math.floor(t*0.005))%msgList2.length];
        if(!G.murmurLog)G.murmurLog=[];
        G.murmurLog.unshift({nm:s.nm,ic:s.ic,msg:msg2,turn:G.s.turn,t:Date.now()});
        if(G.murmurLog.length>100)G.murmurLog.pop();
        if(G.curTab==='murmur'){G.renderMurmur();}
        else{var bdg2=q('bdg-murmur');if(bdg2)bdg2.style.display='inline';}
        if(!G._murmurActive)G._murmurActive={};
        G._murmurActive[i]={msg:msg2, until:t+180};
      }
      var ma=G._murmurActive&&G._murmurActive[i];
      if(ma&&t<ma.until){
        var tw=ctx.measureText(ma.msg).width;
        var bw2=tw+12;
        ctx.fillStyle='rgba(255,255,255,0.96)';
        ctx.beginPath();ctx.roundRect(px2-bw2/2,py2+bob-42,bw2,16,4);ctx.fill();
        ctx.strokeStyle='rgba(100,100,200,0.25)';ctx.lineWidth=0.8;ctx.stroke();
        ctx.fillStyle='rgba(255,255,255,0.96)';
        ctx.beginPath();
        ctx.moveTo(px2-3,py2+bob-27);ctx.lineTo(px2,py2+bob-22);ctx.lineTo(px2+4,py2+bob-27);
        ctx.closePath();ctx.fill();
        ctx.fillStyle='rgba(30,30,90,0.9)';
        ctx.font='9px monospace';
        ctx.fillText(ma.msg, px2-bw2/2+5, py2+bob-30);
      }
    });

    // â”â” PROGRESS BAR (bottom overlay) â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    var pr=G.s.actives.length>0?
      G.s.actives.reduce(function(a,p){return a+p.prog;},0)/G.s.actives.length:0;
    var tpEl=q('tp-bar'), ttEl=q('tp-txt');
    if(tpEl)tpEl.style.setProperty('--tp',Math.min(100,pr)+'%');
    if(ttEl){
      if(G.busy)ttEl.textContent='å‡¦ç†ä¸­...';
      else if(G.aiMode)ttEl.textContent='ğŸ¤– AIç®¡ç†ä¸­ â”€ é€²æ— '+Math.round(pr)+'%';
      else if(G.s.actives.length===0)ttEl.textContent='æ¡ˆä»¶ãªã— â”€ å—æ³¨ã—ã¦ãã ã•ã„';
      else ttEl.textContent='æ¡ˆä»¶é€²æ— '+Math.round(pr)+'%'+(G.aiMode?' ğŸ¤– AIç¨¼åƒä¸­':'ã€€â–¶ æ¬¡ã®é€±ã¸');
    }
    ctx.restore();  // DPRã‚¹ã‚±ãƒ¼ãƒ«ã‚’å…ƒã«æˆ»ã™
  },


  startTC:function(){
    (function loop(){G.drawTC();G.tcId=requestAnimationFrame(loop);})();
  },
  drawTC:function(){
    var cv=q('tcv');if(!cv)return;
    var ctx=cv.getContext('2d'),W=cv.width,H=cv.height,t=Date.now()/1000;
    ctx.fillStyle='#f0efff';ctx.fillRect(0,0,W,H);
    for(var i=0;i<65;i++){var blink=Math.sin(t*0.5+i)*0.5+0.5;ctx.fillStyle='rgba(120,100,220,'+(blink*0.6)+')';ctx.fillRect((Math.sin(i*127.1)*0.5+0.5)*W,(Math.cos(i*311.7)*0.5+0.5)*H*0.65,1,1);}
    var blds=[{x:0,w:.08,y:.30},{x:.07,w:.06,y:.50},{x:.12,w:.11,y:.20},{x:.22,w:.07,y:.40},{x:.28,w:.13,y:.15},{x:.40,w:.08,y:.45},{x:.47,w:.14,y:.18},{x:.60,w:.09,y:.35},{x:.68,w:.11,y:.22},{x:.78,w:.07,y:.42},{x:.84,w:.10,y:.28},{x:.92,w:.08,y:.48}];
    blds.forEach(function(b){
      ctx.fillStyle='#d8d5f8';ctx.fillRect(b.x*W,b.y*H,b.w*W,(1-b.y)*H);
      var wc=Math.floor(b.w*W/9),wr=Math.floor((1-b.y)*H*0.55/11);
      var cols=[[124,112,245],[240,98,146],[69,212,168],[240,192,64]];
      for(var r=0;r<wr;r++)for(var c=0;c<wc;c++)if(Math.sin(t*0.3+b.x*10+r*3.8+c*2.2)>0.15){var cl=cols[(r+c)%4];ctx.fillStyle='rgba('+cl[0]+','+cl[1]+','+cl[2]+',.62)';ctx.fillRect(b.x*W+c*9+2,b.y*H+10+r*11,4,5);}
    });
    var gg=ctx.createLinearGradient(0,H*.83,0,H);gg.addColorStop(0,'rgba(124,112,245,0.1)');gg.addColorStop(1,'rgba(124,112,245,0.03)');ctx.fillStyle=gg;ctx.fillRect(0,H*.83,W,H*.17);
    ctx.fillStyle='#e8e6ff';ctx.fillRect(0,H*.84,W,H*.16);
    var ds=(t*20)%40;for(var rx=-40+ds;rx<W;rx+=40){ctx.fillStyle='rgba(240,192,64,0.3)';ctx.fillRect(rx,H*.91,18,2);}
    ctx.font='18px serif';ctx.fillText('ğŸ§‘â€ğŸ’»',W/2-9,H*.82+Math.sin(t*2)*2);
  },

  // â”€ GAME FLOW â”€
  newGame:function(){
    SFX.click();G.initState();G.s.staff=[G.mkSelf()];G.genProjects();G.genHire();G.portfolioFilter='all';
    G.staffPos=[];G.murmurLog=[];G._murmurShown={};G._murmurActive={};
    G.aiMode=false;document.body.classList.remove('ai-mode');G.aiActionLog=[];
    if(G.tcId){cancelAnimationFrame(G.tcId);G.tcId=null;}
    q('SCR_TITLE').style.display='none';q('GAME').style.display='flex';
    G.startOC();gLog=[];
    addLog('ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¨ã—ã¦ã®ã‚­ãƒ£ãƒªã‚¢ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆï¼','sys');
    addLog('å£åº§æ®‹é«˜ï¼š38,000å††ã€‚ã¾ãšã¯æ¡ˆä»¶ã‚’å—æ³¨ã—ã‚ˆã†ï¼','sys');
    G.aiMode=false;document.body.classList.remove('ai-mode');G.aiActionLog=[];
    var aib=q('btn-ai');if(aib){aib.innerHTML='<span class="ai-dot" style="display:none"></span>ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰';aib.classList.remove('on');}
    G.renderAll();G.tab('proj');
    setTimeout(function(){
      notify('æ¡ˆä»¶ã‚¿ãƒ–ã‹ã‚‰å—æ³¨ã—ã¦åˆ¶ä½œã‚’å§‹ã‚ã‚ˆã†ï¼ğŸ¤–AIãƒ¢ãƒ¼ãƒ‰ONã§è‡ªå‹•é€²è¡Œã—ã¾ã™ã€‚','ok',5000);
    },500);
    window.addEventListener('resize',function(){G.resizeOC();});
  },

  save:function(){
    SFX.click();
    var d=JSON.parse(JSON.stringify(G.s));
    d.tech=G.s.tech;
    localStorage.setItem('dcfk_v3',JSON.stringify(d));
    notify('ã‚»ãƒ¼ãƒ–ã—ã¾ã—ãŸï¼','ok');SFX.coin();
  },

  load:function(){
    SFX.click();var raw=localStorage.getItem('dcfk_v3');
    if(!raw){notify('ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“','warn');return;}
    try{G.initState();var d=JSON.parse(raw);G.s=d;
      G.staffPos=[];
      if(G.tcId){cancelAnimationFrame(G.tcId);G.tcId=null;}
      q('SCR_TITLE').style.display='none';q('GAME').style.display='flex';
      if(!G.s.portfolio)G.s.portfolio=[];
      G.portfolioFilter='all';
      G.startOC();gLog=[];addLog('ãƒ­ãƒ¼ãƒ‰å®Œäº†ï¼','sys');G.renderAll();G.tab('dash');
      G.aiMode=false;document.body.classList.remove('ai-mode');G.aiActionLog=[];
      var aib2=q('btn-ai');if(aib2){aib2.innerHTML='<span class="ai-dot" style="display:none"></span>ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰';aib2.classList.remove('on');}
      setTimeout(function(){
        if(G.aiMode)G.scheduleAuto();
      },500);
      notify('ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼','ok');SFX.good();
    }catch(e){notify('ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒå£Šã‚Œã¦ã„ã¾ã™','danger');console.error(e);}
  },

  restart:function(){
    q('SCR_END').classList.remove('open');q('GAME').style.display='none';
    q('SCR_TITLE').style.display='flex';
    if(G.ocId){cancelAnimationFrame(G.ocId);G.ocId=null;}
    G.startTC();
  },

  howto:function(){
    alert('ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ç™ºå±•å›½ - éŠã³æ–¹\n\nâ–¶ åŸºæœ¬ã®æµã‚Œ\n1.ã€Œæ¡ˆä»¶ã€ã‚¿ãƒ–ã§æ¡ˆä»¶ã‚’é¸ã‚“ã§å—æ³¨\n2.ã€Œåˆ¶ä½œã€ã‚¿ãƒ–ã§ç¤¾å“¡ã‚’ã‚¢ã‚µã‚¤ãƒ³ã™ã‚‹\n3.ã€Œæ¬¡ã®é€±ã¸ã€ãƒœã‚¿ãƒ³ã§æ™‚é–“ã‚’é€²ã‚ã‚‹\n4. æ¡ˆä»¶å®Œäº†â†’è©•ä¾¡ãƒ»å ±é…¬ã‚’å—ã‘å–ã‚‹\n5. åç›Šã§ç¤¾å“¡æ¡ç”¨ãƒ»æŠ€è¡“ç¿’å¾—ãƒ»ã‚ªãƒ•ã‚£ã‚¹æ‹¡å¼µ\n\nâ–¶ é‡è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿\nğŸ’° è³‡é‡‘ï¼šæœˆæ¬¡ã‚³ã‚¹ãƒˆï¼ˆçµ¦ä¸+å®¶è³ƒï¼‰ãŒæ‰•ãˆãªã„ã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼\nâ­ è©•åˆ¤ï¼šé«˜ã„ã¨é«˜å˜ä¾¡æ¡ˆä»¶ãŒæ¥ã‚‹\nğŸ”¥ ç‚ä¸Šï¼š90%è¶…ãˆã§ç‚ä¸Šã‚¨ãƒ³ãƒ‰\nğŸ˜ˆ ãƒ–ãƒ©ãƒƒã‚¯åº¦ï¼šé«˜ã„ã¨ç¤¾å“¡ãŒè¾ã‚ã‚‹\n\nâ–¶ ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°7ç¨®\nãƒ»ç¥ã‚¹ã‚¿ã‚¸ã‚ªï¼ˆBestï¼‰ãƒ»ä¸–ç•Œé€²å‡ºãƒ»ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­\nãƒ»ä¸Šå ´ãƒ»ç‚ä¸Šè§£æ•£ãƒ»NFTç ´æ»…ãƒ»è³‡é‡‘ã‚·ãƒ§ãƒ¼ãƒˆ\n\nâ–¶ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰\nã‚¹ãƒšãƒ¼ã‚¹: æ¬¡ã®é€±ã¸\n1-7: ã‚¿ãƒ–åˆ‡æ›¿\nCtrl+S: ã‚»ãƒ¼ãƒ–');
  },

  // â”€ TURN ENGINE â”€
  nextTurn:function(){
    if(G.busy)return;G.busy=true;SFX.click();
    var btn=q('btn-turn');btn.disabled=true;btn.textContent='å‡¦ç†ä¸­...';
    // AIãƒ¢ãƒ¼ãƒ‰ï¼šã‚¿ãƒ¼ãƒ³é–‹å§‹å‰ã«çµŒå–¶åˆ¤æ–­ã‚’å®Ÿè¡Œ
    if(G.aiMode)G.aiDecide();
    G.s.turn++;
    G.s.actives.forEach(function(p){
      var spd=G.projSpeed(p);p.prog=Math.min(100,p.prog+spd);
      if(p.asgn){var s=G.s.staff.find(function(x){return x.id===p.asgn;});if(s)s.mental=clamp(s.mental-3,0,100);}
    });
    var done=G.s.actives.filter(function(p){return p.prog>=100;});
    G.s.actives=G.s.actives.filter(function(p){return p.prog<100;});
    var idx=0;
    function nextDone(){
      if(idx>=done.length){G.doMonthly();return;}
      G.complete(done[idx],function(){idx++;setTimeout(nextDone,120);});
    }
    nextDone();
  },

  doMonthly:function(){
    if(G.s.turn%4===0){
      G.s.monthNum++;
      var sals=G.s.staff.filter(function(s){return!s.isSelf;}).reduce(function(a,s){return a+s.sal;},0);
      var rent=OFFICES[G.s.offLevel].mc,total=sals+rent;
      if(total>0){G.s.money-=total;addLog('æœˆæ¬¡ã‚³ã‚¹ãƒˆï¼šçµ¦ä¸'+fY(sals)+'+å®¶è³ƒ'+fY(rent)+'='+fY(total),'bad');
        if(G.s.money<0)notify('âš  è³‡é‡‘ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã‚Šã¾ã—ãŸï¼','danger',5000);
        else if(G.s.money<300000)notify('ğŸ’° è³‡é‡‘ãŒå°‘ãªããªã£ã¦ã„ã¾ã™ï¼','warn',4000);}
      // ãƒ¡ãƒ³ã‚¿ãƒ«å›å¾©ï¼ˆå¤§ä¼æ¥­ã»ã©ç¦åˆ©åšç”ŸãŒè‰¯ã„=å›å¾©é‡UPï¼‰
      var mentalBonus=G.s.phase>=5?18:G.s.phase>=4?15:12;
      G.s.staff.forEach(function(s){s.mental=clamp(s.mental+mentalBonus,0,100);});
      G.s.staff.forEach(function(s){if(s.status==='working'){var k=pick(Object.keys(s.stats));s.stats[k]=clamp(s.stats[k]+1,0,99);}});
      var avgM=G.s.staff.reduce(function(a,s){return a+s.mental;},0)/Math.max(1,G.s.staff.length);
      if(avgM<40)G.s.black=clamp(G.s.black+8,0,100);else if(avgM>75)G.s.black=clamp(G.s.black-2,0,100);
      // ãƒ•ã‚§ãƒ¼ã‚º4-6: ç¤¾å“¡è¦æ¨¡ãƒœãƒ¼ãƒŠã‚¹ï¼ˆçµ„ç¹”åŠ›ï¼‰
      if(G.s.phase>=4&&G.s.staff.length>20){
        var orgBonus=Math.floor(G.s.staff.length*10000);
        G.s.money+=orgBonus;G.s.totalRev+=orgBonus;
      }
      // â”€â”€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ•ã‚§ãƒ¼ã‚º: DAU/ARRæˆé•· â”€â”€
      if(G.s.phase>=4&&G.s.dau>0){
        var gr=1.08;
        if(G.s.tech['growth_hack'])gr+=0.06;
        if(G.s.tech['data_infra'])gr+=0.04;
        if(G.s.tech['platform_biz'])gr+=0.08;
        if(avgM<50)gr*=0.93;  // ãƒãƒ¼ãƒ ãŒç–²å¼Šã™ã‚‹ã¨æˆé•·éˆåŒ–
        if(G.s.offLevel>=4)gr+=0.05; // ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæœ¬ç¤¾åŠ¹æœ
        G.s.dau=Math.round(G.s.dau*gr+ri(200,2000));
        // prodStage
        if(G.s.dau>=10000&&G.s.prodStage<1)G.s.prodStage=1;
        if(G.s.dau>=100000&&G.s.prodStage<2)G.s.prodStage=2;
        if(G.s.dau>=1000000&&G.s.prodStage<3)G.s.prodStage=3;
        G.s.arr=Math.round(G.s.dau*ri(1200,3000)); // ARPU
        G.s.burnRate=Math.round(G.s.staff.reduce(function(a,s){return a+s.sal;},0)*1.8);
        var prodRev=Math.round(G.s.arr/12);
        G.s.money+=prodRev;G.s.totalRev+=prodRev;
        addLog('ğŸ“± ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæœˆå +'+fY(prodRev)+' / DAU '+G.s.dau.toLocaleString(),'good');
        // æ€¥æˆé•·ã§ãƒ–ãƒ©ãƒƒã‚¯å¢—
        if(G.s.dau>50000&&G.s.black<70)G.s.black=clamp(G.s.black+4,0,100);
      }
      // 20å¹´é•·æœŸãƒ—ãƒ¬ã‚¤: ã‚¿ãƒ¼ãƒ³æ•°ã«å¿œã˜ã¦æœˆæ¬¡æ›´æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰åŒ–
    var yr2=2025+Math.floor((G.s.monthNum||0)/12);
    G.genProjects();G.genHire();
    var yMsg=G.s.monthNum%12===0&&G.s.monthNum>0?'ğŸ—“ï¸ '+yr2+'å¹´ãŒå§‹ã¾ã£ãŸã€‚':'æœˆæ¬¡æ›´æ–°ã€‚æ–°æ¡ˆä»¶ãŒå±Šã„ãŸã€‚';
    addLog(yMsg,'sys');
    // 20å¹´ç¯€ç›®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    var totalWeeksNow=G.s.turn;
    if(totalWeeksNow===520)notify('ğŸ‰ 10å¹´ç›®ã«çªå…¥ï¼ã“ã“ã¾ã§æ¥ãŸã®ã¯ã™ã”ã„ï¼','ok',6000);
    if(totalWeeksNow===1040)notify('ğŸ† 20å¹´ï¼ä¼èª¬ã®ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾ã ï¼','ok',8000);
    }
    G.s.avail.forEach(function(p){p.dead--;});
    var exp=G.s.avail.filter(function(p){return p.dead<=0;});
    exp.forEach(function(p){addLog('ã€Œ'+p.nm+'ã€ã®ç· ã‚åˆ‡ã‚ŠãŒéããŸã€‚','bad');});
    G.s.avail=G.s.avail.filter(function(p){return p.dead>0;});
    if(G.s.black>60){var qr=G.s.staff.filter(function(s){return!s.isSelf&&s.mental<30;});
      if(qr.length>0&&Math.random()<0.4){G.showEv(EVTS.find(function(e){return e.id==='quit';}),G.afterEv);return;}}
    if(G.s.fire>=50&&Math.random()<0.2){G.showEv(EVTS.find(function(e){return e.id==='fire_sns';}),G.afterEv);return;}
    // ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ•ã‚§ãƒ¼ã‚ºå°‚ç”¨ã‚¤ãƒ™ãƒ³ãƒˆ
    if(G.s.phase>=4&&Math.random()<0.15){
      var prodEvts=EVTS.filter(function(e){return e.id==='vc_offer'||e.id==='dau_spike'||e.id==='competitor_entry'||e.id==='talent_poach'||e.id==='media_unicorn';});
      if(prodEvts.length>0){G.showEv(pick(prodEvts),G.afterEv);return;}
    }
    var normalEvts=EVTS.filter(function(e){return e.id!=='vc_offer'&&e.id!=='dau_spike'&&e.id!=='competitor_entry'&&e.id!=='talent_poach'&&e.id!=='media_unicorn';});
    if(Math.random()<0.28){G.showEv(pick(normalEvts),G.afterEv);return;}
    G.afterEv();
  },

  afterEv:function(){
    G.phaseCheck();
    // ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒã‚§ãƒƒã‚¯ã¯æœˆæ¬¡ã®ã¿ï¼ˆ20å¹´é•·æœŸãƒ—ãƒ¬ã‚¤å¯¾å¿œï¼‰
    if(G.s.turn%4===0){if(G.endingCheck())return;}
    G.updateHUD();G.renderAll();
    var btn=q('btn-turn');btn.disabled=false;btn.textContent='â–¶â–¶ æ¬¡ã®é€±ã¸';
    G.busy=false;if(G.s.turn%5===0)G.save();
    if(G.aiMode)G.scheduleAuto();
  },

  // â”€ PROJECT LOGIC â”€
  projSpeed:function(p){
    var base=8;
    if(p.asgn){var s=G.s.staff.find(function(x){return x.id===p.asgn;});
      if(s){base=Math.max(4,Math.round((s.stats.speed+s.stats.design+s.stats.ui)/3*(s.mental/100)));
        if(G.s.tech['design_system'])base=Math.round(base*1.1);
        if(G.s.tech['ux_research']&&(p.tid==='app'||p.tid==='web'))base=Math.round(base*1.1);}}
    return base;
  },

  quality:function(p){
    var q2=50;
    if(p.asgn){var s=G.s.staff.find(function(x){return x.id===p.asgn;});
      if(s){q2=(s.stats.design+s.stats.ui+s.stats.speed)/3*(s.mental/100)*(1+(s.sense||60)/200);
        if(G.s.tech['design_system'])q2*=1.1;
        if(G.s.tech['ux_research']&&(p.tid==='app'||p.tid==='web'))q2*=1.12;
        if(G.s.tech['branding']&&p.tid==='brand')q2*=1.2;}}
    return clamp(Math.round(q2),0,100);
  },

  complete:function(p,cb){
    var qual=G.quality(p);G.s.projDone++;G.s.totalProj++;
    if(Math.random()*100<p.cli.mr){var mod=pick(MODS);G.showMod(mod,p,function(){G.doFinish(p,qual,cb);});return;}
    G.doFinish(p,qual,cb);
  },

  doFinish:function(p,qual,cb){
    var earned=Math.round(p.price*p.cli.pm);
    if(qual>=85)earned=Math.round(earned*1.2);else if(qual<40)earned=Math.round(earned*0.7);
    G.s.money+=earned;G.s.totalRev+=earned;
    G.s.rep=clamp(G.s.rep+Math.floor(qual/14)+p.cli.rg,0,100);
    if(Math.random()<0.3)G.s.sns+=ri(10,55);
    var assignedStaff=null;
    if(p.asgn){var s=G.s.staff.find(function(x){return x.id===p.asgn;});
      if(s){assignedStaff=s.nm;s.status='idle';if(p.sk)p.sk.forEach(function(k){if(s.stats[k]!==undefined)s.stats[k]=clamp(s.stats[k]+ri(1,3),0,99);});}}
    var rv=G.getReview(qual,p.cli);
    // â”€â”€ ä½œå“é›†ã«è¨˜éŒ² â”€â”€
    if(!G.s.portfolio)G.s.portfolio=[];
    // å¯¾å¿œã™ã‚‹PTYPEã®deliverablesæƒ…å ±ã‚’å–å¾—
    var ptype=PTYPES.find(function(pt){return pt.id===(p.tid||'logo');});
    var deliv=ptype?ptype.deliv:null;
    G.s.portfolio.unshift({
      id:p.id, nm:p.nm, tid:p.tid||'logo', tlb:p.tlb, tic:p.tic,
      cli:p.cli.lb, cliIc:p.cli.ic, cliId:p.cli.id||'norm', qual:qual,
      earned:earned, stars:rv[0], comment:rv[1],
      turn:G.s.turn, staff:assignedStaff,
      modCnt:p.modCnt||0, phase:G.s.phase,
      deliv:deliv, mjPrompt:G.genMJPrompt(p.tid||'logo',p.nm,qual)
    });
    if(G.s.portfolio.length>200)G.s.portfolio=G.s.portfolio.slice(0,200);
    // ä½œå“é›†ãƒãƒƒã‚¸æ›´æ–°
    var pb=q('bdg-portfolio');if(pb){pb.style.display='inline';pb.textContent=G.s.portfolio.length;}
    // AIç”Ÿæˆã‚­ãƒƒã‚¯ï¼ˆAPIã‚­ãƒ¼ãŒã‚ã‚‹å ´åˆã€éåŒæœŸã§SVGã‚’ç”Ÿæˆï¼‰
    var newEntry=G.s.portfolio[0];
    if(newEntry&&G.aiDesign.getKey()){
      setTimeout(function(){G.aiDesign.generate(newEntry.id,newEntry.tid,newEntry.nm,newEntry.cli,newEntry.qual);},1500);
    }
    G.showRev(rv[0],rv[1],earned,p.tlb,function(){addLog('ã€Œ'+p.nm+'ã€å®Œäº†ï¼'+rv[0]+' +'+fY(earned),'good');SFX.coin();G.updateHUD();if(cb)cb();});
  },

  getReview:function(qual,ct){
    var d=[['â˜…â˜…â˜…â˜…â˜…','å®Œç’§ã§ã™ï¼æ¬¡ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼'],['â˜…â˜…â˜…â˜…â˜†','ã¨ã¦ã‚‚è‰¯ã‹ã£ãŸã§ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚'],['â˜…â˜…â˜…â˜†â˜†','ã¾ã‚è‰¯ã‹ã£ãŸã§ã™ï¼ˆãã£ã‘ãªã„ï¼‰'],['â˜…â˜…â˜†â˜†â˜†','ã‚‚ã†ã¡ã‚‡ã£ã¨ä½•ã¨ã‹ãªã‚Šã¾ã›ã‚“ã§ã—ãŸã‹â€¦'],['â˜…â˜†â˜†â˜†â˜†','æ€ã£ã¦ãŸã®ã¨é•ã„ã¾ã—ãŸï¼ˆæœ€åˆã‹ã‚‰è¨€ãˆï¼‰']];
    if(ct.id==='god'&&qual>=70)return['â˜…â˜…â˜…â˜…â˜…','å®Œç’§ã§ã™ï¼SNSã«ä¸Šã’ã¦ã„ã„ã§ã™ã‹ï¼Ÿ'];
    if(ct.id==='pres')return['â˜…â˜…â˜…â˜†â˜†','æ‚ªããªã„ã§ã™ã­ã€‚æ¯å­ã‚‚æ°—ã«å…¥ã£ã¦ã¾ã—ãŸã€‚'];
    if(ct.id==='gov')return['â˜…â˜…â˜…â˜†â˜†','ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æ¤œåæ›¸ã‚’é€ä»˜ã—ã¾ã™ã€‚'];
    return d[qual>=85?0:qual>=70?1:qual>=55?2:qual>=40?3:4];
  },

  // â”€ ACTIONS â”€
  accept:function(id){
    SFX.click();var p=G.s.avail.find(function(x){return x.id===id;});if(!p)return;
    var mx=Math.max(2,G.s.staff.length);
    if(G.s.actives.length>=mx){notify('åŒæ™‚é€²è¡Œã¯æœ€å¤§'+mx+'ä»¶ã§ã™ï¼','warn');return;}
    var ap=JSON.parse(JSON.stringify(p));ap.prog=0;ap.asgn=null;ap.modCnt=0;
    G.s.actives.push(ap);G.s.avail=G.s.avail.filter(function(x){return x.id!==id;});
    addLog('ã€Œ'+p.nm+'ã€ã‚’å—æ³¨ï¼ç¤¾å“¡ã‚’ã‚¢ã‚µã‚¤ãƒ³ã—ã‚ˆã†ï¼','good');
    notify('ã€Œ'+p.nm+'ã€å—æ³¨ï¼åˆ¶ä½œã‚¿ãƒ–ã§ã‚¢ã‚µã‚¤ãƒ³ã—ã¦ãã ã•ã„ï¼','ok');
    SFX.good();G.renderAll();G.tab('active');
  },

  assign:function(pid,sid){
    SFX.click();var p=G.s.actives.find(function(x){return x.id===pid;});var s=G.s.staff.find(function(x){return x.id===sid;});
    if(!p||!s)return;
    if(s.status==='working'&&p.asgn!==sid){notify(s.nm+'ã¯åˆ¥ã®æ¡ˆä»¶æ‹…å½“ä¸­ã§ã™ï¼','warn');return;}
    if(p.asgn){var prev=G.s.staff.find(function(x){return x.id===p.asgn;});if(prev)prev.status='idle';}
    p.asgn=sid;s.status='working';
    addLog('ã€Œ'+p.nm+'ã€ã«'+s.nm+'ã‚’ã‚¢ã‚µã‚¤ãƒ³','');notify(s.nm+'ã‚’ã‚¢ã‚µã‚¤ãƒ³ã—ã¾ã—ãŸï¼','ok');G.renderAll();
  },

  unassign:function(pid){
    SFX.click();var p=G.s.actives.find(function(x){return x.id===pid;});if(!p)return;
    if(p.asgn){var s=G.s.staff.find(function(x){return x.id===p.asgn;});if(s)s.status='idle';}
    p.asgn=null;notify('ã‚¢ã‚µã‚¤ãƒ³ã‚’è§£é™¤ã—ã¾ã—ãŸ','warn');G.renderAll();
  },

  hire:function(idx){
    SFX.click();var h=G.s.hirePool[idx];if(!h)return;
    var cost=h.sal*2;if(G.s.money<cost){notify('è³‡é‡‘ä¸è¶³ï¼æ¡ç”¨ã‚³ã‚¹ãƒˆï¼š'+fY(cost),'danger');return;}
    var mx=[4,10,16,22,200,1000,5000][Math.min(G.s.phase,6)];if(G.s.staff.length>=mx){notify('ç¤¾å“¡æ•°ä¸Šé™ï¼ˆ'+mx+'åï¼‰ã«é”ã—ã¦ã„ã¾ã™ï¼','warn');return;}
    G.s.money-=cost;
    var emp={id:'e'+Date.now()+Math.random(),nm:h.nm,role:h.role,ic:h.ic,sal:h.sal,stats:JSON.parse(JSON.stringify(h.st)),mental:h.mental,status:'idle',isSelf:false,sense:ri(40,85)};
    G.s.staff.push(emp);G.s.hirePool.splice(idx,1);
    // ãƒ•ã‚§ãƒ¼ã‚º4ä»¥ä¸Šã¯æ¡ç”¨å¾Œã™ãè£œå……å€™è£œã‚’ç”Ÿæˆ
    G.genHire();
    addLog(emp.nm+'ï¼ˆ'+emp.role+'ï¼‰ãŒå…¥ç¤¾ï¼','good');notify(emp.nm+'ãŒå…¥ç¤¾ã—ã¾ã—ãŸï¼æ¡ç”¨ã‚³ã‚¹ãƒˆï¼š'+fY(cost),'ok');
    SFX.good();G.updateHUD();G.renderAll();
  },

  fire:function(id){
    if(!confirm('æœ¬å½“ã«è§£é›‡ã—ã¾ã™ã‹ï¼Ÿ'))return;SFX.click();
    var s=G.s.staff.find(function(x){return x.id===id;});if(!s||s.isSelf)return;
    G.s.actives.forEach(function(p){if(p.asgn===id)p.asgn=null;});
    G.s.staff=G.s.staff.filter(function(x){return x.id!==id;});
    G.s.rep=clamp(G.s.rep-3,0,100);addLog(s.nm+'ãŒé€€è·ã—ãŸã€‚è©•åˆ¤-3ã€‚','bad');
    notify(s.nm+'ãŒé€€è·ã—ã¾ã—ãŸã€‚','warn');SFX.bad();G.updateHUD();G.renderAll();
  },

  unlock:function(id){
    SFX.click();var nd=TECHS.reduce(function(a,r){return a.concat(r.nodes);},[]).find(function(n){return n.id===id;});if(!nd)return;
    if(G.s.tech[id]){notify('æ—¢ã«ç¿’å¾—æ¸ˆã¿ã§ã™','warn');return;}
    if(!nd.req.every(function(r){return G.s.tech[r];})){notify('å‰ææŠ€è¡“ã‚’å…ˆã«ç¿’å¾—ã—ã¦ãã ã•ã„','warn');return;}
    if(G.s.money<nd.cost){notify('è³‡é‡‘ä¸è¶³ï¼å¿…è¦ï¼š'+fY(nd.cost),'danger');return;}
    G.s.money-=nd.cost;G.s.tech[id]=true;
    addLog('æŠ€è¡“ã€Œ'+nd.nm+'ã€ã‚’ç¿’å¾—ï¼'+nd.ef,'good');notify('ã€Œ'+nd.nm+'ã€ã‚’ç¿’å¾—ï¼'+nd.ef,'ok');
    SFX.lvup();G.updateHUD();G.renderTech();
  },

  office:function(lv){
    SFX.click();var od=OFFICES[lv];
    if(G.s.offLevel>=lv){notify('æ—¢ã«ã“ã®ãƒ¬ãƒ™ãƒ«ä»¥ä¸Šã§ã™','warn');return;}
    if(G.s.money<od.cost){notify('è³‡é‡‘ä¸è¶³ï¼å¿…è¦ï¼š'+fY(od.cost),'danger');return;}
    G.s.money-=od.cost;G.s.offLevel=lv;G.s.rep=clamp(G.s.rep+od.rp,0,100);
    addLog('ã‚ªãƒ•ã‚£ã‚¹ã‚’ã€Œ'+od.nm+'ã€ã«ç§»è»¢ï¼è©•åˆ¤+'+od.rp,'good');notify('ã€Œ'+od.nm+'ã€ã«ç§»è»¢ï¼è©•åˆ¤+'+od.rp,'ok');
    q('olb').textContent=OFF_LB[lv];SFX.lvup();G.updateHUD();G.renderProg();
  },

  // â”€ PHASE / ENDING â”€
  phaseCheck:function(){
    var old=G.s.phase;
    var s=G.s;
    // Phase 6: ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ
    if(s.tech['global_expand']&&(s.dau||0)>=2000000&&s.totalRev>=10000000000)s.phase=Math.max(s.phase,6);
    // Phase 5: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
    else if(s.tech['platform_biz']&&(s.dau||0)>=200000&&s.totalRev>=1000000000)s.phase=Math.max(s.phase,5);
    // Phase 4: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­
    else if(s.tech['product_mgmt']&&s.totalRev>=80000000&&s.staff.length>=8)s.phase=Math.max(s.phase,4);
    // Phase 3: ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾
    else if(s.totalRev>=50000000&&s.staff.length>=8)s.phase=Math.max(s.phase,3);
    else if(s.totalRev>=8000000&&s.staff.length>=5)s.phase=Math.max(s.phase,2);
    else if(s.totalRev>=1500000&&s.staff.length>=2)s.phase=Math.max(s.phase,1);
    if(s.phase>old){
      var ns=['å€‹äººäº‹å‹™æ‰€','ãƒ‡ã‚¶ã‚¤ãƒ³äº‹å‹™æ‰€','ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª','ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾','ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­','ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¼æ¥­','ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ'];
      var msgs=['','ğŸ‰ äº‹å‹™æ‰€ã‚’å’æ¥­ï¼','ğŸŒŸ ã‚¹ã‚¿ã‚¸ã‚ªã«æ˜‡æ ¼ï¼','ğŸ¢ ä¼šç¤¾ã«ãªã£ãŸï¼','ğŸš€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­ã¸è»¢èº«ï¼','ğŸŒ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¸å›½ã®å¤œæ˜ã‘ï¼','âš¡ ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆã¸åˆ°é”ï¼ï¼'];
      addLog('ğŸ‰ ãƒ•ã‚§ãƒ¼ã‚ºã‚¢ãƒƒãƒ—ï¼â†’ã€Œ'+ns[s.phase]+'ã€','sys');
      notify((msgs[s.phase]||'ğŸ‰')+' '+ns[s.phase]+'ã¸é€²åŒ–ï¼','ok',7000);
      SFX.fanfare();G.genProjects();
      // ãƒ•ã‚§ãƒ¼ã‚ºã‚¢ãƒƒãƒ—æ™‚ã«ã‚ªãƒ•ã‚£ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’ä¸€æ™‚çš„ã«å¼·èª¿
      var ow=document.getElementById('owrap');
      if(ow){ow.style.boxShadow='0 0 40px rgba(99,102,241,0.6)';setTimeout(function(){if(ow)ow.style.boxShadow='';},3000);}
      if(s.phase>=4&&!s.dau){s.dau=500;addLog('ğŸ“± è‡ªç¤¾ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã‚’é–‹å§‹ï¼DAUã‚«ã‚¦ãƒ³ãƒˆé–‹å§‹','sys');}
      if(s.phase===6){addLog('âš¡ ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆã¸åˆ°é”ï¼ç¤¾å“¡5000åã¾ã§æ¡ç”¨å¯èƒ½ã«ãªã£ãŸï¼','sys');}
    }
  },

  endingCheck:function(){
    for(var i=0;i<ENDINGS.length;i++){if(ENDINGS[i].cond(G.s)){G.showEnding(ENDINGS[i]);return true;}}return false;
  },

  showEnding:function(e){
    var scr=q('SCR_END');q('end-t').textContent=e.tt;q('end-t').style.color=e.col;q('end-s').textContent=e.story;
    var avgM=G.s.staff.length>0?Math.round(G.s.staff.reduce(function(a,s){return a+s.mental;},0)/G.s.staff.length):0;
    q('end-st').innerHTML='<div class="si">ç´¯è¨ˆåç›Š<b>'+fY(G.s.totalRev)+'</b></div><div class="si">å®Œäº†æ¡ˆä»¶<b>'+G.s.projDone+'ä»¶</b></div><div class="si">ç·ä¿®æ­£å›æ•°<b>'+G.s.totalMods+'å›</b></div><div class="si">å—è³æ­´<b>'+G.s.awards+'ä»¶</b></div><div class="si">æœ€çµ‚ã‚¿ãƒ¼ãƒ³<b>ç¬¬'+G.s.turn+'é€±</b></div><div class="si">ç¤¾å“¡æ•°<b>'+G.s.staff.length+'å</b></div><div class="si">SNS<b>'+G.s.sns.toLocaleString()+'</b></div><div class="si">å¹³å‡ãƒ¡ãƒ³ã‚¿ãƒ«<b>'+avgM+'</b></div>';
    scr.classList.add('open');SFX.fanfare();G.busy=false;
  },

  // â”€ MODALS â”€
  showEv:function(ev,cb){
    if(!ev){if(cb)cb();return;}
    // â”€â”€ AIãƒ¢ãƒ¼ãƒ‰: ãƒ¢ãƒ¼ãƒ€ãƒ«éè¡¨ç¤ºã§å³åˆ¤æ–­ â”€â”€
    if(G.aiMode){
      G.aiChooseEv(ev,cb);return;
    }
    SFX.ev();
    var mb=q('mbox-ev');mb.className='mbox '+(ev.ty||'');
    q('mev-ic').textContent=ev.ic;q('mev-tt').textContent=ev.tt;q('mev-ds').textContent=ev.ds;
    var el=q('mev-ch');el.innerHTML='';
    ev.ch.forEach(function(c){
      var btn=document.createElement('button');btn.className='mch';
      btn.innerHTML='<span>'+esc(c.tx)+'</span><span class="ef">'+esc(c.ef)+'</span>';
      btn.onclick=function(){SFX.click();try{c.fn();}catch(e2){console.error(e2);}
        q('modal-ev').classList.remove('open');G.updateHUD();G.renderAll();addLog('[ã‚¤ãƒ™ãƒ³ãƒˆ] '+ev.tt,'evt');if(cb)cb();};
      el.appendChild(btn);
    });
    q('modal-ev').classList.add('open');
  },

  // AIãŒã‚¤ãƒ™ãƒ³ãƒˆã‚’è‡ªå‹•åˆ¤æ–­
  aiChooseEv:function(ev,cb){
    if(!ev||!ev.ch||ev.ch.length===0){if(cb)cb();return;}
    // é¸æŠè‚¢ã®efãƒ†ã‚­ã‚¹ãƒˆã‚’è§£æã—ã¦ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
    var best=0;
    var bestScore=-9999;
    ev.ch.forEach(function(ch,i){
      var score=0;
      var ef=ch.ef||'';
      // ãƒã‚¸ãƒ†ã‚£ãƒ–æŒ‡æ¨™
      if(ef.match(/è©•åˆ¤\+|rep\+/))score+=3;
      if(ef.match(/è³‡é‡‘\+|money\+/))score+=4;
      if(ef.match(/SNS\+/))score+=2;
      if(ef.match(/ãƒ¡ãƒ³ã‚¿ãƒ«\+/))score+=2;
      if(ef.match(/æŠ€è¡“|ã‚¹ã‚­ãƒ«\+/))score+=2;
      // ãƒã‚¬ãƒ†ã‚£ãƒ–æŒ‡æ¨™
      if(ef.match(/è©•åˆ¤-/))score-=3;
      if(ef.match(/è³‡é‡‘-/))score-=4;
      if(ef.match(/ç‚ä¸Š\+|fire\+/))score-=5;
      if(ef.match(/ãƒ¡ãƒ³ã‚¿ãƒ«-/))score-=2;
      if(ef.match(/é€€è·|quit/))score-=8;
      if(ef.match(/ãƒ–ãƒ©ãƒƒã‚¯\+/))score-=3;
      // ç¾åœ¨ã®çŠ¶æ…‹ã«å¿œã˜ãŸè£œæ­£
      if(G.s.fire>60&&ef.match(/ç‚ä¸Š-|fire-/))score+=6;
      if(G.s.money<300000&&ef.match(/è³‡é‡‘\+/))score+=5;
      if(G.s.black>70&&ef.match(/ãƒ–ãƒ©ãƒƒã‚¯-/))score+=4;
      // æœ€åˆã®é¸æŠè‚¢ã¯åŸºæœ¬çš„ã«ã€Œå—ã‘å…¥ã‚Œã€ç³»ãŒå¤šã„ â†’ å¾®åŠ ç‚¹
      if(i===0)score+=0.5;
      if(score>bestScore){bestScore=score;best=i;}
    });
    var chosen=ev.ch[best];
    // å®Ÿè¡Œ
    try{chosen.fn();}catch(e2){console.error(e2);}
    addLog('[AIåˆ¤æ–­] '+ev.tt+' â†’ ã€Œ'+chosen.tx+'ã€','sys');
    G.aiThink('EVENT',ev.ic+' '+ev.tt+'\nâ†’ ã€Œ'+chosen.tx+'ã€\n'+chosen.ef);
    G.updateHUD();G.renderAll();
    if(cb)cb();
  },

  showMod:function(mod,proj,cb){
    proj.modCnt=(proj.modCnt||0)+1;G.s.totalMods++;
    var choices=[
      {tx:mod.at,ef:'ãƒ¡ãƒ³ã‚¿ãƒ«'+mod.dm,fn:function(){if(proj.asgn){var s=G.s.staff.find(function(x){return x.id===proj.asgn;});if(s)s.mental=clamp(s.mental+mod.dm,0,100);}G.s.black=clamp(G.s.black+3,0,100);}},
      {tx:mod.rt,ef:'è©•åˆ¤'+mod.rp,fn:function(){G.s.rep=clamp(G.s.rep+mod.rp,0,100);proj.price=Math.round(proj.price*0.9);}}
    ];
    // â”€â”€ AIãƒ¢ãƒ¼ãƒ‰: å³åˆ¤æ–­ â”€â”€
    if(G.aiMode){
      // è©•åˆ¤ãŒé«˜ã„æ™‚ã¯è©•åˆ¤å„ªå…ˆã€ãƒ¡ãƒ³ã‚¿ãƒ«ãŒä½ã„æ™‚ã¯ãƒ¡ãƒ³ã‚¿ãƒ«å„ªå…ˆ
      var avgMental=G.s.staff.length>0?G.s.staff.reduce(function(a,s){return a+s.mental;},0)/G.s.staff.length:80;
      var chooseRep=(avgMental>50&&G.s.rep<70);
      var chosen=chooseRep?choices[1]:choices[0];
      try{chosen.fn();}catch(e2){console.error(e2);}
      addLog('[AIä¿®æ­£å¯¾å¿œ] ã€Œ'+proj.nm+'ã€ä¿®æ­£'+proj.modCnt+'å›ç›® â†’ '+chosen.tx,'sys');
      var face=proj.modCnt<=3?'ğŸ˜¤':proj.modCnt<=6?'ğŸ˜¡':'ğŸ’€';
      G.aiThink('REVISION',face+' ä¿®æ­£ä¾é ¼ '+proj.modCnt+'å›ç›®\nã€Œ'+proj.nm+'ã€\nâ†’ '+chosen.tx);
      G.updateHUD();if(cb)cb();return;
    }
    SFX.alert();
    q('mod-cnt').textContent='ç¬¬'+proj.modCnt+'å›';
    q('mod-face').textContent=proj.modCnt<=3?'ğŸ˜¤':proj.modCnt<=6?'ğŸ˜¡':'ğŸ’€';
    q('mod-pn').textContent='ã€Œ'+proj.nm+'ã€';q('mod-tx').textContent=mod.tx;
    var el=q('mod-ch');el.innerHTML='';
    choices.forEach(function(c){
      var btn=document.createElement('button');btn.className='mch';
      btn.innerHTML='<span>'+esc(c.tx)+'</span><span class="ef">'+esc(c.ef)+'</span>';
      btn.onclick=function(){SFX.click();c.fn();q('modal-mod').classList.remove('open');G.updateHUD();if(cb)cb();};
      el.appendChild(btn);
    });
    q('modal-mod').classList.add('open');
  },

  showRev:function(stars,comment,earned,typeLb,cb){
    // AIãƒ¢ãƒ¼ãƒ‰: å³ã‚¹ã‚­ãƒƒãƒ—ï¼ˆãƒ­ã‚°ã ã‘å‡ºã™ï¼‰
    if(G.aiMode){
      SFX.coin();
      G.aiThink('COMPLETE',stars+' '+typeLb+'å®Œäº†\n'+comment+'\n+'+fY(earned));
      if(cb)cb();return;
    }
    q('rev-st').textContent=stars;q('rev-cm').textContent=comment;
    q('rev-ef').innerHTML='<span style="color:var(--ok)">+'+fY(earned)+'</span>ã€€<span style="color:var(--t3)">'+esc(typeLb)+'æ¡ˆä»¶å®Œäº†</span>';
    q('modal-rev').classList.add('open');G.revCb=cb;
    q('btn-ok-rev').onclick=function(){q('modal-rev').classList.remove('open');SFX.coin();if(G.revCb){G.revCb();G.revCb=null;}};
  },

  // â”€ HUD â”€
  updateHUD:function(){
    q('hco').textContent=G.s.compName||'å€‹äººäº‹å‹™æ‰€';
    var m=G.s.money,hm=q('hmoney');hm.textContent=fY(m).replace('å††','');hm.className='hs-v g'+(m<100000?' blink':'');
    q('hrep').textContent=G.s.rep;
    var hf=q('hfire');hf.textContent=G.s.fire;hf.className='hs-v r'+(G.s.fire>=50?' blink':'');
    q('hsns').textContent=fM(G.s.sns);q('hstaff').textContent=G.s.staff.length;q('hblack').textContent=G.s.black;
    q('hph').textContent='PHASE '+G.s.phase;
    // ä½œå“é›†ãƒãƒƒã‚¸
    var pb2=q('bdg-portfolio');if(pb2&&G.s.portfolio&&G.s.portfolio.length>0){pb2.style.display='inline';pb2.textContent=G.s.portfolio.length;}
    q('olb').textContent=OFF_LB[G.s.offLevel];
    // å¹´æœˆæ—¥è¨ˆç®—: 2025å¹´4æœˆã‚¹ã‚¿ãƒ¼ãƒˆ / 1é€±=7æ—¥
    var startY=2025, startM=4;
    var totalWeeks=G.s.turn-1;
    var totalMonths=Math.floor(totalWeeks/4);
    var weekInMonth=(totalWeeks%4)+1;
    var absMonth=startM-1+totalMonths;
    var dispY=startY+Math.floor(absMonth/12);
    var dispM=(absMonth%12)+1;
    var jpM=['1æœˆ','2æœˆ','3æœˆ','4æœˆ','5æœˆ','6æœˆ','7æœˆ','8æœˆ','9æœˆ','10æœˆ','11æœˆ','12æœˆ'];
    var dm=q('hdate-main'); if(dm)dm.textContent=dispY+'å¹´'+jpM[dispM-1];
    var dd=q('hdate-day'); if(dd)dd.textContent='ç¬¬'+weekInMonth+'é€±';
    var fw=q('wb-fire');if(fw)fw.style.display=G.s.fire>=50?'block':'none';
    var mw=q('wb-money');if(mw)mw.style.display=(G.s.money<200000&&G.s.money>=0)?'block':'none';
    var bp=q('bdg-proj');if(bp)bp.textContent=G.s.avail.length;
    var phN=['å€‹äººäº‹å‹™æ‰€','ãƒ‡ã‚¶ã‚¤ãƒ³äº‹å‹™æ‰€','ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª','ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾','ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­','ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¼æ¥­','ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ'];
    var hdau=q('hdau-wrap');if(hdau)hdau.style.display=G.s.phase>=4?'flex':'none';
    var harr=q('harr-wrap');if(harr)harr.style.display=G.s.phase>=4?'flex':'none';
    if(G.s.phase>=4){var dv=q('hdau');if(dv)dv.textContent=(G.s.dau||0)>=10000?Math.round((G.s.dau||0)/10000)+'ä¸‡':(G.s.dau||0).toLocaleString();var av=q('harr');if(av)av.textContent=(G.s.arr||0)>=100000000?Math.round((G.s.arr||0)/100000000)+'å„„':(G.s.arr||0)>=10000?Math.round((G.s.arr||0)/10000)+'ä¸‡':'--';}
    var ti=q('tinfo');if(ti){var wInM=(G.s.turn%4||4);var remW=4-wInM;
    var prodInfo=G.s.phase>=4?' ï¼ DAU '+((G.s.dau||0)>=10000?Math.round((G.s.dau||0)/10000)+'ä¸‡':(G.s.dau||0).toLocaleString()):'';
  if(G.aiMode){
    ti.innerHTML='<b>'+dispY+'å¹´'+jpM[dispM-1]+'ãƒ»ç¬¬'+weekInMonth+'é€±</b> ï¼ '+phN[Math.min(G.s.phase,6)]+prodInfo+'<br><span class="hint" style="color:#6366f1;font-weight:600">ğŸ¤– AI AGENT ãŒå…¨çµŒå–¶ã‚’ç®¡ç†ä¸­ â”€ ã‚ãªãŸã¯è¦‹ã¦ã„ã‚‹ã ã‘ã§OK</span>';
  } else {
    ti.innerHTML='<b>'+dispY+'å¹´'+jpM[dispM-1]+'ãƒ»ç¬¬'+weekInMonth+'é€±</b> ï¼ '+phN[Math.min(G.s.phase,6)]+prodInfo+'<br><span class="hint">æœˆæ¬¡ã‚³ã‚¹ãƒˆ ã‚ã¨'+remW+'é€± ï¼ æ¡ˆä»¶'+G.s.avail.length+'ä»¶ ï¼ <kbd>SPACE</kbd> æ¬¡ã®é€± ï¼ <kbd>A</kbd> ã‚ªãƒ¼ãƒˆ</span>';
  }}
  },

  // â”€ TAB â”€
  tab:function(id){
    SFX.click();G.curTab=id;
    document.querySelectorAll('.panel').forEach(function(p){p.classList.remove('on');});
    document.querySelectorAll('.nb').forEach(function(b){b.classList.remove('on');});
    var pan=q('pan-'+id),nav=q('nb-'+id);
    if(pan)pan.classList.add('on');if(nav)nav.classList.add('on');
    switch(id){
      case 'dash':   G.renderDash();break;
      case 'proj':   G.renderProj();break;
      case 'active': G.renderActive();break;
      case 'staff':  G.renderStaff();break;
      case 'hire':   G.renderHire();break;
      case 'tech':   G.renderTech();break;
      case 'prog':   G.renderProg();break;
      case 'ai':     G.renderAI();break;
      case 'murmur': G.renderMurmur();break;
      case 'portfolio': G.renderPortfolio();G.aiDesign.updateKeyStatus();break;
    }
  },

  renderAll:function(){
    G.updateHUD();renderLog();
    switch(G.curTab){
      case 'dash':   G.renderDash();break;
      case 'proj':   G.renderProj();break;
      case 'active': G.renderActive();break;
      case 'staff':  G.renderStaff();break;
      case 'hire':   G.renderHire();break;
      case 'tech':   G.renderTech();break;
      case 'prog':   G.renderProg();break;
      case 'ai':     G.renderAI();break;
      case 'murmur': G.renderMurmur();break;
      case 'portfolio': G.renderPortfolio();break;
    }
  },

  // â”€ RENDER AI â”€
  renderAI:function(){
    var s=G.s;
    var atb=q('ai-toggle-big');
    if(atb){
      atb.textContent=G.aiMode?'ğŸ›‘ AIãƒ¢ãƒ¼ãƒ‰ OFF':'ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ ON';
      atb.className='ai-toggle-big'+(G.aiMode?' on':'');
    }
    var dt=q('ai-dash-title');
    var ds=q('ai-dash-sub');
    if(G.aiMode){
      if(dt)dt.textContent='AIçµŒå–¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ç¨¼åƒä¸­';
      if(ds)ds.innerHTML='å—æ³¨ãƒ»ã‚¢ã‚µã‚¤ãƒ³ãƒ»æ¡ç”¨ãƒ»æŠ€è¡“ç¿’å¾—ãƒ»ç§»è»¢ã‚’å…¨è‡ªå‹•å‡¦ç†ä¸­ã€‚<br><strong>ã‚ãªãŸã¯é€±ã‚’é€²ã‚ã‚‹ã ã‘ã§ã™ã€‚</strong>';
    } else {
      if(dt)dt.textContent='AIçµŒå–¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ';
      if(ds)ds.innerHTML='å—æ³¨ãƒ»ã‚¢ã‚µã‚¤ãƒ³ãƒ»æ¡ç”¨ãƒ»æŠ€è¡“ç¿’å¾—ãƒ»ã‚ªãƒ•ã‚£ã‚¹ç§»è»¢ã‚’<br>å…¨è‡ªå‹•ã§æœ€é©åˆ¤æ–­ã—ã¾ã™ã€‚ã‚ãªãŸã¯åƒãã ã‘ã€‚';
    }
    // KPI
    var totalOrders=G.aiActionLog.filter(function(l){return l.type==='order';}).length;
    var totalHires=G.aiActionLog.filter(function(l){return l.type==='hire';}).length;
    var totalTechs=G.aiActionLog.filter(function(l){return l.type==='tech';}).length;
    var totalRisks=G.aiActionLog.filter(function(l){return l.type==='risk';}).length;
    var avgMental=s.staff.length>0?Math.round(s.staff.reduce(function(a,st){return a+st.mental;},0)/s.staff.length):0;
    var kpis=[
      {l:'è‡ªå‹•å—æ³¨æ•°',v:totalOrders+'ä»¶',d:'ç´¯è¨ˆ'},
      {l:'è‡ªå‹•æ¡ç”¨æ•°',v:totalHires+'å',d:'ç´¯è¨ˆ'},
      {l:'æŠ€è¡“ç¿’å¾—',v:totalTechs+'ä»¶',d:'ç´¯è¨ˆ'},
      {l:'ç‚ä¸Šå¯¾ç­–',v:totalRisks+'å›',d:'ç´¯è¨ˆ'},
      {l:'ç¾åœ¨ã®è³‡é‡‘',v:fY(s.money).replace('å††',''),d:''},
      {l:'å¹³å‡ãƒ¡ãƒ³ã‚¿ãƒ«',v:avgMental,d:avgMental>=70?'ğŸ˜Š è‰¯å¥½':avgMental>=45?'ğŸ˜ æ™®é€š':'ğŸ˜° å±é™º'},
    ];
    var kg=q('ai-kpi-grid');
    if(kg){
      kg.innerHTML=kpis.map(function(k){
        return '<div class="ai-kpi"><div class="ai-kpi-l">'+esc(k.l)+'</div><div class="ai-kpi-v">'+esc(k.v)+'</div><div class="ai-kpi-d">'+esc(k.d)+'</div></div>';
      }).join('');
    }
    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°
    var lp=q('ai-action-log');
    var lc=q('ai-log-cnt');
    if(lp){
      if(G.aiActionLog.length===0){
        lp.innerHTML='<div class="empty">AIãƒ¢ãƒ¼ãƒ‰ã‚’ONã«ã™ã‚‹ã¨ã“ã“ã«çµŒå–¶åˆ¤æ–­ãŒè¨˜éŒ²ã•ã‚Œã¾ã™</div>';
      } else {
        var typeMap={'order':'å—æ³¨','hire':'æ¡ç”¨','tech':'æŠ€è¡“','risk':'ç‚ä¸Šå¯¾ç­–','assign':'é…ç½®','other':'ãã®ä»–'};
        var rows=G.aiActionLog.slice().reverse().slice(0,50).map(function(lg){
          return '<div class="ai-log-row"><span class="ai-log-turn">W'+lg.turn+'</span><span class="ai-log-action">'+esc(lg.msg)+'</span><span class="ai-log-type '+lg.type+'">'+esc(typeMap[lg.type]||'ãã®ä»–')+'</span></div>';
        }).join('');
        lp.innerHTML=rows;
        if(lc)lc.textContent=G.aiActionLog.length+'ä»¶';
      }
    }
  },

  // â”€ RENDER DASH â”€
  renderDash:function(){
    var avgM=G.s.staff.length>0?Math.round(G.s.staff.reduce(function(a,s){return a+s.mental;},0)/G.s.staff.length):0;
    var stats=[
      {l:'è©•ã€€åˆ¤',v:G.s.rep,mx:100,c:'var(--teal)'},
      {l:'ç‚ä¸Šç‡',v:G.s.fire,mx:100,c:'var(--red)'},
      {l:'SNSãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼',v:G.s.sns,mx:Math.max(10000,G.s.sns),c:'var(--acc2)'},
      {l:'ç¤¾å“¡ãƒ¡ãƒ³ã‚¿ãƒ«å¹³å‡',v:avgM,mx:100,c:avgM<40?'var(--red)':'var(--ok)'},
      {l:'ç´¯è¨ˆåç›Š',v:G.s.totalRev,mx:Math.max(100000000,G.s.totalRev),c:'var(--gold)',fmt:'Y'},
      {l:'ãƒ–ãƒ©ãƒƒã‚¯åº¦',v:G.s.black,mx:100,c:'var(--warn)'},
    ];
    var h='';stats.forEach(function(s){h+='<div class="dc"><div class="dc-l">'+s.l+'</div><div class="dc-v" style="color:'+s.c+'">'+(s.fmt==='Y'?fY(s.v):s.v.toLocaleString())+'</div><div class="dc-b"><div class="dc-bf" style="width:'+Math.min(100,s.v/s.mx*100)+'%;background:'+s.c+'"></div></div></div>';});
    q('dgrid').innerHTML=h;
    var cnt=q('dash-cnt');if(cnt)cnt.textContent=G.s.actives.length+'ä»¶';
    var el=q('dash-ap');if(!el)return;
    if(!G.s.actives.length){el.innerHTML='<div class="empty">é€²è¡Œä¸­ã®æ¡ˆä»¶ãªã—ã€‚<br>æ¡ˆä»¶å—æ³¨ã‚¿ãƒ–ã‹ã‚‰å—æ³¨ã—ã¦ãã ã•ã„ã€‚</div>';return;}
    el.innerHTML=G.s.actives.map(function(p){return G.buildAP(p,true);}).join('');
    renderLog();
  },

  // â”€ RENDER PROJ â”€
  renderProj:function(){
    var hint=q('proj-hint');if(hint)hint.textContent='æ¬¡ã®æ›´æ–°ã¾ã§'+(4-(G.s.turn%4||4))+'é€±';
    var el=q('proj-list');if(!el)return;
    if(!G.s.avail.length){el.innerHTML='<div class="empty">å—æ³¨å¯èƒ½ãªæ¡ˆä»¶ãªã—ã€‚<br>ã€Œæ¬¡ã®é€±ã¸ã€ã§æ–°æ¡ˆä»¶ãŒå±Šãã¾ã™ã€‚</div>';return;}
    var mx=Math.max(2,G.s.staff.length);
    el.innerHTML=G.s.avail.map(function(p){
      return '<div class="pc"><div style="display:flex;justify-content:space-between;margin-bottom:4px"><span class="ptype '+p.tcss+'">'+p.tic+' '+p.tlb+'</span><span class="pst">'+'â˜…'.repeat(p.diff)+'â˜†'.repeat(5-p.diff)+'</span></div>'
        +'<div class="pn">'+esc(p.nm)+'</div>'
        +'<div class="cli '+p.cli.cls+'">'+p.cli.ic+' '+p.cli.lb+'</div>'
        +'<div class="pm"><span>ä¿®æ­£ãƒªã‚¹ã‚¯:'+p.cli.mr+'%</span><span>é›£æ˜“åº¦:'+p.diff+'</span><span>ã€†'+p.dead+'é€±</span></div>'
        +'<div class="pdesc">ã€Œ'+p.cli.desc+'ã€</div>'
        +'<div class="pf"><span class="ppr">'+fY(p.price)+'</span>'
        +'<span class="pdl'+(p.urg?' urg':'')+'">'+( p.urg?'âš¡ç·Šæ€¥ ':'')+p.dead+'é€±</span>'
        +'<button class="btn-acc" '+(G.s.actives.length>=mx?'disabled':'')+' onclick="G.accept(\''+p.id+'\')">å—æ³¨ã™ã‚‹</button></div></div>';
    }).join('');
  },

  // â”€ RENDER ACTIVE â”€
  renderActive:function(){
    var el=q('active-list');if(!el)return;
    if(!G.s.actives.length){el.innerHTML='<div class="empty">é€²è¡Œä¸­ã®æ¡ˆä»¶ãªã—ã€‚<br>æ¡ˆä»¶å—æ³¨ã‚¿ãƒ–ã‹ã‚‰å—æ³¨ã—ã¦ãã ã•ã„ã€‚</div>';return;}
    el.innerHTML=G.s.actives.map(function(p){return G.buildAP(p,false);}).join('');
  },

  buildAP:function(p,compact){
    var assigned=p.asgn?G.s.staff.find(function(s){return s.id===p.asgn;}):null;
    var spd=G.projSpeed(p),left=spd>0?Math.ceil((100-p.prog)/spd):99;
    var html='<div class="ap"><div class="ap-h"><div><span class="ptype '+p.tcss+'" style="font-size:6px;padding:1px 4px">'+p.tic+' '+p.tlb+'</span><div class="ap-n" style="margin-top:3px">'+esc(p.nm)+'</div></div><div style="text-align:right"><div class="ap-pct">'+p.prog+'%</div><div style="font-size:7px;color:var(--t3)">æ®‹ç´„'+left+'é€±</div></div></div>'
      +'<div class="ap-m"><span>'+p.cli.ic+' '+p.cli.lb+'</span><span>'+fY(p.price)+'</span>'+(assigned?'<span>ğŸ‘¤ '+assigned.nm+'</span>':'<span style="color:var(--warn)">âš  æœªã‚¢ã‚µã‚¤ãƒ³</span>')+'<span>ä¿®æ­£'+( p.modCnt||0)+'å›</span></div>'
      +'<div class="apbar"><div class="apbf" style="width:'+p.prog+'%"></div></div>';
    if(!compact){
      var idle=G.s.staff.filter(function(s){return s.status==='idle'||s.id===p.asgn;});
      var chips=idle.map(function(s){var cur=p.asgn===s.id;var busy=s.status==='working'&&!cur;return'<button class="ach'+(cur?' sel':'')+(busy?' bsy':'')+'" onclick="G.assign(\''+p.id+'\',\''+s.id+'\')">'+s.ic+' '+s.nm+'</button>';}).join('');
      var unBtn=assigned?'<button class="ach" style="color:var(--red)" onclick="G.unassign(\''+p.id+'\')">âœ• è§£é™¤</button>':'';
      html+='<div class="apass"><span class="apal">ã‚¢ã‚µã‚¤ãƒ³ï¼š</span>'+chips+unBtn+'</div>';
    }
    html+='</div>';return html;
  },

  // â”€ RENDER STAFF â”€
  renderStaff:function(){
    var mx=[4,10,16,22,200,1000,5000][Math.min(G.s.phase,6)];
    var cnt=q('staff-cnt');if(cnt)cnt.textContent=G.s.staff.length+'å / ä¸Šé™'+mx+'å';
    var el=q('staff-list');if(!el)return;
    if(!G.s.staff.length){el.innerHTML='<div class="empty">ç¤¾å“¡ãŒã„ã¾ã›ã‚“</div>';return;}
    // 20äººè¶…ãˆãŸã‚‰ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
    if(G.s.staff.length>20){
      var avgM=Math.round(G.s.staff.reduce(function(a,s){return a+s.mental;},0)/G.s.staff.length);
      var working=G.s.staff.filter(function(s){return s.status==='working';}).length;
      var tired=G.s.staff.filter(function(s){return s.mental<30;}).length;
      var summary='<div style="background:var(--bg2);border-radius:8px;padding:10px;margin-bottom:8px;font-size:7.5px;line-height:2">'
        +'<div style="display:grid;grid-template-columns:1fr 1fr;gap:4px">'
        +'<div>ğŸ‘¥ ç¤¾å“¡æ•°: <b>'+G.s.staff.length+'å</b></div>'
        +'<div>âš™ï¸ ç¨¼åƒä¸­: <b>'+working+'å</b></div>'
        +'<div>ğŸ˜Š å¹³å‡ãƒ¡ãƒ³ã‚¿ãƒ«: <b>'+avgM+'</b></div>'
        +'<div>ğŸ˜« ç–²å¼Šä¸­: <b style="color:var(--red)">'+tired+'å</b></div>'
        +'</div></div>';
      var grid=G.s.staff.map(function(s,i){
        var c2=s.mental<30?'var(--red)':s.status==='working'?'var(--acc)':'var(--ok)';
        var tip=s.nm+' '+s.role+' ãƒ¡ãƒ³ã‚¿ãƒ«:'+s.mental;
        return'<div title="'+tip+'" style="display:flex;flex-direction:column;align-items:center;padding:4px;border:1px solid var(--bord2);border-radius:4px;cursor:default;gap:2px">'
          +'<div style="font-size:14px">'+s.ic+'</div>'
          +'<div style="font-size:5.5px;color:var(--t2);text-align:center;max-width:36px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis">'+s.nm.split(' ')[0]+'</div>'
          +'<div style="width:100%;height:3px;background:var(--bg3);border-radius:2px"><div style="width:'+s.mental+'%;height:100%;background:'+c2+';border-radius:2px"></div></div>'
          +(!s.isSelf?'<button onclick="G.fire(\''+s.id+'\')" style="font-size:5px;padding:1px 3px;background:none;border:1px solid var(--bord2);border-radius:2px;color:var(--t3);cursor:pointer">Ã—</button>':'')
          +'</div>';
      }).join('');
      el.innerHTML=summary+'<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(44px,1fr));gap:4px">'+grid+'</div>';
      return;
    }
    el.innerHTML=G.s.staff.map(function(s){
      var dotC=s.mental<30?'var(--red)':s.status==='working'?'var(--acc)':'var(--ok)';
      var mCls='sbf mn'+(s.mental<40?' low':'');
      var stCls=s.mental<30?'st-tire':s.status==='working'?'st-work':'st-idle';
      var stTx=s.mental<30?'ğŸ˜« ç–²å¼Šä¸­':s.status==='working'?'âš™ï¸ åˆ¶ä½œä¸­':'âœ… å¾…æ©Ÿä¸­';
      var ap2=G.s.actives.find(function(p){return p.asgn===s.id;});
      return'<div class="sc"><div class="sc-av">'+s.ic+'<div class="sc-dot" style="background:'+dotC+'"></div></div>'
        +'<div class="sc-b"><div class="sc-n">'+esc(s.nm)+(s.isSelf?' <span style="font-size:7px;color:var(--t3)">(ã‚ãªãŸ)</span>':'')+'</div>'
        +'<div class="sc-r">'+esc(s.role)+(s.isSelf?'':' ï¼ æœˆçµ¦'+fY(s.sal))+'</div>'
        +'<div class="sbars">'
        +'<div class="srow"><span class="sl">ãƒ‡ã‚¶ã‚¤ãƒ³</span><div class="sb"><div class="sbf d" style="width:'+s.stats.design+'%"></div></div><span class="sn">'+s.stats.design+'</span></div>'
        +'<div class="srow"><span class="sl">ã‚¹ãƒ”ãƒ¼ãƒ‰</span><div class="sb"><div class="sbf sp" style="width:'+s.stats.speed+'%"></div></div><span class="sn">'+s.stats.speed+'</span></div>'
        +'<div class="srow"><span class="sl">ãƒ­ã‚¸ãƒƒã‚¯</span><div class="sb"><div class="sbf lg" style="width:'+s.stats.logic+'%"></div></div><span class="sn">'+s.stats.logic+'</span></div>'
        +'<div class="srow"><span class="sl">UIåŠ›</span><div class="sb"><div class="sbf ui" style="width:'+s.stats.ui+'%"></div></div><span class="sn">'+s.stats.ui+'</span></div>'
        +'<div class="srow"><span class="sl">ã‚³ãƒŸãƒ¥åŠ›</span><div class="sb"><div class="sbf cm" style="width:'+s.stats.comm+'%"></div></div><span class="sn">'+s.stats.comm+'</span></div>'
        +'<div class="srow"><span class="sl">ãƒ¡ãƒ³ã‚¿ãƒ«</span><div class="sb"><div class="'+mCls+'" style="width:'+s.mental+'%"></div></div><span class="sn">'+s.mental+'</span></div>'
        +'</div>'
        +'<div class="sc-f"><span class="stbadge '+stCls+'">'+stTx+'</span>'+(ap2?'<span style="font-size:7px;color:var(--acc)">ã€Œ'+ap2.nm+'ã€</span>':'')+(s.mental<40&&!s.isSelf?'<span style="font-size:7px;color:var(--red)">âš  ä¼‘æ¯ãŒå¿…è¦</span>':'')
        +(!s.isSelf?'<button class="btn-fir" onclick="G.fire(\''+s.id+'\')">è§£é›‡</button>':'')+'</div></div></div>';
    }).join('');
  },

  // â”€ RENDER HIRE â”€
  renderHire:function(){
    var el=q('hire-list');if(!el)return;
    // ãƒ•ã‚§ãƒ¼ã‚º4ä»¥ä¸Šã¯å¸¸ã«è£œå……
    if(G.s.hirePool.length<4)G.genHire();
    var mx=[4,10,16,22,200,1000,5000][Math.min(G.s.phase,6)];
    var atLimit=G.s.staff.length>=mx;
    var hdr='<div style="display:flex;justify-content:space-between;align-items:center;padding:4px 2px 8px;font-size:7.5px;color:var(--t3)">'
      +'<span>ç¤¾å“¡ '+G.s.staff.length+' / ä¸Šé™ '+mx+'å</span>'
      +'<button onclick="G.genHire();G.renderHire();" style="font-size:7px;padding:3px 8px;background:var(--bg3);border:1px solid var(--bord2);border-radius:4px;cursor:pointer;color:var(--t2)">ğŸ”„ å€™è£œæ›´æ–°</button>'
      +'</div>';
    if(!G.s.hirePool.length){el.innerHTML=hdr+'<div class="empty">ç¾åœ¨ã€æ¡ç”¨å€™è£œãŒã„ã¾ã›ã‚“ã€‚<br>ã€Œå€™è£œæ›´æ–°ã€ã‚’æŠ¼ã™ã‹æ¬¡ã®æœˆæ¬¡æ›´æ–°ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚</div>';return;}
    el.innerHTML=hdr+G.s.hirePool.map(function(h,i){
      var cost=h.sal*2,ok=G.s.money>=cost&&!atLimit;
      var riskTxt=h.risk?('<div class="hc-risk">âš  '+esc(h.risk)+'</div>'):'';
      return'<div class="hc"><div class="hc-h"><div><div class="hc-n">'+h.ic+' '+esc(h.nm)+'</div><div class="hc-ro">'+esc(h.role)+'</div></div><div class="hc-sl">'+fY(h.sal).replace('å††','')+'<span>/æœˆ</span></div></div>'
        +'<div class="sbars" style="margin-bottom:8px">'
        +'<div class="srow"><span class="sl">ãƒ‡ã‚¶ã‚¤ãƒ³</span><div class="sb"><div class="sbf d" style="width:'+h.st.design+'%"></div></div><span class="sn">'+h.st.design+'</span></div>'
        +'<div class="srow"><span class="sl">ã‚¹ãƒ”ãƒ¼ãƒ‰</span><div class="sb"><div class="sbf sp" style="width:'+h.st.speed+'%"></div></div><span class="sn">'+h.st.speed+'</span></div>'
        +'<div class="srow"><span class="sl">UIåŠ›</span><div class="sb"><div class="sbf ui" style="width:'+h.st.ui+'%"></div></div><span class="sn">'+h.st.ui+'</span></div>'
        +'<div class="srow"><span class="sl">ã‚³ãƒŸãƒ¥åŠ›</span><div class="sb"><div class="sbf cm" style="width:'+h.st.comm+'%"></div></div><span class="sn">'+h.st.comm+'</span></div>'
        +'<div class="srow"><span class="sl">ãƒ¡ãƒ³ã‚¿ãƒ«</span><div class="sb"><div class="sbf mn" style="width:'+h.mental+'%"></div></div><span class="sn">'+h.mental+'</span></div>'
        +'</div>'
        +riskTxt
        +'<div class="hc-f"><div class="hc-co">æ¡ç”¨ã‚³ã‚¹ãƒˆï¼š'+fY(cost)+'</div>'
        +'<button class="btn-hire" '+(ok?'':'disabled ')+' onclick="G.hire('+i+')">'+(atLimit?'å®šå“¡æº€å“¡':G.s.money<cost?'è³‡é‡‘ä¸è¶³':'æ¡ç”¨ã™ã‚‹')+'</button></div></div>';
    }).join('');
  },

  // â”€ RENDER TECH â”€
  renderTech:function(){
    var el=q('tech-tree');if(!el)return;
    var html='';
    TECHS.forEach(function(row){
      html+='<div class="tt-sec"><div class="sh" style="margin-bottom:8px">'+row.row+'</div><div class="tech-row">';
      row.nodes.forEach(function(n){
        var un=!!G.s.tech[n.id];
        var av=!un&&n.req.every(function(r){return G.s.tech[r];});
        var cls=un?'un':av?'av':'lk';
        var oc=av?' onclick="G.unlock(\'' +n.id+ '\')"':'';
        html+='<div class="tn '+cls+'"'+oc+'>';
        html+='<div class="tn-ic">'+n.ic+'</div>';
        html+='<div class="tn-nm">'+esc(n.nm)+'</div>';
        html+='<div class="tn-co">'+(n.cost?fY(n.cost):'ç„¡æ–™')+'</div>';
        html+='<div class="tn-st">'+(un?'âœ“ ç¿’å¾—æ¸ˆã¿':av?'â–¶ ç¿’å¾—å¯èƒ½':'ğŸ”’ è¦å‰æ')+'</div>';
        html+='<div class="tn-ef">'+esc(n.ef)+'</div>';
        html+='<div style="font-size:6px;color:var(--t4);margin-top:1px">'+esc(n.desc)+'</div>';
        html+='</div>';
      });
      html+='</div></div>';
    });
    el.innerHTML=html;
  },

  // â”€ RENDER PROGRESS â”€
  renderMurmur:function(){
    var el=q('murmur-log');if(!el)return;
    var ct=q('murmur-cnt');if(ct)ct.textContent=(G.murmurLog&&G.murmurLog.length)||0;
    var bdg=q('bdg-murmur');if(bdg)bdg.style.display='none';
    if(!G.murmurLog||!G.murmurLog.length){
      el.innerHTML='<div class="empty">ã¾ã èª°ã‚‚å‘Ÿã„ã¦ã„ã¾ã›ã‚“<br>ç¤¾å“¡ãŒã‚ªãƒ•ã‚£ã‚¹ã§åƒãã¨å‘Ÿãã¾ã™</div>';return;
    }
    var mentalColor=function(s2){
      var st=G.s.staff.find(function(x){return x.nm===s2;});
      if(!st)return'var(--t3)';
      return st.mental<30?'var(--red)':st.mental<60?'var(--warn)':'var(--ok)';
    };
    el.innerHTML=G.murmurLog.map(function(m){
      var mc=mentalColor(m.nm);
      var nm2=m.nm.split(' ')[0];
      return '<div style="display:flex;gap:8px;align-items:flex-start;padding:7px 12px;border-bottom:1px solid var(--bord2)">'
        +'<div style="font-size:14px;flex-shrink:0">'+m.ic+'</div>'
        +'<div style="flex:1;min-width:0">'
        +'<div style="font-size:7px;font-weight:700;color:'+mc+'">'+esc(nm2)+'</div>'
        +'<div style="font-size:8.5px;color:var(--t1);margin-top:1px;line-height:1.5">'+esc(m.msg)+'</div>'
        +'<div style="font-size:6.5px;color:var(--t4);margin-top:2px">T'+m.turn+'é€±ç›®</div>'
        +'</div></div>';
    }).join('');
  },


  // Midjourney ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆï¼ˆå°†æ¥ã®é€£æºç”¨ï¼‰
  genMJPrompt:function(tid,nm,qual){
    var styleMap={
      logo:'minimalist logo design, clean vector, professional brand identity, white background',
      meishi:'business card design, elegant typography, premium print, clean layout',
      banner:'advertising banner, bold visual impact, digital design, high contrast',
      flyer:'print flyer design, editorial layout, eye-catching typography',
      icon:'flat icon set, clean vector icons, consistent style, pixel perfect',
      sns:'social media design, instagram template, cohesive visual identity',
      lp:'landing page hero section, conversion-focused UI, clean modern web design',
      poster:'poster design, bold typography, artistic composition, print ready',
      catalog:'editorial catalog design, product layout, magazine-quality photography',
      package:'product packaging design, retail-ready, premium materials, 3d mockup',
      photo:'commercial photography, studio lighting, product shot, professional retouching',
      app:'mobile app UI, iOS design language, clean interface, dark mode option',
      motion:'motion graphics, brand animation, kinetic typography, smooth transitions',
      web:'web application dashboard, data visualization, SaaS UI, enterprise-grade',
      brand:'brand identity system, comprehensive style guide, logo system, visual language',
      preso:'presentation slide design, pitch deck, data storytelling, professional',
      signage:'environmental design, office signage, wayfinding system, architectural integration',
      ux_research:'UX research deliverable, user journey map, persona card, insight report',
      design_system:'design system documentation, component library, token system, Storybook',
      ai:'AI product interface, futuristic UX, chat interface, machine learning tool',
      ar_xr:'augmented reality UI, spatial computing interface, Vision Pro app design',
      ir:'annual report design, IR material, financial data visualization, corporate design',
      saas:'SaaS product UI, multi-tenant dashboard, enterprise software, B2B interface',
      growth:'growth dashboard, A/B test result, analytics UI, funnel visualization',
      cx:'customer experience map, service blueprint, touchpoint design, CX strategy visual',
      platform:'platform UI, marketplace design, developer portal, API documentation',
      global_rebrand:'global brand system, multinational visual identity, brand guidelines',
      ma:'corporate M&A presentation, integration roadmap, brand architecture',
      os_design:'operating system UI, system-level design, component framework, HIG document',
      // æ–°ã‚¿ã‚¤ãƒ—
      tshirt:'streetwear tshirt graphic design, flat lay mockup, urban fashion, bold print',
      stamp:'cute sticker sheet design, kawaii illustration, pastel colors, flat vector style',
      thumbnail:'youtube thumbnail design, bold typography, high contrast, eye-catching click-bait style',
      menu:'elegant restaurant menu design, food typography, warm editorial layout, fine dining aesthetic',
      nengajo:'japanese new year card, traditional modern fusion, red and gold, washi paper texture',
      game_ui:'game HUD interface design, fantasy RPG UI, glowing elements, dark immersive aesthetic',
      ebook:'ebook cover design, professional business book, gradient background, modern typography',
      map:'illustrated custom map design, vintage cartographic style, warm sepia tones, hand-drawn elements',
      mascot:'cute mascot character design, chibi illustration, friendly expression, multiple poses, flat vector',
      infographic:'data visualization infographic, modern statistical design, colorful charts, clean layout',
      fashion:'high fashion editorial lookbook, luxury brand campaign, minimalist studio photography',
      food:'japanese restaurant branding, warm minimalist identity, hand-lettered logo, earth tones',
      realestate:'luxury real estate brochure, architectural visualization, premium clean layout',
      event:'music festival poster, vibrant illustration, bold typography, dynamic concert visual',
      nft:'generative NFT digital art, cyberpunk aesthetic, vibrant geometric patterns, blockchain visual',
      medical_app:'medical app UI design, clean clinical interface, healthcare blue white, accessible dashboard',
      edtech:'educational app UI for children, gamified learning, bright colorful, friendly characters',
      fintech:'fintech mobile app UI, modern banking interface, dark theme, data visualization, trust design',
      agri:'agricultural tech UI, rural japan branding, natural earthy tones, farmland digital transformation',
      sport:'professional sports team branding, bold athletic logo, dynamic motion graphics, jersey mockup',
      anime:'anime key visual illustration, dramatic composition, vibrant japanese animation style, detailed characters',
      govtech:'government digital service UI, accessible clean interface, formal blue tones, citizen portal',
      mobility:'automotive HMI interface, car dashboard UI, dark cockpit luxury interior, infotainment system',
      xrplatform:'spatial computing UI for Apple Vision Pro, immersive 3D interface, glass morphism, AR overlay',
    };
    var base=styleMap[tid]||'professional graphic design';
    var qualStr=qual>=90?', award-winning masterpiece, ultra-detailed, perfection':qual>=70?', high quality, professional grade':qual>=50?', competent design':'';
    return '/imagine prompt: '+base+qualStr+', by world-renowned designer, '+new Date().getFullYear()+' design award --ar 4:3 --style raw --v 6.1 --q 2';
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // G.aiDesign  â”€  AI SVGãƒ‡ã‚¶ã‚¤ãƒ³è‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // æ¡ˆä»¶å®Œäº†æ™‚ã«Claude Haiku APIã‚’å‘¼ã³å‡ºã—ã¦SVGã‚’ç”Ÿæˆã€‚
  // ç”Ÿæˆã•ã‚ŒãŸSVGã¯portfolioã‚¨ãƒ³ãƒˆãƒªã®svgãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ä¿å­˜ã€‚
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  aiDesign:{
    _viewerItem:null,

    // APIã‚­ãƒ¼ç®¡ç†
    getKey:function(){return localStorage.getItem('dcfk_apikey')||'';},

    saveKey:function(){
      var inp=q('api-key-input');if(!inp)return;
      var key=inp.value.trim();
      if(!key){localStorage.removeItem('dcfk_apikey');}
      else{localStorage.setItem('dcfk_apikey',key);}
      this.updateKeyStatus();
      notify(key?'APIã‚­ãƒ¼ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚æ¡ˆä»¶å®Œäº†æ™‚ã«AIãƒ‡ã‚¶ã‚¤ãƒ³ãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼':'APIã‚­ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚','ok');
    },

    updateKeyStatus:function(){
      var key=this.getKey();
      var bar=q('api-key-bar');var st=q('api-key-status');var inp=q('api-key-input');
      if(!bar||!st)return;
      if(key){
        bar.classList.add('has-key');
        st.className='api-key-status ok';
        st.textContent='âœ“ è¨­å®šæ¸ˆã¿';
        if(inp)inp.value='';inp&&(inp.placeholder='è¨­å®šæ¸ˆã¿ï¼ˆå¤‰æ›´ã™ã‚‹å ´åˆã¯å†å…¥åŠ›ï¼‰');
      }else{
        bar.classList.remove('has-key');
        st.className='api-key-status';
        st.textContent='æœªè¨­å®š';
      }
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // SVGãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ â€” ã‚¿ã‚¤ãƒ—ãƒ»æ¡ˆä»¶åãƒ»å“è³ªã‚’è€ƒæ…®
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    buildPrompt:function(tid, nm, cliName, qual){
      var qualDesc = qual>=90?'award-winning, masterpiece quality, highly detailed':
                     qual>=75?'professional high quality, polished':
                     qual>=55?'standard professional quality':
                     'basic, somewhat rushed';

      var typePrompts = {
        logo: 'a professional logo design as SVG. Create a clean, modern logo with a unique geometric symbol/icon and the company name in elegant typography. Include a tagline if appropriate. Use a cohesive color palette of 2-3 colors.',
        meishi: 'a business card design as SVG (85mm x 55mm proportions). Show both sides if possible, with name, title, contact info in a clean elegant layout.',
        banner: 'a web banner design as SVG (728x90 or 300x250 proportions). Bold headline, supporting text, and a clear call-to-action button.',
        flyer: 'a print flyer design as SVG. Eye-catching headline, body text, and visual hierarchy. Include event details or product information.',
        lp: 'a landing page hero section as SVG. Show a realistic web layout with navigation bar, hero headline, subtext, CTA button, and decorative elements.',
        app: 'a mobile app UI mockup as SVG. Show a smartphone frame with a realistic app screen including navigation, content cards, and UI components.',
        web: 'a web dashboard/service UI as SVG. Show a browser window frame with a realistic dashboard including sidebar, data cards, charts, and navigation.',
        brand: 'a brand identity showcase as SVG. Show logo variations, color palette swatches, typography specimens, and brand applications on mockups.',
        motion: 'a motion graphics keyframe as SVG. Visualize an animated logo or kinetic typography composition with dynamic geometric elements.',
        poster: 'a creative poster design as SVG. Bold typography, strong visual composition, and artistic elements. Print-ready layout.',
        catalog: 'a catalog spread as SVG. Show two facing pages with product imagery placeholders, text columns, and editorial layout.',
        package: 'a product packaging design as SVG. Show packaging mockup with brand elements, typography, and color bands in 3D-ish perspective.',
        mascot: 'a cute mascot character as SVG. A friendly, expressive character illustration with distinct personality, shown in full body pose.',
        tshirt: 'a T-shirt graphic design as SVG on a flat-lay t-shirt mockup. Bold graphic, typography, and streetwear aesthetic.',
        game_ui: 'a game HUD/interface design as SVG. Dark fantasy or sci-fi aesthetic with health bars, inventory slots, map miniature, and action buttons.',
        infographic: 'an infographic design as SVG. Data visualization with charts, icons, statistics, and visual narrative flow.',
        food: 'a restaurant brand identity as SVG. Logo, menu header, color palette with warm food-appropriate tones.',
        fintech: 'a fintech app dashboard as SVG in a phone mockup. Show portfolio overview, balance, quick actions, and transaction list.',
        medical_app: 'a medical app interface as SVG in a phone frame. Clean clinical UI with patient data, health metrics, and appointment scheduling.',
        default: 'a professional design work as SVG. Clean, modern, well-crafted with appropriate typography and visual hierarchy.'
      };

      var typeDesc = typePrompts[tid] || typePrompts['default'];
      var colors = qual>=85 ?
        'Use a sophisticated, premium color palette appropriate for the industry.' :
        'Use a clean, professional color palette.';

      return 'Create ' + typeDesc + '\n\nProject name: "' + nm + '"\nClient: ' + cliName + '\n' + colors + '\nQuality level: ' + qualDesc + '\n\nIMPORTANT RULES:\n- Return ONLY the SVG code, nothing else\n- No markdown, no backticks, no explanation\n- Start with <svg and end with </svg>\n- viewBox should be appropriate for the type (e.g. "0 0 400 300")\n- Use embedded styles, no external CSS\n- Make it look realistic and well-designed\n- Include realistic text content related to the project name\n- SVG should be self-contained and render beautifully';
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // APIå‘¼ã³å‡ºã— & SVGç”Ÿæˆ
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    generate:function(portfolioId, tid, nm, cliName, qual){
      var key=this.getKey();if(!key)return;
      var self=this;

      // ä½œå“é›†ã‚¨ãƒ³ãƒˆãƒªã«generatingãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹
      var entry=G.s.portfolio.find(function(p){return p.id===portfolioId;});
      if(!entry)return;
      entry.svgStatus='generating';
      // UIã‚’æ›´æ–°ã—ã¦ã‚¹ãƒ”ãƒŠãƒ¼è¡¨ç¤º
      G.renderPortfolio();

      var prompt=this.buildPrompt(tid, nm, cliName, qual);

      fetch('https://api.anthropic.com/v1/messages',{
        method:'POST',
        headers:{
          'Content-Type':'application/json',
          'x-api-key':key,
          'anthropic-version':'2023-06-01',
          'anthropic-dangerous-direct-browser-access':'true'
        },
        body:JSON.stringify({
          model:'claude-haiku-4-5-20251001',
          max_tokens:4000,
          messages:[{role:'user',content:prompt}]
        })
      })
      .then(function(r){return r.json();})
      .then(function(data){
        var text='';
        if(data.content&&data.content[0]&&data.content[0].text){
          text=data.content[0].text.trim();
        }else if(data.error){
          console.error('API error:',data.error.message);
          if(entry){entry.svgStatus='error';entry.svgError=data.error.message;}
          G.renderPortfolio();return;
        }
        // SVGã‚’æŠ½å‡º
        var svgMatch=text.match(/<svg[\s\S]*<\/svg>/i);
        var svg=svgMatch?svgMatch[0]:text;
        if(svg.startsWith('<svg')){
          entry.svg=svg;entry.svgStatus='done';
          G.s.portfolio[G.s.portfolio.indexOf(entry)]=entry;
          G.save&&null; // è‡ªå‹•ä¿å­˜ã¯ã—ãªã„ï¼ˆæ‰‹å‹•ä¿å­˜ã§åæ˜ ï¼‰
          addLog('âœ¨ AIç”Ÿæˆå®Œäº†ï¼ã€Œ'+nm+'ã€ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãŒä½œå“é›†ã«è¿½åŠ ã•ã‚ŒãŸ','good');
          G.renderPortfolio();
          // å®Œäº†ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
          notify('âœ¨ AIãƒ‡ã‚¶ã‚¤ãƒ³ç”Ÿæˆå®Œäº†ï¼ã€Œ'+nm+'ã€ã®ä½œå“é›†ã‚’ç¢ºèªã—ã‚ˆã†','ok',4000);
        }else{
          entry.svgStatus='error';entry.svgError='SVGå½¢å¼ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ';
          G.renderPortfolio();
        }
      })
      .catch(function(e){
        console.error('fetch error',e);
        if(entry){entry.svgStatus='error';entry.svgError=e.message;}
        G.renderPortfolio();
        notify('AIç”Ÿæˆã‚¨ãƒ©ãƒ¼: '+e.message,'danger');
      });
    },

    // æ‰‹å‹•ã§å†ç”Ÿæˆ
    regenerate:function(portfolioId){
      var entry=G.s.portfolio.find(function(p){return p.id===portfolioId;});
      if(!entry)return;
      entry.svgStatus=null;entry.svg=null;
      this.generate(portfolioId, entry.tid, entry.nm, entry.cli, entry.qual);
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // SVGãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    openViewer:function(portfolioId){
      var entry=G.s.portfolio.find(function(p){return p.id===portfolioId;});
      if(!entry)return;
      this._viewerItem=entry;
      var modal=q('modal-svg-view');if(!modal)return;
      var title=q('svg-view-title');
      var content=q('svg-view-content');
      var meta=q('svg-view-meta');
      if(title)title.textContent=entry.tic+' '+entry.nm;
      if(meta)meta.textContent=entry.tlb+' â€¢ '+entry.cli+' â€¢ å“è³ª'+entry.qual+' â€¢ '+entry.stars;
      if(content){
        if(entry.svg){
          content.style.background='#fff';
          content.innerHTML=entry.svg;
        }else{
          // SVGãªã—ã®å ´åˆã¯Canvasã‚µãƒ ãƒã‚¤ãƒ«ã‚’SVGã¨ã—ã¦è¡¨ç¤º
          content.style.background='#1a1a2e';
          var cv=document.createElement('canvas');cv.width=400;cv.height=300;
          G.drawThumb(cv,entry.tid||'logo',entry.qual||50,(entry.turn||1)*997);
          content.innerHTML='';content.appendChild(cv);
        }
      }
      modal.classList.add('open');
    },

    closeViewer:function(){
      var modal=q('modal-svg-view');if(modal)modal.classList.remove('open');
      this._viewerItem=null;
    },

    downloadSVG:function(){
      var entry=this._viewerItem;if(!entry||!entry.svg)return;
      var blob=new Blob([entry.svg],{type:'image/svg+xml'});
      var url=URL.createObjectURL(blob);
      var a=document.createElement('a');
      a.href=url;a.download=(entry.nm||'design').replace(/[^\w\-]/g,'_')+'.svg';
      document.body.appendChild(a);a.click();document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // G.ord  â”€  ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚²ãƒ¼ãƒ å†…å®Œçµï¼‰
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–¹å¼:
  //   æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã‚’JSONã«ã—ã¦ btoa(encodeURIComponent(JSON)) ã§Base64åŒ–
  //   ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ DCFK- ã‚’ä»˜ã‘ã¦å—æ³¨ã‚³ãƒ¼ãƒ‰ã¨ã™ã‚‹
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ord:{
    selectedType:null,
    recvOpen:false,

    BUDGET_STEPS:[
      30000,50000,80000,120000,200000,
      300000,500000,800000,1200000,2000000,
      3000000,5000000,8000000,12000000,20000000,
      30000000,50000000,80000000,120000000,200000000,500000000
    ],

    ORDER_TYPES:[
      {ic:'ğŸ”¤',nm:'ãƒ­ã‚´',    tid:'logo',    tlb:'ãƒ­ã‚´',    tic:'ğŸ”¤', price:'Â¥80Kã€œ'},
      {ic:'ğŸ’³',nm:'ååˆº',    tid:'meishi',  tlb:'ååˆº',    tic:'ğŸ’³', price:'Â¥30Kã€œ'},
      {ic:'ğŸ–¼ï¸',nm:'ãƒãƒŠãƒ¼',  tid:'banner',  tlb:'ãƒãƒŠãƒ¼',  tic:'ğŸ–¼ï¸', price:'Â¥50Kã€œ'},
      {ic:'ğŸ“„',nm:'ãƒãƒ©ã‚·',  tid:'flyer',   tlb:'ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼',tic:'ğŸ“„',price:'Â¥45Kã€œ'},
      {ic:'ğŸ–¥ï¸',nm:'LP/Web',  tid:'lp',      tlb:'LP',      tic:'ğŸ–¥ï¸', price:'Â¥200Kã€œ'},
      {ic:'ğŸ“±',nm:'ã‚¢ãƒ—ãƒªUI',tid:'app',     tlb:'ã‚¢ãƒ—ãƒªUI',tic:'ğŸ“±', price:'Â¥800Kã€œ'},
      {ic:'ğŸ’',nm:'ãƒ–ãƒ©ãƒ³ãƒ‰',tid:'brand',   tlb:'ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°',tic:'ğŸ’',price:'Â¥3Mã€œ'},
      {ic:'ğŸŒ',nm:'Webã‚µãƒ¼ãƒ“ã‚¹',tid:'web',  tlb:'Webã‚µãƒ¼ãƒ“ã‚¹',tic:'ğŸŒ',price:'Â¥1.5Mã€œ'},
      {ic:'ğŸ¬',nm:'ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³',tid:'motion',tlb:'ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³',tic:'ğŸ¬',price:'Â¥300Kã€œ'},
      {ic:'ğŸ“¦',nm:'ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸',tid:'package',tlb:'ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸',tic:'ğŸ“¦',price:'Â¥380Kã€œ'},
      {ic:'ğŸ‘•',nm:'Tã‚·ãƒ£ãƒ„', tid:'tshirt',  tlb:'Tã‚·ãƒ£ãƒ„',  tic:'ğŸ‘•', price:'Â¥25Kã€œ'},
      {ic:'ğŸ»',nm:'ãƒã‚¹ã‚³ãƒƒãƒˆ',tid:'mascot',tlb:'ãƒã‚¹ã‚³ãƒƒãƒˆ',tic:'ğŸ»',price:'Â¥350Kã€œ'},
    ],

    fmtBudget:function(v){
      if(v>=100000000)return 'Â¥'+(v/100000000).toFixed(1)+'å„„';
      if(v>=10000000)return 'Â¥'+(v/10000000).toFixed(0)+'åƒä¸‡';
      if(v>=10000)return 'Â¥'+(v/10000).toFixed(0)+'ä¸‡';
      return 'Â¥'+v.toLocaleString();
    },

    updateBudget:function(idx){
      var v=this.BUDGET_STEPS[Math.min(parseInt(idx),this.BUDGET_STEPS.length-1)];
      var el=q('ord-budget-val');if(el)el.textContent=this.fmtBudget(v);
      var rng=q('ord-budget');if(rng){var pct=(parseInt(idx)/20*100)+'%';rng.style.setProperty('--pct',pct);}
    },

    // ã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã‚’é–‹ãï¼ˆ?orderãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ or ç›´æ¥å‘¼ã³å‡ºã—ï¼‰
    open:function(){
      var scr=q('SCR_ORDER');if(!scr)return;
      // ä¼šç¤¾åã‚’ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰
      var PHASE_NAMES=['å€‹äººäº‹å‹™æ‰€','ãƒ‡ã‚¶ã‚¤ãƒ³äº‹å‹™æ‰€','ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª','ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾','ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­','PFä¼æ¥­','ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ'];
      var cn=q('ord-company-name');
      if(cn)cn.textContent=G.s?PHASE_NAMES[G.s.phase||0]:'ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾';
      // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
      var fa=q('ord-form-area');var ca=q('ord-code-area');
      if(fa)fa.style.display='';if(ca)ca.style.display='none';
      var ni=q('ord-name');if(ni)ni.value='';
      var ci=q('ord-company');if(ci)ci.value='';
      var di=q('ord-desc');if(di)di.value='';
      this.selectedType=null;
      document.querySelectorAll('.ord-type-btn').forEach(function(b){b.classList.remove('sel');});
      scr.classList.add('open');
      // ã‚¿ã‚¤ãƒ—ã‚°ãƒªãƒƒãƒ‰ç”Ÿæˆï¼ˆåˆå›ã®ã¿ï¼‰
      this.initTypeGrid();
    },

    initTypeGrid:function(){
      var grid=q('ord-type-grid');if(!grid||grid.children.length>0)return;
      var self=this;
      this.ORDER_TYPES.forEach(function(t){
        var btn=document.createElement('button');
        btn.className='ord-type-btn';
        btn.innerHTML='<div class="ord-type-ic">'+t.ic+'</div>'
          +'<div class="ord-type-nm">'+t.nm+'</div>'
          +'<div class="ord-type-pr">'+t.price+'</div>';
        btn.addEventListener('click',function(){
          document.querySelectorAll('.ord-type-btn').forEach(function(b){b.classList.remove('sel');});
          btn.classList.add('sel');
          self.selectedType=t;
        });
        grid.appendChild(btn);
      });
    },

    submit:function(){
      var name=q('ord-name')?q('ord-name').value.trim():'';
      var desc=q('ord-desc')?q('ord-desc').value.trim():'';
      if(!name){alert('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');return;}
      if(!this.selectedType){alert('ä¾é ¼å†…å®¹ã‚’é¸ã‚“ã§ãã ã•ã„');return;}
      if(!desc){alert('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');return;}

      var budgetIdx=parseInt(q('ord-budget')?q('ord-budget').value:5);
      var budget=this.BUDGET_STEPS[Math.min(budgetIdx,this.BUDGET_STEPS.length-1)];
      var deadline=parseInt(q('ord-deadline')?q('ord-deadline').value:14);
      var company=(q('ord-company')?q('ord-company').value.trim():'')||name;
      var t=this.selectedType;

      var data={
        id:'DCFK-'+Date.now().toString(36).toUpperCase()+'-'+Math.floor(Math.random()*9999),
        nm:(t.nm+' â€” '+company).slice(0,36),
        from:company.slice(0,20),
        tid:t.tid, tlb:t.tlb, tic:t.tic,
        desc:desc.slice(0,120),
        budget:budget, dl:deadline,
        ts:Date.now()
      };

      // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
      var code;
      try{code=data.id+'|'+btoa(unescape(encodeURIComponent(JSON.stringify(data))));}
      catch(e){code=data.id+'|ERR';}

      // ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºç”»é¢ã«åˆ‡æ›¿
      var fa=q('ord-form-area');var ca=q('ord-code-area');
      if(fa)fa.style.display='none';
      if(ca)ca.style.display='';
      var box=q('ord-code-output');
      if(box)box.textContent=code;
      this._lastCode=code;
      this._lastData=data;
      SFX.fanfare&&SFX.fanfare();
    },

    copyCode:function(){
      var code=this._lastCode;if(!code)return;
      if(navigator.clipboard){
        navigator.clipboard.writeText(code).then(function(){
          var box=q('ord-code-output');
          if(box){var orig=box.textContent;box.textContent='âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';setTimeout(function(){box.textContent=orig;},1500);}
        });
      }else{
        var ta=document.createElement('textarea');ta.value=code;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);
        notify('ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ','ok');
      }
    },

    // å—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’å—ã‘å–ã£ã¦ã‚²ãƒ¼ãƒ ã«æ¡ˆä»¶ã‚’è¿½åŠ 
    receiveCode:function(){
      var inp=q('order-code-input');
      var raw=inp?inp.value.trim():'';
      if(!raw){notify('å—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„','warn');return;}
      this._importCode(raw,inp);
    },

    _importCode:function(raw,inp){
      try{
        var parts=raw.split('|');
        if(parts.length<2)throw new Error('invalid format');
        var json=decodeURIComponent(escape(atob(parts[1])));
        var data=JSON.parse(json);
        if(!data.tid||!data.nm)throw new Error('missing fields');
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
        if(!G.s){notify('ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¦ã‹ã‚‰å…¥åŠ›ã—ã¦ãã ã•ã„','warn');return;}
        // é‡è¤‡ãƒã‚§ãƒƒã‚¯
        var already=G.s.avail.find(function(p){return p.id===data.id;});
        if(already){notify('ã“ã®ã‚ªãƒ¼ãƒ€ãƒ¼ã¯æ—¢ã«å±Šã„ã¦ã„ã¾ã™','warn');return;}
        // æ¡ˆä»¶ã¨ã—ã¦è¿½åŠ 
        var pt=PTYPES.find(function(p){return p.id===data.tid;})||PTYPES[0];
        var price=Math.round((data.budget||pt.base)*1.1); // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæŒ‡å®šäºˆç®—+10%
        G.s.avail.unshift({
          id:data.id,
          tid:data.tid, tlb:data.tlb, tic:data.tic, tcss:pt.css||'logo',
          nm:data.nm,
          cli:{id:'god',lb:data.from||'å¤–éƒ¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ',ic:'ğŸŒ',mr:5,pm:1.3,rg:4,rl:-1,desc:'ãƒªã‚¢ãƒ«ã‚ªãƒ¼ãƒ€ãƒ¼'},
          price:price, days:pt.days||7,
          diff:3, dead:data.dl||14, urg:true, sk:pt.sk||['design'],
          prog:0, asgn:null, modCnt:0, isExt:true,
          extDesc:data.desc, extBudget:data.budget
        });
        if(inp)inp.value='';
        q('order-recv-form').style.display='none';
        this.recvOpen=false;
        addLog('ğŸ“¨ ãƒªã‚¢ãƒ«ã‚ªãƒ¼ãƒ€ãƒ¼ãŒå±Šã„ãŸï¼ã€Œ'+data.nm+'ã€ '+fY(price),'good');
        notify('ğŸ“¨ æ–°ã—ã„ã‚ªãƒ¼ãƒ€ãƒ¼ï¼ã€Œ'+data.nm+'ã€ãŒæ¡ˆä»¶ã‚¿ãƒ–ã«å±Šãã¾ã—ãŸï¼','ok',6000);
        SFX.fanfare&&SFX.fanfare();
        G.updateHUD();G.renderAll();G.tab('proj');
      }catch(e){
        notify('å—æ³¨ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“','danger');
        console.error('order code error',e);
      }
    },

    toggleRecv:function(){
      this.recvOpen=!this.recvOpen;
      var f=q('order-recv-form');if(f)f.style.display=this.recvOpen?'':'none';
      if(this.recvOpen){var inp=q('order-code-input');if(inp)inp.focus();}
    },

    openOrderPage:function(){
      // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒè¦‹ã‚‹ã‚ªãƒ¼ãƒ€ãƒ¼ç”»é¢ã‚’é–‹ã
      G.ord.open();
    },

    openFromTitle:function(){
      // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã‹ã‚‰ã‚³ãƒ¼ãƒ‰å…¥åŠ›
      var code=prompt('å—æ³¨ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š');
      if(!code)return;
      // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Œã°ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‹ã‚‰
      var raw=localStorage.getItem('dcfk_v3');
      if(!raw){
        if(!confirm('ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚NEW GAMEã‚’é–‹å§‹ã—ã¦ã‚ªãƒ¼ãƒ€ãƒ¼ã‚’å—ã‘å–ã‚Šã¾ã™ã‹ï¼Ÿ'))return;
        G.newGame();
        setTimeout(function(){G.ord._importCode(code,null);},800);
      }else{
        G.load();
        setTimeout(function(){G.ord._importCode(code,null);},800);
      }
    },

    closeOrder:function(){
      var scr=q('SCR_ORDER');if(scr)scr.classList.remove('open');
    }
  },

  closeOrder:function(){G.ord.closeOrder();},

  portfolioFilter:'all',

  // ä½œå“é›†ã‚µãƒ ãƒã‚¤ãƒ«ï¼šCanvasæç”»ã§ã‚¿ã‚¤ãƒ—åˆ¥ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”Ÿæˆ
  drawThumb:function(canvas, tid, qual, seed){
    var ctx=canvas.getContext('2d');
    var W=canvas.width, H=canvas.height;
    var r=function(){seed=(seed*1664525+1013904223)&0x7fffffff;return seed;};
    var rc=function(lo,hi){return lo+r()%(hi-lo);};
    var rf=function(){return (r()%1000)/1000;};

    // å“è³ªã«å¿œã˜ãŸã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
    var palettes={
      logo:   [['#6366f1','#a78bfa','#e0e7ff','#f5f3ff'],['#f59e0b','#fcd34d','#fef3c7','#fffbeb'],['#10b981','#34d399','#d1fae5','#ecfdf5']],
      lp:     [['#3b82f6','#93c5fd','#dbeafe','#eff6ff'],['#ec4899','#f9a8d4','#fce7f3','#fdf2f8']],
      app:    [['#1e1b4b','#4338ca','#818cf8','#c7d2fe'],['#0f172a','#0f4c81','#3b82f6','#bfdbfe']],
      web:    [['#0f172a','#1e3a5f','#3b82f6','#e2e8f0'],['#1a1a2e','#16213e','#0f3460','#533483']],
      brand:  [['#92400e','#d97706','#fde68a','#fffbeb'],['#4c1d95','#7c3aed','#c4b5fd','#ede9fe']],
      saas:   [['#0f172a','#1e293b','#3b82f6','#7dd3fc'],['#064e3b','#065f46','#10b981','#a7f3d0']],
      growth: [['#7f1d1d','#991b1b','#ef4444','#fca5a5'],['#1e3a5f','#1d4ed8','#60a5fa','#bfdbfe']],
      ai:     [['#1e1b4b','#312e81','#6366f1','#c7d2fe'],['#0c0c1e','#1a1a3e','#7c3aed','#ddd6fe']],
      meishi: [['#f8fafc','#e2e8f0','#334155','#0f172a'],['#fefce8','#fef9c3','#713f12','#1c0a00']],
      banner: [['#ff6b35','#f7931e','#fff','#1a1a2e'],['#00c9ff','#92fe9d','#1a1a2e','#fff']],
      // æ–°ã‚¿ã‚¤ãƒ—
      tshirt:   [['#ffffff','#1a1a2e','#e2e8f0','#f8fafc'],['#000000','#ef4444','#fff','#fca5a5']],
      stamp:    [['#fce7f3','#ec4899','#fff','#fdf2f8'],['#d1fae5','#10b981','#fff','#ecfdf5']],
      thumbnail:[['#1e1b4b','#dc2626','#fef08a','#fff'],['#0f172a','#0284c7','#e0f2fe','#fff']],
      menu:     [['#1a0a00','#c4891a','#fef3c7','#fffbeb'],['#f8f4ef','#6b4226','#d4a96a','#1a0a00']],
      nengajo:  [['#7f1d1d','#dc2626','#fef2f2','#fff'],['#1c1917','#c4891a','#fef3c7','#fff']],
      game_ui:  [['#0a0a1e','#7c3aed','#c4b5fd','#1a1a3e'],['#0f172a','#dc2626','#fca5a5','#1e293b']],
      ebook:    [['#1e293b','#6366f1','#c7d2fe','#e2e8f0'],['#1a1a2e','#f59e0b','#fde68a','#e5e7eb']],
      map:      [['#78350f','#d97706','#fef3c7','#fef9c3'],['#166534','#22c55e','#dcfce7','#f0fdf4']],
      mascot:   [['#fce7f3','#f472b6','#fdf2f8','#fff'],['#d1fae5','#34d399','#ecfdf5','#fff']],
      infographic:[['#f0f9ff','#0284c7','#bae6fd','#e0f2fe'],['#faf5ff','#7c3aed','#ddd6fe','#ede9fe']],
      fashion:  [['#1a1a1a','#c4891a','#f5f0e8','#fff'],['#fafafa','#1a1a1a','#e5e7eb','#111']],
      food:     [['#1c1205','#d97706','#fef3c7','#fff7ed'],['#0f1c0a','#22c55e','#dcfce7','#f0fdf4']],
      realestate:[['#0f172a','#64748b','#f1f5f9','#fff'],['#1c0a00','#c4891a','#fef3c7','#fff']],
      event:    [['#1a0030','#a855f7','#fae8ff','#f0abfc'],['#0a1a00','#84cc16','#ecfccb','#d9f99d']],
      nft:      [['#0a0a1e','#00f5ff','#0a3a4a','#001a2e'],['#0f0a1e','#ff2d78','#3a0a2e','#1a0010']],
      medical_app:[['#f0f9ff','#0284c7','#bae6fd','#fff'],['#f0fdf4','#16a34a','#bbf7d0','#fff']],
      edtech:   [['#faf5ff','#7c3aed','#ddd6fe','#fff'],['#fff7ed','#ea580c','#fed7aa','#fff']],
      fintech:  [['#0f172a','#1d4ed8','#bfdbfe','#93c5fd'],['#0a0a1e','#06b6d4','#a5f3fc','#cffafe']],
      agri:     [['#1c2e04','#65a30d','#ecfccb','#f7fee7'],['#1a0f00','#d97706','#fef3c7','#fffbeb']],
      sport:    [['#1a0000','#dc2626','#fee2e2','#fff'],['#0a1a3e','#1d4ed8','#dbeafe','#eff6ff']],
      anime:    [['#0a0a1e','#7c3aed','#c4b5fd','#fff'],['#1a0a00','#c4891a','#fef3c7','#fff']],
      govtech:  [['#0f172a','#1d4ed8','#e2e8f0','#f8fafc'],['#042f2e','#0d9488','#ccfbf1','#f0fdfa']],
      mobility: [['#0a0a0a','#374151','#9ca3af','#1f2937'],['#030712','#1d4ed8','#bfdbfe','#0f172a']],
      xrplatform:[['#0a0a1e','#7c3aed','#c4b5fd','rgba(255,255,255,0.1)'],['#000a1e','#0284c7','#bae6fd','rgba(255,255,255,0.05)']],
    };
    var pal=palettes[tid]||palettes['logo'];
    var colors=pal[r()%pal.length];

    ctx.fillStyle=colors[2]||'#f0f0f0';
    ctx.fillRect(0,0,W,H);

    if(tid==='logo'){
      // ãƒ­ã‚´ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼šå¹¾ä½•å­¦çš„ã‚·ãƒ³ãƒœãƒ«
      ctx.fillStyle=colors[3]||'#fff';ctx.fillRect(0,0,W,H);
      var shapes=r()%4;
      ctx.fillStyle=colors[0];
      if(shapes===0){// å††
        ctx.beginPath();ctx.arc(W/2,H/2-8,18,0,Math.PI*2);ctx.fill();
        ctx.fillStyle=colors[1];
        ctx.beginPath();ctx.arc(W/2+10,H/2-4,10,0,Math.PI*2);ctx.fill();
      } else if(shapes===1){// ä¸‰è§’
        ctx.beginPath();ctx.moveTo(W/2,10);ctx.lineTo(W/2-18,H/2+2);ctx.lineTo(W/2+18,H/2+2);ctx.closePath();ctx.fill();
        ctx.fillStyle=colors[1];
        ctx.beginPath();ctx.moveTo(W/2,18);ctx.lineTo(W/2-10,H/2+2);ctx.lineTo(W/2+10,H/2+2);ctx.closePath();ctx.fill();
      } else if(shapes===2){// æ­£æ–¹å½¢
        ctx.fillRect(W/2-16,H/2-22,32,32);
        ctx.fillStyle=colors[1];ctx.fillRect(W/2-8,H/2-14,16,16);
        ctx.fillStyle=colors[2];ctx.fillRect(W/2-4,H/2-10,8,8);
      } else {// ã²ã—å½¢
        ctx.save();ctx.translate(W/2,H/2-8);ctx.rotate(Math.PI/4);ctx.fillRect(-14,-14,28,28);ctx.restore();
        ctx.fillStyle=colors[1];
        ctx.save();ctx.translate(W/2,H/2-8);ctx.rotate(Math.PI/4);ctx.fillRect(-8,-8,16,16);ctx.restore();
      }
      // ãƒ­ã‚´ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ¼
      ctx.fillStyle=colors[0];ctx.fillRect(W/2-22,H/2+10,44,5);
      ctx.fillStyle=colors[1];ctx.fillRect(W/2-14,H/2+18,28,3);

    } else if(tid==='app'){
      // ã‚¢ãƒ—ãƒªUIãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼šã‚¹ãƒãƒ›ç”»é¢
      ctx.fillStyle='#1a1a2e';ctx.fillRect(0,0,W,H);
      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
      ctx.fillStyle='#222';ctx.fillRect(4,4,W-8,10);
      // ãƒ˜ãƒƒãƒ€ãƒ¼
      ctx.fillStyle=colors[0];ctx.fillRect(4,14,W-8,18);
      ctx.fillStyle='rgba(255,255,255,0.9)';ctx.fillRect(10,19,40,8);
      // ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ
      for(var i=0;i<3;i++){
        ctx.fillStyle='#1e293b';ctx.fillRect(4,34+i*17,W-8,14);
        ctx.fillStyle=colors[1];ctx.fillRect(8,37+i*17,8,8);
        ctx.fillStyle='rgba(255,255,255,0.7)';ctx.fillRect(20,38+i*17,30,3);
        ctx.fillStyle='rgba(255,255,255,0.4)';ctx.fillRect(20,43+i*17,20,2);
        ctx.fillStyle=colors[0];ctx.fillRect(W-16,37+i*17,10,8);
      }
      // ãƒœãƒˆãƒ ãƒŠãƒ“
      ctx.fillStyle='#0f172a';ctx.fillRect(4,H-16,W-8,12);
      for(var j=0;j<4;j++){
        ctx.fillStyle=j===0?colors[0]:'rgba(255,255,255,0.3)';
        ctx.fillRect(8+j*20,H-13,12,6);
      }

    } else if(tid==='web'){
      // Webã‚µãƒ¼ãƒ“ã‚¹UIï¼šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é¢¨
      ctx.fillStyle='#0f172a';ctx.fillRect(0,0,W,H);
      // ã‚µã‚¤ãƒ‰ãƒãƒ¼
      ctx.fillStyle='#1e293b';ctx.fillRect(0,0,20,H);
      for(var i=0;i<5;i++){ctx.fillStyle='rgba(99,102,241,'+(i===1?'0.9':'0.4')+')';ctx.fillRect(4,10+i*14,12,8);}
      // ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢
      ctx.fillStyle='#1e293b';ctx.fillRect(22,4,W-26,16);// ãƒ˜ãƒƒãƒ€ãƒ¼
      ctx.fillStyle=colors[0];ctx.fillRect(26,7,30,10);
      // KPIã‚«ãƒ¼ãƒ‰
      var kpiC=[colors[0],colors[1],'#10b981','#f59e0b'];
      for(var i=0;i<4;i++){
        ctx.fillStyle=kpiC[i%kpiC.length];ctx.globalAlpha=0.15;
        ctx.fillRect(22+i*17,22,15,18);ctx.globalAlpha=1;
        ctx.fillStyle=kpiC[i%kpiC.length];
        ctx.fillRect(24+i*17,24,11,6);
        ctx.fillStyle='rgba(255,255,255,0.6)';ctx.fillRect(24+i*17,32,8,3);
      }
      // ã‚°ãƒ©ãƒ•
      ctx.fillStyle='#1e293b';ctx.fillRect(22,42,W-26,H-46);
      for(var i=0;i<8;i++){
        var bh=8+rc(0,15);
        ctx.fillStyle=colors[0];ctx.globalAlpha=0.7;
        ctx.fillRect(26+i*8,H-6-bh,6,bh);ctx.globalAlpha=1;
      }

    } else if(tid==='brand'){
      // ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼šãƒ©ã‚°ã‚¸ãƒ¥ã‚¢ãƒªãƒ¼ã‚«ãƒ¼ãƒ‰
      ctx.fillStyle=colors[0];ctx.fillRect(0,0,W,H);
      // ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ©ã‚¤ãƒ³
      ctx.fillStyle=colors[1];ctx.fillRect(6,6,W-12,2);ctx.fillRect(6,H-8,W-12,2);
      ctx.fillRect(6,6,2,H-14);ctx.fillRect(W-8,6,2,H-14);
      // ä¸­å¤®ã‚·ãƒ³ãƒœãƒ«
      ctx.fillStyle=colors[1];
      ctx.beginPath();ctx.arc(W/2,H/2-8,14,0,Math.PI*2);ctx.fill();
      ctx.fillStyle=colors[0];
      ctx.beginPath();ctx.arc(W/2,H/2-8,9,0,Math.PI*2);ctx.fill();
      ctx.fillStyle=colors[1];
      ctx.beginPath();ctx.arc(W/2,H/2-8,5,0,Math.PI*2);ctx.fill();
      // ãƒ†ã‚­ã‚¹ãƒˆ
      ctx.fillStyle=colors[1];ctx.fillRect(W/2-18,H/2+8,36,3);
      ctx.fillRect(W/2-10,H/2+14,20,2);

    } else if(tid==='saas'||tid==='growth'){
      // SaaSï¼šãƒ¢ãƒ€ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
      ctx.fillStyle='#f8fafc';ctx.fillRect(0,0,W,H);
      // ãƒ˜ãƒƒãƒ€ãƒ¼
      ctx.fillStyle=colors[0];ctx.fillRect(0,0,W,14);
      ctx.fillStyle='rgba(255,255,255,0.9)';ctx.fillRect(4,4,24,6);ctx.fillRect(W-28,4,24,6);
      // ãƒ¡ãƒˆãƒªã‚¯ã‚¹
      var mc=['#6366f1','#10b981','#f59e0b','#ef4444'];
      for(var i=0;i<4;i++){
        ctx.fillStyle=mc[i];ctx.globalAlpha=0.1;ctx.fillRect(2+i*22,16,20,16);ctx.globalAlpha=1;
        ctx.fillStyle=mc[i];ctx.fillRect(4+i*22,18,10,8);
        ctx.fillStyle='#64748b';ctx.fillRect(4+i*22,28,16,3);
      }
      // æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
      ctx.fillStyle='#f1f5f9';ctx.fillRect(2,34,W-4,H-38);
      ctx.strokeStyle=colors[0];ctx.lineWidth=2;ctx.beginPath();
      var pts=[];for(var i=0;i<7;i++)pts.push([4+i*12,H-10-rc(4,24)]);
      ctx.moveTo(pts[0][0],pts[0][1]);
      pts.slice(1).forEach(function(pt){ctx.lineTo(pt[0],pt[1]);});ctx.stroke();
      ctx.fillStyle=colors[0];ctx.globalAlpha=0.15;
      ctx.beginPath();ctx.moveTo(pts[0][0],H-6);pts.forEach(function(pt){ctx.lineTo(pt[0],pt[1]);});ctx.lineTo(pts[pts.length-1][0],H-6);ctx.closePath();ctx.fill();ctx.globalAlpha=1;

    } else if(tid==='ai'){
      // AIï¼šSFçš„ãªUI
      ctx.fillStyle='#0c0c1e';ctx.fillRect(0,0,W,H);
      // ã‚°ãƒªãƒƒãƒ‰
      ctx.strokeStyle='rgba(99,102,241,0.15)';ctx.lineWidth=0.5;
      for(var i=0;i<W;i+=10){ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,H);ctx.stroke();}
      for(var i=0;i<H;i+=10){ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(W,i);ctx.stroke();}
      // ä¸­å¤®ã‚ªãƒ¼ãƒ–
      var grad=ctx.createRadialGradient(W/2,H/2,0,W/2,H/2,25);
      grad.addColorStop(0,'rgba(139,92,246,0.8)');grad.addColorStop(0.5,'rgba(99,102,241,0.4)');grad.addColorStop(1,'rgba(99,102,241,0)');
      ctx.fillStyle=grad;ctx.beginPath();ctx.arc(W/2,H/2-5,25,0,Math.PI*2);ctx.fill();
      // ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ãƒ³
      for(var i=0;i<5;i++){
        ctx.strokeStyle='rgba(139,92,246,'+(0.2+rf()*0.4)+')';ctx.lineWidth=0.8;
        ctx.beginPath();ctx.moveTo(rc(0,W/3),rc(0,H));ctx.lineTo(W/2+rc(-10,10),H/2+rc(-10,10));ctx.stroke();
      }

    } else {
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰
      ctx.fillStyle=colors[3]||'#fff';ctx.fillRect(0,0,W,H);
      ctx.fillStyle=colors[0];ctx.fillRect(0,0,W,28);
      ctx.fillStyle='rgba(255,255,255,0.8)';ctx.fillRect(8,8,40,12);ctx.fillRect(8,22,24,4);
      // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ–ãƒ­ãƒƒã‚¯
      for(var i=0;i<4;i++){ctx.fillStyle=i%2?colors[1]:colors[0];ctx.globalAlpha=0.12;ctx.fillRect(8,32+i*12,W-16,9);ctx.globalAlpha=1;}
      ctx.fillStyle=colors[0];ctx.fillRect(8,32,W-16,3);
    }

    // å“è³ªã«ã‚ˆã‚‹è¼ãåŠ¹æœï¼ˆé«˜å“è³ªã»ã©å…‰ã‚‹ï¼‰
    if(qual>=90){
      var shine=ctx.createRadialGradient(W*0.8,H*0.2,0,W*0.8,H*0.2,W*0.6);
      shine.addColorStop(0,'rgba(255,215,0,0.12)');shine.addColorStop(1,'rgba(255,215,0,0)');
      ctx.fillStyle=shine;ctx.fillRect(0,0,W,H);
    }
  },

  renderPortfolio:function(){
    var el=q('portfolio-list');if(!el)return;
    var cnt=q('portfolio-cnt');
    var portfolio=G.s.portfolio||[];
    if(cnt)cnt.textContent=portfolio.length+'ä»¶';

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹
    ['all','logo','app','web','brand','saas'].forEach(function(f){
      var btn=q('pf-'+f);if(btn){btn.classList.toggle('on',G.portfolioFilter===f||(f==='saas'&&G.portfolioFilter==='growth'));}
    });

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—å®šç¾©
    var filterGroups={
      'print':['logo','meishi','banner','flyer','icon','poster','catalog','package','photo','signage','ir',
               'tshirt','stamp','thumbnail','menu','nengajo','map','mascot','infographic','fashion','event','nengajo','anime'],
      'app':['app','motion','game_ui','medical_app','edtech','fintech','mobility','xrplatform'],
      'web':['web','lp','sns','preso','ebook','food','realestate','agri','govtech'],
      'brand':['brand','ux_research','nft','sport'],
      'saas':['saas','growth','cx','platform','global_rebrand','ma','os_design','design_system','ai','ar_xr'],
      'mj':null // mjPromptãŒã‚ã‚‹å…¨ä½œå“
    };
    var filtered=G.portfolioFilter==='all'?portfolio:portfolio.filter(function(w){
      if(G.portfolioFilter==='mj')return !!w.mjPrompt;
      var grp=filterGroups[G.portfolioFilter];
      if(grp)return grp.includes(w.tid);
      return w.tid===G.portfolioFilter;
    });

    if(!filtered.length){
      el.innerHTML='<div class="empty">'+(G.portfolioFilter==='all'?'ã¾ã ä½œå“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ¡ˆä»¶ã‚’å®Œäº†ã™ã‚‹ã¨è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚':'ã“ã®ã‚«ãƒ†ã‚´ãƒªã®ä½œå“ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚')+'</div>';
      return;
    }

    // å¹´ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°
    var startY=2025, startM=4;
    function getYear(turn){return startY+Math.floor((startM-1+Math.floor((turn-1)/4))/12);}

    var grouped={};
    filtered.forEach(function(w){
      var yr=getYear(w.turn||0);
      if(!grouped[yr])grouped[yr]=[];
      grouped[yr].push(w);
    });

    var years=Object.keys(grouped).sort(function(a,b){return b-a;});
    var html='';

    years.forEach(function(yr){
      html+='<div class="pf-year-label">'+yr+'å¹´</div>';
      grouped[yr].forEach(function(w,idx){
        var qualColor=w.qual>=85?'#10b981':w.qual>=60?'#6366f1':w.qual>=40?'#f59e0b':'#ef4444';
        var canvasId='thumb-'+w.id+'-'+idx;
        var starsNum=w.stars?w.stars.split('â˜…').length-1:3;
        var mods=w.modCnt>0?'<span style="color:var(--warn)">ä¿®æ­£'+w.modCnt+'å›</span>':'<span style="color:var(--ok)">ä¿®æ­£ãªã—</span>';
        var staffTxt=w.staff?'æ‹…å½“: '+w.staff:'è‡ªåˆ†ãŒæ‹…å½“';
        var phNames=['å€‹äºº','äº‹å‹™æ‰€','ã‚¹ã‚¿ã‚¸ã‚ª','ä¼šç¤¾','ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ','PF','Tech'];
        var phTag=phNames[Math.min(w.phase||0,6)];

        var delivHtml='';
        if(w.deliv&&w.deliv.files){
          delivHtml='<div style="margin-top:6px;border-top:1px solid var(--bord2);padding-top:6px">'
            +'<div style="font-size:6px;color:var(--t3);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px">ç´å“ç‰©</div>'
            +'<div style="display:flex;flex-direction:column;gap:2px">'
            +w.deliv.files.map(function(f2){return'<div style="font-size:6.5px;color:var(--t2);display:flex;align-items:center;gap:4px"><span style="color:var(--ok)">âœ“</span>'+esc(f2)+'</div>';}).join('')
            +'</div>'
            +(w.deliv.format?'<div style="font-size:6px;color:var(--t3);margin-top:3px">ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: '+esc(w.deliv.format)+'</div>':'')
            +'</div>';
        }
        var mjHtml='';
        if(w.mjPrompt){
          // ãƒ‡ãƒ¼ã‚¿å±æ€§ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¿æŒã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ã§ã‚³ãƒ”ãƒ¼
          var mjIdx=G.s.portfolio.indexOf(w);
          mjHtml='<div style="margin-top:6px;border-top:1px solid var(--bord2);padding-top:5px">'
            +'<div style="font-size:6px;color:var(--t3);letter-spacing:1px;margin-bottom:3px">ğŸ¨ MJ PROMPT</div>'
            +'<div class="mj-prompt-copy" data-idx="'+mjIdx+'" style="font-size:6px;color:rgba(139,92,246,0.8);font-family:monospace;line-height:1.6;word-break:break-all;cursor:pointer;user-select:text" title="ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼">'+esc(w.mjPrompt.slice(0,100))+'â€¦</div>'
            +'</div>';
        }
        // ã‚µãƒ ãƒã‚¤ãƒ«éƒ¨åˆ†: SVGç”Ÿæˆæ¸ˆã¿/ç”Ÿæˆä¸­/Canvas ã®3ãƒ‘ã‚¿ãƒ¼ãƒ³
        var thumbInner='';
        if(w.svgStatus==='generating'){
          thumbInner='<div class="pf-generating"><div class="pf-gen-dot"></div><div class="pf-gen-txt">AIç”Ÿæˆä¸­â€¦</div></div>';
        }else if(w.svg){
          // ç”Ÿæˆæ¸ˆã¿SVGã‚’ã‚µãƒ ãƒã‚¤ãƒ«ã¨ã—ã¦è¡¨ç¤ºï¼ˆç¸®å°ï¼‰
          var svgThumb=w.svg.replace(/<svg([^>]*)>/i,function(m,attrs){
            // viewBoxã‚’ä¿ã£ã¦widthã¨heightã‚’å‰Šé™¤ã—ã¦CSSå´ã§ãƒ•ã‚£ãƒƒãƒˆ
            var a=attrs.replace(/\s+width="[^"]*"/g,'').replace(/\s+height="[^"]*"/g,'');
            return '<svg'+a+' style="width:100%;height:100%;object-fit:contain">';
          });
          thumbInner=svgThumb
            +'<div class="pf-thumb-overlay"><span class="pf-thumb-zoom">ğŸ”</span></div>';
        }else{
          // Canvasã‚µãƒ ãƒã‚¤ãƒ«
          thumbInner='<canvas id="'+canvasId+'" width="100" height="100" style="display:block"></canvas>'
            +'<div class="pf-thumb-overlay"><span class="pf-thumb-zoom">ğŸ”</span></div>';
          if(w.svgStatus==='error'){
            thumbInner+='<div style="position:absolute;bottom:0;left:0;right:0;font-size:6px;background:rgba(239,68,68,0.7);color:#fff;padding:2px;text-align:center">ç”Ÿæˆå¤±æ•— â€” å†è©¦è¡Œå¯</div>';
          }else if(!G.aiDesign.getKey()){
            thumbInner+='<div style="position:absolute;bottom:0;left:0;right:0;font-size:5.5px;background:rgba(0,0,0,0.5);color:rgba(255,255,255,0.6);padding:2px;text-align:center">APIã‚­ãƒ¼æœªè¨­å®š</div>';
          }
        }
        var goldBar=w.qual>=90?'<div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--gold),rgba(232,201,109,0.3))"></div>':'';
        var pfCardId='pf-card-'+w.id;

        html+='<div class="pf-card" id="'+pfCardId+'" onclick="G.aiDesign.openViewer(\''+w.id+'\')">'
          +'<div class="pf-thumb" style="background:#1a1a2e">'
          +thumbInner
          +goldBar
          +'</div>'
          +'<div class="pf-body">'
          +'<div class="pf-nm">'+w.tic+' '+esc(w.nm)+'</div>'
          +'<div class="pf-meta">'
          +'<span class="pf-tag">'+esc(w.tlb)+'</span>'
          +'<span class="pf-tag" style="background:rgba(99,102,241,0.1);color:#6366f1">'+phTag+'æœŸ</span>'
          +'<span style="color:var(--t3)">'+esc(w.cli)+' '+w.cliIc+'</span>'
          +'</div>'
          +'<div class="pf-stars">'+w.stars+'</div>'
          +'<div class="pf-qual">'
          +'<span style="font-size:6.5px;color:var(--t3)">å“è³ª</span>'
          +'<div class="pf-qual-bar"><div class="pf-qual-fill" style="width:'+w.qual+'%;background:'+qualColor+'"></div></div>'
          +'<span style="font-size:6.5px;color:'+qualColor+'">'+w.qual+'</span>'
          +'</div>'
          +'<div style="display:flex;justify-content:space-between;font-size:6.5px;color:var(--t3);margin-top:2px">'
          +'<span>'+staffTxt+'</span><span>'+mods+'</span>'
          +'</div>'
          +'<div class="pf-comment">'+esc(w.comment)+'</div>'
          +'<div style="font-size:6.5px;color:var(--ok);font-weight:700;margin-top:3px">'+fY(w.earned)+'</div>'
          +delivHtml
          +mjHtml
          +'<div style="margin-top:5px;display:flex;gap:5px;align-items:center">'
          +(w.svg?'<span style="font-size:6px;color:var(--ok)">âœ¨ AIç”Ÿæˆæ¸ˆã¿</span>':
            w.svgStatus==='generating'?'<span style="font-size:6px;color:var(--acc)">âš¡ ç”Ÿæˆä¸­...</span>':
            w.svgStatus==='error'?'<button onclick="event.stopPropagation();G.aiDesign.regenerate(\''+w.id+'\')" style="font-size:6px;padding:2px 6px;background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:3px;color:var(--red);cursor:pointer">â†» å†ç”Ÿæˆ</button>':
            G.aiDesign.getKey()?'<span style="font-size:6px;color:var(--t4)">ï¼ˆå®Œäº†å¾Œã«è‡ªå‹•ç”Ÿæˆï¼‰</span>':
            '<span style="font-size:6px;color:var(--t4)">APIã‚­ãƒ¼ã‚’è¨­å®šã™ã‚‹ã¨ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ã«</span>')
          +'</div>'
          +'</div>'
          +'</div>';
      });
    });

    el.innerHTML=html;

    // Canvas ã‚µãƒ ãƒã‚¤ãƒ«ã‚’æç”»ï¼ˆSVGæœªç”Ÿæˆã®ã‚¨ãƒ³ãƒˆãƒªã®ã¿ï¼‰
    years.forEach(function(yr){
      grouped[yr].forEach(function(w,idx){
        if(w.svg||w.svgStatus==='generating')return; // SVGã‚ã‚Š/ç”Ÿæˆä¸­ã¯ã‚¹ã‚­ãƒƒãƒ—
        var cv=document.getElementById('thumb-'+w.id+'-'+idx);
        if(cv)G.drawThumb(cv, w.tid||'logo', w.qual||50, (w.turn||1)*997+(idx*31));
      });
    });
    // MJãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ ã‚³ãƒ”ãƒ¼ ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²
    el.querySelectorAll('.mj-prompt-copy').forEach(function(div){
      div.addEventListener('click',function(){
        var idx=parseInt(div.getAttribute('data-idx'));
        var item=G.s.portfolio[idx];
        if(item&&item.mjPrompt){
          navigator.clipboard.writeText(item.mjPrompt).then(function(){
            div.style.color='var(--ok)';
            setTimeout(function(){div.style.color='rgba(139,92,246,0.8)';},1500);
          });
        }
      });
    });
  },

  renderProg:function(){
    var phDefs=[
      {nm:'å€‹äººäº‹å‹™æ‰€',    s:'åç›Š150ä¸‡+ç¤¾å“¡2å'},
      {nm:'ãƒ‡ã‚¶ã‚¤ãƒ³äº‹å‹™æ‰€',s:'åç›Š800ä¸‡+ç¤¾å“¡5å'},
      {nm:'ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª',s:'åç›Š5000ä¸‡+ç¤¾å“¡8å'},
      {nm:'ãƒ‡ã‚¶ã‚¤ãƒ³ä¼šç¤¾',  s:'ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æ¡ä»¶ã¸'},
      {nm:'ğŸš€ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä¼æ¥­',s:'æŠ€è¡“[ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæˆ¦ç•¥]+åç›Š1å„„+ç¤¾å“¡12å'},
      {nm:'ğŸŒ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¼æ¥­',s:'æŠ€è¡“[PFåŒ–]+DAU20ä¸‡+åç›Š10å„„'},
      {nm:'âš¡ ãƒ†ãƒƒã‚¯ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ',s:'æŠ€è¡“[ã‚°ãƒ­ãƒ¼ãƒãƒ«æœ¬ç¤¾]+DAU200ä¸‡+åç›Š100å„„'}
    ];
    q('phases').innerHTML=phDefs.map(function(p,i){return'<div class="ph '+(i<G.s.phase?'done':i===G.s.phase?'cur':'')+'"><div class="ph-n">'+(i<G.s.phase?'âœ“':i===G.s.phase?'â—':i)+'</div><div class="ph-nm">'+p.nm+'</div><div class="ph-s">'+p.s+'</div></div>';}).join('');
    q('of-cards').innerHTML=OFFICES.map(function(o,i){var cur=G.s.offLevel===i,past=G.s.offLevel>i,can=G.s.offLevel===i-1;
      return'<div class="ofc'+(cur?' cur':past?' past':'')+'"><div class="ofc-ic">'+o.ic+'</div><div class="ofc-n">'+esc(o.nm)+(cur?' âœ“':'')+'</div><div class="ofc-d">'+esc(o.desc)+'</div><div style="font-size:7px;color:var(--t3);margin-bottom:5px">è©•åˆ¤+'+o.rp+' / å®¶è³ƒ'+fY(o.mc)+'/æœˆ</div><div class="ofc-f"><span class="ofc-p">'+(o.cost?fY(o.cost):'ç„¡æ–™')+'</span>'+(can?'<button class="btn-up" '+(G.s.money<o.cost?'disabled':'')+' onclick="G.office('+i+')">ç§»è»¢ã™ã‚‹</button>':cur?'<span style="font-size:7px;color:var(--teal)">âœ“ ç¾åœ¨åœ°</span>':past?'<span style="font-size:7px;color:var(--t4)">é€šéæ¸ˆã¿</span>':'<span style="font-size:7px;color:var(--t4)">ğŸ”’</span>')+'</div></div>';
    }).join('');
    var avgM=G.s.staff.length>0?Math.round(G.s.staff.reduce(function(a,s){return a+s.mental;},0)/G.s.staff.length):0;
    var stages=['MVP','PMFé”æˆ','ã‚¹ã‚±ãƒ¼ãƒ«','ã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹'];
    var fmtDau=function(v){return v>=10000?Math.round(v/10000)+'ä¸‡':v.toLocaleString();};
    var fmtArr=function(v){return v>=100000000?Math.round(v/100000000)+'å„„':v>=10000?Math.round(v/10000)+'ä¸‡':'--';};
    // ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæŒ‡æ¨™ï¼ˆãƒ•ã‚§ãƒ¼ã‚º4ä»¥ä¸Šï¼‰
    var prodStats='';
    if(G.s.phase>=4){
      var pStage=stages[Math.min(G.s.prodStage||0,3)];
      var stageColor=G.s.prodStage>=3?'var(--gold)':G.s.prodStage>=2?'var(--ok)':G.s.prodStage>=1?'var(--acc)':'var(--t3)';
      // DAUãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
      var dauGoal=G.s.phase>=6?2000000:G.s.phase>=5?1000000:G.s.phase>=4?200000:10000;
      var dauPct=Math.min(100,Math.round((G.s.dau||0)/dauGoal*100));
      prodStats='<div style="background:linear-gradient(135deg,rgba(99,102,241,0.06),rgba(99,102,241,0.02));border:1px solid rgba(99,102,241,0.2);border-radius:10px;padding:12px;margin-top:10px">'
        +'<div style="font-size:8px;color:#6366f1;font-weight:800;letter-spacing:2px;margin-bottom:10px">ğŸ“± PRODUCT METRICS</div>'
        +'<div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px">'
        +'<div style="background:var(--bg1);border-radius:6px;padding:8px"><div style="font-size:6.5px;color:var(--t3);margin-bottom:2px">DAU</div><div style="font-size:16px;font-weight:900;color:var(--acc)">'+fmtDau(G.s.dau||0)+'</div></div>'
        +'<div style="background:var(--bg1);border-radius:6px;padding:8px"><div style="font-size:6.5px;color:var(--t3);margin-bottom:2px">ARR</div><div style="font-size:16px;font-weight:900;color:var(--ok)">'+fmtArr(G.s.arr||0)+'</div></div>'
        +'<div style="background:var(--bg1);border-radius:6px;padding:8px"><div style="font-size:6.5px;color:var(--t3);margin-bottom:2px">ãƒãƒ¼ãƒ³ãƒ¬ãƒ¼ãƒˆ</div><div style="font-size:11px;font-weight:700;color:var(--warn)">'+fY(G.s.burnRate||0)+'/æœˆ</div></div>'
        +'<div style="background:var(--bg1);border-radius:6px;padding:8px"><div style="font-size:6.5px;color:var(--t3);margin-bottom:2px">èª¿é”ç´¯è¨ˆ</div><div style="font-size:11px;font-weight:700;color:var(--gold)">'+(G.s.funding>=100000000?Math.round(G.s.funding/100000000)+'å„„':'--')+'</div></div>'
        +'</div>'
        +'<div style="margin-bottom:6px">'
        +'<div style="display:flex;justify-content:space-between;font-size:6.5px;color:var(--t3);margin-bottom:3px"><span>ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¸ï¼š<b style="color:'+stageColor+'">'+pStage+'</b></span><span>æ¬¡ã®ç›®æ¨™ DAU '+fmtDau(dauGoal)+'</span></div>'
        +'<div style="background:var(--bg3);border-radius:4px;height:6px"><div style="width:'+dauPct+'%;height:100%;background:linear-gradient(90deg,#6366f1,#a78bfa);border-radius:4px;transition:width .5s"></div></div>'
        +'</div>'
        +'</div>';
    }
    q('statbox').innerHTML='<div class="si">ç´¯è¨ˆåç›Š<b>'+fY(G.s.totalRev)+'</b></div><div class="si">å®Œäº†æ¡ˆä»¶<b>'+G.s.projDone+'ä»¶</b></div><div class="si">ç·ä¿®æ­£å›æ•°<b>'+G.s.totalMods+'å›</b></div><div class="si">å—è³æ­´<b>'+G.s.awards+'ä»¶</b></div><div class="si">ç¤¾å“¡æ•°<b>'+G.s.staff.length+'å</b></div><div class="si">SNS<b>'+G.s.sns.toLocaleString()+'</b></div><div class="si">å¹³å‡ãƒ¡ãƒ³ã‚¿ãƒ«<b>'+avgM+'</b></div><div class="si">ç¾åœ¨è³‡ç”£<b>'+fY(G.s.money)+'</b></div><div class="si">ç‚ä¸Š<b>'+G.s.fire+'%</b></div><div class="si">ãƒ–ãƒ©ãƒƒã‚¯åº¦<b>'+G.s.black+'%</b></div>'+prodStats;
  },
};

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('load',function(){
  initAC();
  setTimeout(function(){
    q('SCR_LOAD').style.display='none';
    q('SCR_TITLE').style.display='flex';
    G.startTC();
    if(!localStorage.getItem('dcfk_v3')){var bl=document.querySelector('.t-btn.sec');if(bl)bl.style.opacity='.4';}
    var lf=document.createElement('link');lf.rel='stylesheet';lf.href='https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap';document.head.appendChild(lf);
  },1700);
});

document.addEventListener('keydown',function(e){
  if(!q('GAME')||q('GAME').style.display==='none')return;
  if(q('modal-ev').classList.contains('open')||q('modal-mod').classList.contains('open')||q('modal-rev').classList.contains('open'))return;
  if(e.key===' '){e.preventDefault();G.nextTurn();}
  else if(e.key==='1')G.tab('dash');
  else if(e.key==='2')G.tab('proj');
  else if(e.key==='3')G.tab('active');
  else if(e.key==='4')G.tab('staff');
  else if(e.key==='5')G.tab('hire');
  else if(e.key==='6')G.tab('tech');
  else if(e.key==='7')G.tab('prog');
  else if((e.ctrlKey||e.metaKey)&&e.key==='s'){e.preventDefault();G.save();}
});

document.addEventListener('click',function(){if(AC&&AC.state==='suspended')AC.resume();},{ once:true });

</script>
</body>
</html>
